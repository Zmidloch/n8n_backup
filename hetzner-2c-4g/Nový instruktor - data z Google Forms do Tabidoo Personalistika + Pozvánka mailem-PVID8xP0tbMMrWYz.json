{
  "active": true,
  "activeVersion": {
    "updatedAt": "2025-12-16T14:35:15.710Z",
    "createdAt": "2025-12-16T14:35:15.710Z",
    "versionId": "6085b590-6c4a-4156-aebc-df36f77ada6c",
    "workflowId": "PVID8xP0tbMMrWYz",
    "nodes": [
      {
        "parameters": {
          "content": "## Tabidoo Form\n**E-mail address* filled up in Tabidoo. ",
          "height": 368,
          "width": 256
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -640,
          -48
        ],
        "typeVersion": 1,
        "id": "8ac60a07-5d10-4d5b-9b63-68ba1ada3456",
        "name": "Sticky Note"
      },
      {
        "parameters": {
          "content": "## New Contact in Tabidoo\n",
          "height": 80,
          "color": 3
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          944,
          -144
        ],
        "typeVersion": 1,
        "id": "1c653f3a-5bf2-4543-8936-68593ad9149b",
        "name": "Sticky Note1"
      },
      {
        "parameters": {
          "content": "## Delivery of Google Form\n**Form, Google Form, Gmail** ",
          "height": 368,
          "width": 304
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -352,
          -48
        ],
        "typeVersion": 1,
        "id": "eb858af0-dc66-4b65-815e-5c0e5d3d5235",
        "name": "Sticky Note2"
      },
      {
        "parameters": {
          "content": "## Insert New Data\n\n3. Transform data (dates)\n4. Move data to Tabidoo",
          "height": 368,
          "width": 688
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          560,
          -192
        ],
        "typeVersion": 1,
        "id": "64b813c1-4dcd-4fb7-8b24-13fa39013de5",
        "name": "Sticky Note3"
      },
      {
        "parameters": {
          "sendTo": "={{ $json.email }}",
          "subject": "Dotazn√≠k nov√©ho INSTRUKTORA Z-AGENCY",
          "message": "=<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Dal≈°√≠ krok k instruktorsk√© pozici v Z-AGENCY</title>\n</head>\n<body style=\"font-family: Arial, sans-serif; font-size: 16px; color: #333333; line-height: 1.6;\">\n    <div style=\"max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eeeeee; border-radius: 8px;\">\n        <p style=\"font-size: 18px; font-weight: bold; color: #0073b1;\">Dal≈°√≠ krok k instruktorsk√© pozici v Z-AGENCY</p>\n        \n        <p>Dobr√Ω den,</p>\n        <p>Dƒõkujeme Ti za Tvoji dosavadn√≠ komunikaci a za ƒças, kter√Ω jsi vƒõnoval/a na≈°emu setk√°n√≠ ohlednƒõ pozice instruktora. Bylo to p≈ô√≠jemn√© a inspirativn√≠!</p>\n        <p>Abychom mohli Tv√© za≈ôazen√≠ do na≈°eho t√Ωmu dokonƒçit a p≈ôipravit v≈°e pot≈ôebn√© pro Tvoji pr√°ci s n√°mi, pot≈ôebujeme od Tebe z√≠skat nƒõkolik <strong style=\"font-weight: bold;\">z√°kladn√≠ch osobn√≠ch a kontaktn√≠ch informac√≠</strong>.</p>\n        <p>Tyto √∫daje jsou pro n√°s kl√≠ƒçov√© ze dvou hlavn√≠ch d≈Øvod≈Ø:</p>\n        <ul style=\"padding-left: 20px;\">\n            <li><strong style=\"font-weight: bold;\">Vytvo≈ôen√≠ smlouvy:</strong> Jsou nezbytn√© pro form√°ln√≠ vy≈ô√≠zen√≠ pracovn√≠ho vztahu (zejm√©na pro Dohodu o proveden√≠ pr√°ce ‚Äì DPP).</li>\n            <li><strong style=\"font-weight: bold;\">Obsazov√°n√≠ a odmƒõny:</strong> Poskytnou n√°m podrobn√© informace nutn√© pro Tv√© efektivn√≠ obsazov√°n√≠ na na≈°e akce a zaji≈°tƒõn√≠ vƒçasn√©ho vyplacen√≠ odmƒõny za Tvoji pr√°ci.</li>\n        </ul>\n        <p>Pros√≠me Tƒõ o vyplnƒõn√≠ n√≠≈æe uveden√©ho dotazn√≠ku v Google Forms:</p>\n        <div style=\"text-align: center; margin: 30px 0;\">\n            <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSdD_o4P4K9rvcYzanbhwCh3PJ2P8f1exTHdfuF6wF1SBF5LZg/viewform?usp=header\" \n                style=\"background-color: #0073b1; color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; font-weight: bold; font-size: 16px; display: inline-block;\">\n                P≈ôej√≠t na dotazn√≠k\n            </a>\n        </div>\n        <p style=\"text-align: center; font-size: 14px;\">Odkaz: <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSdD_o4P4K9rvcYzanbhwCh3PJ2P8f1exTHdfuF6wF1SBF5LZg/viewform?usp=header\" style=\"color: #0073b1;\">https://docs.google.com/forms/d/e/1FAIpQLSdD_o4P4K9rvcYzanbhwCh3PJ2P8f1exTHdfuF6wF1SBF5LZg/...</a></p>\n        <p>P≈ôedem Ti dƒõkujeme za rychl√© vyplnƒõn√≠!</p>\n        <hr style=\"border: none; border-top: 1px solid #dddddd; margin: 30px 0;\">\n        <p style=\"font-family: Verdana, sans-serif; font-size: 14px; color: #333;\">S pozdravem,</p>\n        <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"font-family: Verdana, sans-serif; font-size: 14px; color: #333;\">\n            <tr>\n                <td style=\"padding-right: 15px; vertical-align: middle;\">\n                    <img src=\"https://www.terrahunt.cz/TerraHunt/media/static-media/fecf446d-5e97-4754-8a8e-55b43bdc62aa@w600.webp\" alt=\"Logo Z-AGENCY\" width=\"80\" height=\"80\" style=\"border-radius: 50%; display: block; object-fit: cover;\">\n                </td>\n                <td style=\"vertical-align: middle;\">\n                    <strong style=\"font-size: 16px; color: #0073b1;\">T√Ωm Z-AGENCY</strong><br>\n                    <span style=\"display: block; margin-top: 3px;\">Z-AGENCY s.r.o.</span>\n                    <span style=\"display: block;\">Karlova 38, 61400 Brno</span>\n                    <span style=\"display: block;\">‚òéÔ∏è +420 542 211 935</span>\n                    <span style=\"display: block;\">‚úâÔ∏è <a href=\"mailto:info@z-agency.cz\" style=\"color: #0073b1; text-decoration: none;\">info@z-agency.cz</a></span>\n                    <span style=\"display: block;\">üåê <a href=\"https://www.z-agency.cz\" style=\"color: #0073b1; text-decoration: none;\">z-agency.cz</a> |\n                    <a href=\"https://www.terrahunt.cz\" style=\"color: #0073b1; text-decoration: none;\">terrahunt.cz</a></span>\n                </td>\n            </tr>\n        </table>\n    </div>\n</body>\n</html>",
          "options": {
            "appendAttribution": false
          }
        },
        "type": "n8n-nodes-base.gmail",
        "typeVersion": 2.1,
        "position": [
          -176,
          96
        ],
        "id": "ed05ec49-ae37-4176-b988-891233f51bbc",
        "name": "Send a message",
        "webhookId": "729c0fea-04b6-4d5d-8723-206e8540a659",
        "credentials": {
          "gmailOAuth2": {
            "id": "cUMqdo7XCF6noXLb",
            "name": "Gmail-info@z-agency.cz"
          }
        }
      },
      {
        "parameters": {
          "pollTimes": {
            "item": [
              {
                "mode": "everyMinute"
              }
            ]
          },
          "documentId": {
            "__rl": true,
            "value": "15LqLq43bCdy01h5VaTV2OMxq2Lcl69PG73DwbP0CdI4",
            "mode": "list",
            "cachedResultName": "Dotazn√≠k pro nov√© instruktory 2026 (Odpovƒõdi)",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/15LqLq43bCdy01h5VaTV2OMxq2Lcl69PG73DwbP0CdI4/edit?usp=drivesdk"
          },
          "sheetName": {
            "__rl": true,
            "value": 1005795739,
            "mode": "list",
            "cachedResultName": "Odpovƒõdi formul√°≈ôe 1",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/15LqLq43bCdy01h5VaTV2OMxq2Lcl69PG73DwbP0CdI4/edit#gid=1005795739"
          },
          "event": "rowAdded",
          "options": {}
        },
        "type": "n8n-nodes-base.googleSheetsTrigger",
        "typeVersion": 1,
        "position": [
          48,
          96
        ],
        "id": "ac776967-f9d4-4f05-967b-5ac266a09d45",
        "name": "Google Sheets Trigger",
        "credentials": {
          "googleSheetsTriggerOAuth2Api": {
            "id": "PONFxr0FZ1WvjNKm",
            "name": "Google Sheets zmidloch@z-agency.cz"
          }
        }
      },
      {
        "parameters": {
          "conditions": {
            "options": {
              "caseSensitive": true,
              "leftValue": "",
              "typeValidation": "strict",
              "version": 2
            },
            "conditions": [
              {
                "id": "00cacb1b-7485-431d-8a33-8c64ef3e6c0d",
                "leftValue": "={{ $json['Chce≈° s n√°mi nad√°le spolupracovat?'] }}",
                "rightValue": "Ano",
                "operator": {
                  "type": "string",
                  "operation": "equals"
                }
              }
            ],
            "combinator": "and"
          },
          "options": {}
        },
        "type": "n8n-nodes-base.if",
        "typeVersion": 2.2,
        "position": [
          240,
          96
        ],
        "id": "c5eb0fee-58d0-4628-93af-3a453f6e9b5e",
        "name": "If"
      },
      {
        "parameters": {
          "content": "## Google Sheet Information Added\n**1. Employe fills data\n2. Google Sheet updated\n3. New row added** ",
          "height": 368,
          "width": 496
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          0,
          -48
        ],
        "typeVersion": 1,
        "id": "4de8e36b-e1d5-4e18-b9d8-89298188cbe3",
        "name": "Sticky Note4"
      },
      {
        "parameters": {
          "content": "## Does  NOT Want To Cooperate Anymore\n**Thank you e-mail* ",
          "height": 368,
          "width": 672
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          576,
          256
        ],
        "typeVersion": 1,
        "id": "2c17d1fb-737d-4396-9e3a-7ed75b4e5982",
        "name": "Sticky Note5"
      },
      {
        "parameters": {
          "formTitle": "Dotazn√≠k pro nov√© instruktory",
          "formDescription": "Do pole zadej e-maily nov√Ωch instruktor≈Ø oddƒõlen√© ƒç√°rkou.",
          "formFields": {
            "values": [
              {
                "fieldLabel": "E-mail list",
                "requiredField": true
              }
            ]
          },
          "responseMode": "lastNode",
          "options": {
            "appendAttribution": false,
            "buttonLabel": "Odeslat",
            "path": "",
            "respondWithOptions": {
              "values": {
                "formSubmittedText": "V√°≈° e-mail byl odesl√°n."
              }
            },
            "customCss": ":root {\n\t--font-family: 'Open Sans', sans-serif;\n\t--font-weight-normal: 400;\n\t--font-weight-bold: 600;\n\t--font-size-body: 12px;\n\t--font-size-label: 14px;\n\t--font-size-test-notice: 12px;\n\t--font-size-input: 14px;\n\t--font-size-header: 20px;\n\t--font-size-paragraph: 14px;\n\t--font-size-link: 12px;\n\t--font-size-error: 12px;\n\t--font-size-html-h1: 28px;\n\t--font-size-html-h2: 20px;\n\t--font-size-html-h3: 16px;\n\t--font-size-html-h4: 14px;\n\t--font-size-html-h5: 12px;\n\t--font-size-html-h6: 10px;\n\t--font-size-subheader: 14px;\n\n\t/* Colors */\n\t--color-background: #fbfcfe;\n\t--color-test-notice-text: #e6a23d;\n\t--color-test-notice-bg: #fefaf6;\n\t--color-test-notice-border: #f6dcb7;\n\t--color-card-bg: #ffffff;\n\t--color-card-border: #dbdfe7;\n\t--color-card-shadow: rgba(99, 77, 255, 0.06);\n\t--color-link: #7e8186;\n\t--color-header: #525356;\n\t--color-label: #555555;\n\t--color-input-border: #dbdfe7;\n\t--color-input-text: #71747A;\n\t--color-focus-border: rgb(90, 76, 194);\n\t--color-submit-btn-bg: #ff6d5a;\n\t--color-submit-btn-text: #ffffff;\n\t--color-error: #ea1f30;\n\t--color-required: #ff6d5a;\n\t--color-clear-button-bg: #7e8186;\n\t--color-html-text: #555;\n\t--color-html-link: #ff6d5a;\n\t--color-header-subtext: #7e8186;\n\n\t/* Border Radii */\n\t--border-radius-card: 8px;\n\t--border-radius-input: 6px;\n\t--border-radius-clear-btn: 50%;\n\t--card-border-radius: 8px;\n\n\t/* Spacing */\n\t--padding-container-top: 24px;\n\t--padding-card: 24px;\n\t--padding-test-notice-vertical: 12px;\n\t--padding-test-notice-horizontal: 24px;\n\t--margin-bottom-card: 16px;\n\t--padding-form-input: 12px;\n\t--card-padding: 24px;\n\t--card-margin-bottom: 16px;\n\n\t/* Dimensions */\n\t--container-width: 448px;\n\t--submit-btn-height: 48px;\n\t--checkbox-size: 18px;\n\n\t/* Others */\n\t--box-shadow-card: 0px 4px 16px 0px var(--color-card-shadow);\n\t--opacity-placeholder: 0.5;\n}"
          }
        },
        "id": "8d30c74f-0a15-4b14-b3c0-2ac3ad02fa13",
        "name": "On form submission",
        "type": "n8n-nodes-base.formTrigger",
        "position": [
          -592,
          96
        ],
        "webhookId": "bdc27889-3c20-4dba-9249-b896cc486464",
        "typeVersion": 2.2
      },
      {
        "parameters": {
          "jsCode": "const items = [];\n\n// 1. Z√≠sk√°n√≠ a zabezpeƒçen√≠ vstupu. \n// Odkazujeme se na kl√≠ƒç 'E-mail list' z p≈ôedchoz√≠ho uzlu Form Trigger\nconst allEmails = $json['E-mail list'] || \"\"; \n\n// 2. Rozdƒõlen√≠ ≈ôetƒõzce na pole (array)\nconst emailArray = allEmails.split(',')\n  .map(email => email.trim()) // Odstran√≠ mezery kolem ƒç√°rek\n  .filter(email => email.length > 0); // Odstran√≠ pr√°zdn√© polo≈æky\n\n// 3. Vytvo≈ôen√≠ nov√Ωch polo≈æek\n// Vytvo≈ô√≠ se jedna polo≈æka pro ka≈æd√Ω email\nfor (const email of emailArray) {\n  // Ka≈æd√° polo≈æka mus√≠ m√≠t kl√≠ƒç 'json', jeho≈æ hodnota je OBJEKT { ... }\n  items.push({\n    json: {\n      email: email // Ka≈æd√° nov√° polo≈æka m√° nyn√≠ kl√≠ƒç 'email'\n    }\n  });\n}\n\nreturn items;"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          -320,
          96
        ],
        "id": "c82af037-5bd0-4cbc-b09b-3d76cc52f4cb",
        "name": "Code in JavaScript"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "=https://app.tabidoo.cloud/api/v2/apps/dev-personalistika-u226/tables/instruktorsky_tym/data",
          "authentication": "genericCredentialType",
          "genericAuthType": "httpHeaderAuth",
          "sendBody": true,
          "specifyBody": "json",
          "jsonBody": "={\n  \"fields\": {{ JSON.stringify($('Multichoice and Dropdown').item.json) }}\n}",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [
          1008,
          -32
        ],
        "id": "72cecee2-ab1a-4e1b-8478-b19ba9c80516",
        "name": "HTTP Request - POST data",
        "retryOnFail": true,
        "credentials": {
          "httpHeaderAuth": {
            "id": "wFGIMCQoDGlh0Gtd",
            "name": "Header Auth DEV-Personalistika"
          }
        },
        "onError": "continueRegularOutput"
      },
      {
        "parameters": {
          "sendTo": "={{ $json['E-mailov√° adresa'] }}",
          "subject": "Z-AGENCY: Dƒõkujeme za Tv√© up≈ô√≠mn√© rozhodnut√≠",
          "message": "=<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Z-AGENCY: Dƒõkujeme za Tv√© up≈ô√≠mn√© rozhodnut√≠</title>\n</head>\n<body style=\"font-family: Arial, sans-serif; font-size: 16px; color: #333333; line-height: 1.6;\">\n\n    <div style=\"max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eeeeee; border-radius: 8px;\">\n\n        <p style=\"font-size: 18px; font-weight: bold; color: #0073b1;\">Dƒõkujeme za Tvoji zpƒõtnou vazbu</p>\n        \n        <p>Ahoj,</p>\n\n        <p>Dƒõkujeme Ti za rychl√© vyplnƒõn√≠ dotazn√≠ku a p≈ôedev≈°√≠m za <strong style=\"font-weight: bold;\">naprostou up≈ô√≠mnost</strong> ohlednƒõ Tv√© situace.</p>\n\n        <p>Tv√© rozhodnut√≠ plnƒõ <strong style=\"font-weight: bold;\">respektujeme</strong> a cen√≠me si Tv√© otev≈ôenosti. Je d≈Øle≈æit√©, aby ka≈æd√Ω dƒõlal to, co mu d√°v√° smysl a kde se c√≠t√≠ nejl√©pe.</p>\n\n        <p>Chtƒõli bychom Ti ≈ô√≠ct, ≈æe u n√°s m√°≈° do budoucna <strong style=\"font-weight: bold;\">dve≈ôe v≈ædy otev≈ôen√©</strong>. <strong style=\"font-weight: bold;\">Pokud se Tv√© rozhodnut√≠ zmƒõn√≠</strong> a Tv√© okolnosti se vyvinou jinak, nev√°hej se n√°m kdykoli ozvat!</p>\n\n        <p>P≈ôejeme Ti mnoho osobn√≠ch i pracovn√≠ch √∫spƒõch≈Ø do budoucna!</p>\n\n        <hr style=\"border: none; border-top: 1px solid #dddddd; margin: 30px 0;\">\n\n        <p style=\"font-family: Verdana, sans-serif; font-size: 14px; color: #333;\">S pozdravem,</p>\n        <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"font-family: Verdana, sans-serif; font-size: 14px; color: #333;\">\n            <tr>\n                <td style=\"padding-right: 15px; vertical-align: middle;\">\n                    <img src=\"https://www.terrahunt.cz/TerraHunt/media/static-media/fecf446d-5e97-4754-8a8e-55b43bdc62aa@w600.webp\" alt=\"Logo Z-AGENCY\" width=\"80\" height=\"80\" style=\"border-radius: 50%; display: block; object-fit: cover;\">\n                </td>\n                <td style=\"vertical-align: middle;\">\n                    <strong style=\"font-size: 16px; color: #0073b1;\">T√Ωm Z-AGENCY</strong><br>\n                    <span style=\"display: block; margin-top: 3px;\">Z-AGENCY s.r.o.</span>\n                    <span style=\"display: block;\">Karlova 38, 61400 Brno</span>\n                    <span style=\"display: block;\">‚òéÔ∏è +420 542 211 935</span>\n                    <span style=\"display: block;\">‚úâÔ∏è <a href=\"mailto:info@z-agency.cz\" style=\"color: #0073b1; text-decoration: none;\">info@z-agency.cz</a></span>\n                    <span style=\"display: block;\">üåê <a href=\"https://www.z-agency.cz\" style=\"color: #0073b1; text-decoration: none;\">z-agency.cz</a> |\n                    <a href=\"https://www.terrahunt.cz\" style=\"color: #0073b1; text-decoration: none;\">terrahunt.cz</a></span>\n                </td>\n            </tr>\n        </table>\n        </div>\n\n</body>\n</html>",
          "options": {
            "appendAttribution": false
          }
        },
        "type": "n8n-nodes-base.gmail",
        "typeVersion": 2.1,
        "position": [
          768,
          400
        ],
        "id": "4fcb83d3-0236-4771-8243-6fa0cd35e642",
        "name": "Thank You and Good Bye",
        "webhookId": "15c5f7bf-0957-4e27-846e-b8f595eef4b3",
        "credentials": {
          "gmailOAuth2": {
            "id": "cUMqdo7XCF6noXLb",
            "name": "Gmail-info@z-agency.cz"
          }
        }
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "9c72fdd1-c851-435e-b452-2c1de68510bb",
                "name": "jmeno_prijmeni",
                "value": "={{ $json['Jm√©no a p≈ô√≠jmen√≠'] }}",
                "type": "string"
              },
              {
                "id": "7cff9997-0db6-45d6-848c-00aea2265f9e",
                "name": "email",
                "value": "={{ $json['E-mailov√° adresa'] }}",
                "type": "string"
              },
              {
                "id": "900da024-7079-4e04-8da5-9a058902ebbe",
                "name": "trvale_bydliste",
                "value": "={{ $json['Adresa trval√©ho bydli≈°tƒõ (co m√°≈° v obƒçance)'] }}",
                "type": "string"
              },
              {
                "id": "892038af-13bd-4162-8ddf-125f26058484",
                "name": "misto_pobytu",
                "value": "={{ $json['Adresa m√≠sta, kde aktu√°lnƒõ ≈æije≈°'] }}",
                "type": "string"
              },
              {
                "id": "ae93a8d0-50b9-4b95-889c-c67762e2a655",
                "name": "telefon",
                "value": "={{ $json['Telefonn√≠ ƒç√≠slo, kter√© aktivnƒõ pou≈æ√≠v√°≈°'] }}",
                "type": "string"
              },
              {
                "id": "43df036b-e651-4351-b317-58a110d438b0",
                "name": "cislo_uctu",
                "value": "={{ $json['ƒå√≠slo √∫ƒçtu, na kter√Ω ti budeme pos√≠lat pen√≠ze'] }}",
                "type": "string"
              },
              {
                "id": "d42fc4a0-4da0-432e-b0a7-760a88396feb",
                "name": "rodne_jmeno",
                "value": "={{ $json['Rodn√© p≈ô√≠jmen√≠ (pokud m√°≈° teƒè jin√©)'] }}",
                "type": "string"
              },
              {
                "id": "29a49084-4280-401f-8842-10567e334787",
                "name": "misto_narozeni",
                "value": "={{ $json['M√≠sto narozen√≠ (mƒõsto nebo obec)'] }}",
                "type": "string"
              },
              {
                "id": "5eecc033-4fd4-4035-be76-9bc9685eae17",
                "name": "datum_narozeni",
                "value": "={{ $json['Datum narozen√≠'] }}",
                "type": "string"
              },
              {
                "id": "5c917466-9f5a-4ad4-a962-7a09bb55447c",
                "name": "rodne_cislo",
                "value": "={{ $json['Rodn√© ƒç√≠slo'] }}",
                "type": "string"
              },
              {
                "id": "546c340c-ad6e-411a-ba80-a10626257054",
                "name": "zdravotni_pojistovna",
                "value": "={{ $json['Zdravotn√≠ poji≈°≈•ovna (napi≈° n√°zev, ƒç√≠slo a jestli je ƒçesk√° nebo z jin√© zemƒõ)'] }}",
                "type": "string"
              },
              {
                "id": "3088e75a-392b-4c93-801f-10542c25a8f7",
                "name": "cislo_dokladu",
                "value": "={{ $json['ƒå√≠slo pasu nebo obƒçansk√Ω pr≈Økaz (pokud nem√°≈° ƒçeskou n√°rodnost)'] }}",
                "type": "string"
              },
              {
                "id": "99f25967-7f30-4f9a-b6bd-083ab274f074",
                "name": "ico",
                "value": "={{ $json['IƒåO '] }}",
                "type": "string"
              },
              {
                "id": "d8ef0264-0810-4dfd-a914-402da0667130",
                "name": "dic",
                "value": "={{ $json['DIƒå '] }}",
                "type": "string"
              },
              {
                "id": "6bbc91c1-a18e-4d1b-a5c3-0c4ef6712919",
                "name": "obchodni_nazev",
                "value": "={{ $json['N√°zev firmy nebo jm√©no ≈æivnostn√≠ka'] }}",
                "type": "string"
              },
              {
                "id": "a9f1651b-69b6-4ae1-bc49-6ea3e264675e",
                "name": "sidlo_podnikani",
                "value": "={{ $json['S√≠dlo firmy/≈æivnostn√≠ka'] }}",
                "type": "string"
              },
              {
                "id": "9df217e3-53d6-4440-8658-7bb75c160ac8",
                "name": "=informace_1",
                "value": "={{ $json['Je nƒõco co bychom mƒõli vƒõdƒõt, nebo ƒç√≠m se chce≈° pochlubit? (vlastnosti, dovednosti, √∫spƒõchy)'] }}",
                "type": "string"
              },
              {
                "id": "479720b0-6964-4e1d-8c9d-ee6fbea85fed",
                "name": "forma_spoluprace",
                "value": "={{ $json['Forma spolupr√°ce'] ? [$json['Forma spolupr√°ce']] : [] }}",
                "type": "string"
              },
              {
                "id": "1f5bc5c7-a47f-4484-86f2-dfcee48b47ce",
                "name": "sleva_dane",
                "value": "={{ $json['Bude≈° cht√≠t u n√°s podepsat r≈Ø≈æov√Ω formul√°≈ô (sleva na dani - poplatn√≠k, student..)?'] }}",
                "type": "string"
              },
              {
                "id": "0c551e5d-3738-4fd5-9c7b-cd2d4929fef5",
                "name": "status_instruktora",
                "value": "={{ $json['Vid√≠m se v n√°sleduj√≠c√≠m t√Ωmu instruktor≈Ø:'] }}",
                "type": "string"
              },
              {
                "id": "49bb4782-4e94-4f94-bb3e-717ed77ab052",
                "name": "dalsi_specializace",
                "value": "={{ $json['Jak√© m√°≈° dal≈°√≠ dovednosti a kvalifikace? (za≈°krtni, co plat√≠)'] }}",
                "type": "string"
              },
              {
                "id": "7d97d7f8-20f4-4186-82fc-22f51836062b",
                "name": "ridic",
                "value": "={{ $('Google Sheets Trigger').item.json['M√°≈° ≈ôidiƒç√°k a pravidelnƒõ ≈ô√≠d√≠≈°?'] }}",
                "type": "string"
              },
              {
                "id": "dbe1b009-575a-47bd-8720-0d9b23a061ae",
                "name": "vlastni_automobil",
                "value": "={{ $('Google Sheets Trigger').item.json['M√°≈° vlastn√≠ auto, kter√© m≈Ø≈æe≈° vz√≠t na akci?'] }}",
                "type": "string"
              },
              {
                "id": "e0a32ca2-1913-4e89-8a72-fc11b4463a10",
                "name": "jazykova_vybava",
                "value": "={{ $json[\"Jak√Ωmi jazyky mluv√≠≈°?\"] }}",
                "type": "string"
              },
              {
                "id": "c55ea6fc-bca1-4352-babb-732ec3e21fd8",
                "name": "level_english",
                "value": "={{ $json[\"Jak jsi dobr√Ω v angliƒçtinƒõ?\"] }}",
                "type": "string"
              },
              {
                "id": "fb051023-2716-4c26-9965-d19ea0dd3925",
                "name": "poznamky_kvalifikace",
                "value": "={{ $json['Jak√© m√°≈° zku≈°enosti s veden√≠m reflex√≠?'] }}",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          624,
          -32
        ],
        "id": "d5740ebe-0c9a-44ed-bd98-6359e8e3a6da",
        "name": "Tabidoo Mapping"
      },
      {
        "parameters": {
          "jsCode": "const smartSplit = (text) => {\n  if (!text) return [];\n  if (typeof text !== 'string') return [text];\n  const result = [];\n  let current = \"\";\n  let depth = 0;\n  for (let i = 0; i < text.length; i++) {\n    const char = text[i];\n    if (char === '(') depth++;\n    if (char === ')') depth--;\n    if (char === ',' && depth === 0) {\n      result.push(current.trim());\n      current = \"\";\n    } else {\n      current += char;\n    }\n  }\n  if (current) result.push(current.trim());\n  return result.filter(r => r !== \"\");\n};\n\nconst mapJazyk = (value) => {\n  if (typeof value !== 'string') return value;\n  const lower = value.toLowerCase();\n  if (lower.includes(\"anglick\")) return \"EN\";\n  if (lower.includes(\"nƒõmeck\")) return \"DE\";\n  if (lower.includes(\"slovensk\")) return \"SK\";\n  return value;\n};\n\nconst mapRidic = (value) => {\n  if (typeof value !== 'string') return value;\n  const lower = value.toLowerCase();\n  if (lower.includes(\"osobn√≠ automobil\")) return \"Osob√°k\";\n  if (lower.includes(\"malou dod√°vku\")) return \"Mal√° dod√°vka\";\n  if (lower.includes(\"velkou nalo≈æenou\") || lower.includes(\"velkou dod√°vku\")) return \"Velk√° dod√°vka\";\n  return value;\n};\n\nconst mapAuto = (value) => {\n  if (typeof value !== 'string') return value;\n  const lower = value.toLowerCase();\n  if (lower.includes(\"mal√° dod√°vka\") || lower.includes(\"mala dodavka\")) return \"Dod√°vka typu VW\";\n  if (lower.includes(\"velk√° dod√°vka\") || lower.includes(\"velka dodavka\")) return \"Dod√°vka typu Transit\";\n  if (lower.includes(\"osobn√≠ automobil velk√Ω\") || lower.includes(\"combi\") || lower.includes(\"galaxy\")) return \"Osobn√≠ velk√© typu combi\";\n  if (lower.includes(\"osobn√≠ automobil mal√Ω\") || lower.includes(\"fabia\") || lower.includes(\"hatchback\")) return \"Osobn√≠ mal√©\";\n  return value;\n};\n\nconst toArray = (value, mapFunction) => {\n  if (value === undefined || value === null || value === '') return [];\n  let val = value;\n  if (Array.isArray(val)) {\n    return mapFunction ? val.map(mapFunction) : val;\n  }\n  if (typeof val === 'string' && val.startsWith('[')) {\n    try { val = JSON.parse(val); } catch(e) {}\n  }\n  if (typeof val === 'string') {\n    val = smartSplit(val);\n  }\n  if (!Array.isArray(val)) val = [val];\n  if (mapFunction) {\n    val = val.map(mapFunction);\n  }\n  return val.filter(item => item !== null && item !== undefined && item !== '');\n};\n\nreturn $input.all().map(item => {\n  const newItem = { ...item.json };\n\n  if (newItem.forma_spoluprace !== undefined) {\n    newItem.forma_spoluprace = toArray(newItem.forma_spoluprace);\n  }\n\n  if (newItem.sleva_dane) {\n    let value = newItem.sleva_dane;\n    if (typeof value === 'string' && value.startsWith('[')) {\n      try { value = JSON.parse(value); } \n      catch (e) { value = value.replace(/[\\[\\]\"]/g, '').trim(); }\n    }\n    if (Array.isArray(value)) value = value.length > 0 ? value[0] : null;\n    newItem.sleva_dane = (value !== null && value !== undefined) ? String(value).trim() : null;\n  }\n\n  if (newItem.status_instruktora) {\n    let value = newItem.status_instruktora;\n    if (typeof value === 'string' && value.startsWith('[')) {\n      try { value = JSON.parse(value); } \n      catch (e) { value = value.replace(/[\\[\\]\"]/g, '').trim(); }\n    }\n    if (Array.isArray(value)) value = value.length > 0 ? value[0] : \"\";\n    let stringValue = (value !== null && value !== undefined) ? String(value).trim() : \"\";\n    const upperVal = stringValue.toUpperCase();\n    if (upperVal.includes('CORE')) newItem.status_instruktora = 'CORE';\n    else if (upperVal.includes('SUPPORT')) newItem.status_instruktora = 'SUPPORT';\n    else if (upperVal.includes('Z√ÅLOHA') || upperVal.includes('ZALOHA')) newItem.status_instruktora = 'Z√ÅLOHA';\n    else if (upperVal.includes('NEAKTIVN√ç') || upperVal.includes('NEAKTIVNI')) newItem.status_instruktora = 'NEAKTIVN√ç';\n    else newItem.status_instruktora = null;\n  }\n\n  if (newItem.dalsi_specializace !== undefined) {\n    newItem.dalsi_specializace = toArray(newItem.dalsi_specializace);\n  }\n\n  if (newItem.ridic !== undefined) {\n    newItem.ridic = toArray(newItem.ridic, mapRidic);\n  }\n\n  if (newItem.vlastni_automobil !== undefined) {\n    newItem.vlastni_automobil = toArray(newItem.vlastni_automobil, mapAuto);\n  }\n\n  if (newItem.jazykova_vybava !== undefined) {\n    newItem.jazykova_vybava = toArray(newItem.jazykova_vybava, mapJazyk);\n  }\n\n  if (newItem.level_english !== undefined) {\n    newItem.level_english = toArray(newItem.level_english);\n  }\n\n  // --- DATUM NAROZEN√ç (konverze z Excel serial nebo ƒçesk√©ho form√°tu) ---\n  if (newItem.datum_narozeni) {\n    let dateVal = newItem.datum_narozeni;\n    \n    // Pokud je to ƒç√≠slo (Excel serial date)\n    if (!isNaN(dateVal) && Number(dateVal) > 0) {\n      const excelSerial = Number(dateVal);\n      const date = new Date((excelSerial - 25569) * 86400 * 1000);\n      const year = date.getUTCFullYear();\n      const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n      const day = String(date.getUTCDate()).padStart(2, '0');\n      newItem.datum_narozeni = year + '-' + month + '-' + day;\n    }\n    // Pokud je to ƒçesk√Ω form√°t (dd.mm.yyyy)\n    else if (typeof dateVal === 'string' && dateVal.includes('.')) {\n      const parts = dateVal.split('.');\n      if (parts.length === 3) {\n        const day = parts[0].trim().padStart(2, '0');\n        const month = parts[1].trim().padStart(2, '0');\n        const year = parts[2].trim();\n        newItem.datum_narozeni = year + '-' + month + '-' + day;\n      }\n    }\n    // Pokud u≈æ je ve spr√°vn√©m form√°tu, nech ho\n  }\n\n  // Pole informace_1 a poznamky_kvalifikace z≈Østanou oddƒõlen√°\n\n  return {\n    json: newItem,\n    pairedItem: item.pairedItem\n  };\n});"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          816,
          -32
        ],
        "id": "844e321e-d642-4e91-b66c-136c7309257d",
        "name": "Multichoice and Dropdown"
      },
      {
        "parameters": {
          "content": "## SENSITIVE!!!\n**CODE NODE necessery to update with every new dropdown or multichoice",
          "height": 128,
          "width": 688,
          "color": 6
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          560,
          -352
        ],
        "typeVersion": 1,
        "id": "740a64f1-31ab-4fe0-8150-4e884a8d71ce",
        "name": "Sticky Note6"
      },
      {
        "parameters": {
          "content": "## Error - Check Manually",
          "height": 304,
          "width": 304
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1712,
          -112
        ],
        "typeVersion": 1,
        "id": "44da311c-3080-4508-bab7-1f3be8ad8a13",
        "name": "Sticky Note7"
      },
      {
        "parameters": {
          "sendTo": "info@z-agency.cz",
          "subject": "=CHYBA p≈ôi vkl√°d√°n√≠ instruktora {{ $('HTTP Request - POST data').item.json.data.fields.jmeno_prijmeni }} do Tabidoo",
          "message": "=Automatizace pro instruktora {{ $('HTTP Request - POST data').item.json.data.fields.jmeno_prijmeni }} neprobƒõhla z d≈Øvodu chby, uprav √∫daje ruƒçnƒõ.",
          "options": {}
        },
        "type": "n8n-nodes-base.gmail",
        "typeVersion": 2.1,
        "position": [
          1776,
          -48
        ],
        "id": "a82fb922-3b0f-4683-9ae5-459444505e89",
        "name": "Send Error Message",
        "webhookId": "7a5b84e6-f0c1-4403-8365-3f8271704c4e",
        "credentials": {
          "gmailOAuth2": {
            "id": "cUMqdo7XCF6noXLb",
            "name": "Gmail-info@z-agency.cz"
          }
        }
      },
      {
        "parameters": {
          "conditions": {
            "options": {
              "caseSensitive": true,
              "leftValue": "",
              "typeValidation": "strict",
              "version": 2
            },
            "conditions": [
              {
                "id": "891bca1a-0ca8-418d-b52d-4fb102bff417",
                "leftValue": "={{ $json.error }}",
                "rightValue": "={{ $json.error }}",
                "operator": {
                  "type": "string",
                  "operation": "notEmpty",
                  "singleValue": true
                }
              }
            ],
            "combinator": "and"
          },
          "options": {}
        },
        "type": "n8n-nodes-base.if",
        "typeVersion": 2.2,
        "position": [
          1376,
          -32
        ],
        "id": "9e976f41-4bc2-4421-9edf-2f04dd7a4c7f",
        "name": "If - Is There Any Error?"
      },
      {
        "parameters": {
          "sendTo": "info@zetkaci.cz",
          "subject": "=√öspe≈°n√© vlo≈æen√≠ instruktora {{ $json.data.fields.jmeno_prijmeni }} do Tabidoo",
          "message": "={{ $json.data.fields.jmeno_prijmeni  }} byl vlo≈æen do tabulky nov√Ωch instruktor≈Ø v Tabidoo.",
          "options": {}
        },
        "type": "n8n-nodes-base.gmail",
        "typeVersion": 2.1,
        "position": [
          1808,
          448
        ],
        "id": "f6f2e95b-fc2c-416a-9b87-b2a02399d10a",
        "name": "Send a message1",
        "webhookId": "c65f04b2-37e7-4414-a4ea-9c35ebd639cb",
        "credentials": {
          "gmailOAuth2": {
            "id": "cUMqdo7XCF6noXLb",
            "name": "Gmail-info@z-agency.cz"
          }
        }
      },
      {
        "parameters": {
          "content": "## OK - Confirmation",
          "height": 304,
          "width": 304
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1712,
          352
        ],
        "typeVersion": 1,
        "id": "2d05a9ea-505d-4c34-8657-913e820528af",
        "name": "Sticky Note8"
      }
    ],
    "connections": {
      "Google Sheets Trigger": {
        "main": [
          [
            {
              "node": "If",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "If": {
        "main": [
          [
            {
              "node": "Tabidoo Mapping",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "Thank You and Good Bye",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "On form submission": {
        "main": [
          [
            {
              "node": "Code in JavaScript",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Code in JavaScript": {
        "main": [
          [
            {
              "node": "Send a message",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Tabidoo Mapping": {
        "main": [
          [
            {
              "node": "Multichoice and Dropdown",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Multichoice and Dropdown": {
        "main": [
          [
            {
              "node": "HTTP Request - POST data",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "HTTP Request - POST data": {
        "main": [
          [
            {
              "node": "If - Is There Any Error?",
              "type": "main",
              "index": 0
            }
          ],
          []
        ]
      },
      "If - Is There Any Error?": {
        "main": [
          [
            {
              "node": "Send Error Message",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "Send a message1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    },
    "authors": "Jiri Zmidloch",
    "name": null,
    "description": null
  },
  "activeVersionId": "6085b590-6c4a-4156-aebc-df36f77ada6c",
  "connections": {
    "Google Sheets Trigger": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Tabidoo Mapping",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Thank You and Good Bye",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On form submission": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tabidoo Mapping": {
      "main": [
        [
          {
            "node": "Multichoice and Dropdown",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Multichoice and Dropdown": {
      "main": [
        [
          {
            "node": "HTTP Request - POST data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request - POST data": {
      "main": [
        [
          {
            "node": "If - Is There Any Error?",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "If - Is There Any Error?": {
      "main": [
        [
          {
            "node": "Send Error Message",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a message1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-12-07T11:58:40.494Z",
  "id": "PVID8xP0tbMMrWYz",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Nov√Ω instruktor - data z Google Forms do Tabidoo Personalistika + Pozv√°nka mailem",
  "nodes": [
    {
      "parameters": {
        "content": "## Tabidoo Form\n**E-mail address* filled up in Tabidoo. ",
        "height": 368,
        "width": 256
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -640,
        -48
      ],
      "typeVersion": 1,
      "id": "8ac60a07-5d10-4d5b-9b63-68ba1ada3456",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## New Contact in Tabidoo\n",
        "height": 80,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        944,
        -144
      ],
      "typeVersion": 1,
      "id": "1c653f3a-5bf2-4543-8936-68593ad9149b",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Delivery of Google Form\n**Form, Google Form, Gmail** ",
        "height": 368,
        "width": 304
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -352,
        -48
      ],
      "typeVersion": 1,
      "id": "eb858af0-dc66-4b65-815e-5c0e5d3d5235",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Insert New Data\n\n3. Transform data (dates)\n4. Move data to Tabidoo",
        "height": 368,
        "width": 688
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        560,
        -192
      ],
      "typeVersion": 1,
      "id": "64b813c1-4dcd-4fb7-8b24-13fa39013de5",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "sendTo": "={{ $json.email }}",
        "subject": "Dotazn√≠k nov√©ho INSTRUKTORA Z-AGENCY",
        "message": "=<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Dal≈°√≠ krok k instruktorsk√© pozici v Z-AGENCY</title>\n</head>\n<body style=\"font-family: Arial, sans-serif; font-size: 16px; color: #333333; line-height: 1.6;\">\n    <div style=\"max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eeeeee; border-radius: 8px;\">\n        <p style=\"font-size: 18px; font-weight: bold; color: #0073b1;\">Dal≈°√≠ krok k instruktorsk√© pozici v Z-AGENCY</p>\n        \n        <p>Dobr√Ω den,</p>\n        <p>Dƒõkujeme Ti za Tvoji dosavadn√≠ komunikaci a za ƒças, kter√Ω jsi vƒõnoval/a na≈°emu setk√°n√≠ ohlednƒõ pozice instruktora. Bylo to p≈ô√≠jemn√© a inspirativn√≠!</p>\n        <p>Abychom mohli Tv√© za≈ôazen√≠ do na≈°eho t√Ωmu dokonƒçit a p≈ôipravit v≈°e pot≈ôebn√© pro Tvoji pr√°ci s n√°mi, pot≈ôebujeme od Tebe z√≠skat nƒõkolik <strong style=\"font-weight: bold;\">z√°kladn√≠ch osobn√≠ch a kontaktn√≠ch informac√≠</strong>.</p>\n        <p>Tyto √∫daje jsou pro n√°s kl√≠ƒçov√© ze dvou hlavn√≠ch d≈Øvod≈Ø:</p>\n        <ul style=\"padding-left: 20px;\">\n            <li><strong style=\"font-weight: bold;\">Vytvo≈ôen√≠ smlouvy:</strong> Jsou nezbytn√© pro form√°ln√≠ vy≈ô√≠zen√≠ pracovn√≠ho vztahu (zejm√©na pro Dohodu o proveden√≠ pr√°ce ‚Äì DPP).</li>\n            <li><strong style=\"font-weight: bold;\">Obsazov√°n√≠ a odmƒõny:</strong> Poskytnou n√°m podrobn√© informace nutn√© pro Tv√© efektivn√≠ obsazov√°n√≠ na na≈°e akce a zaji≈°tƒõn√≠ vƒçasn√©ho vyplacen√≠ odmƒõny za Tvoji pr√°ci.</li>\n        </ul>\n        <p>Pros√≠me Tƒõ o vyplnƒõn√≠ n√≠≈æe uveden√©ho dotazn√≠ku v Google Forms:</p>\n        <div style=\"text-align: center; margin: 30px 0;\">\n            <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSdD_o4P4K9rvcYzanbhwCh3PJ2P8f1exTHdfuF6wF1SBF5LZg/viewform?usp=header\" \n                style=\"background-color: #0073b1; color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; font-weight: bold; font-size: 16px; display: inline-block;\">\n                P≈ôej√≠t na dotazn√≠k\n            </a>\n        </div>\n        <p style=\"text-align: center; font-size: 14px;\">Odkaz: <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSdD_o4P4K9rvcYzanbhwCh3PJ2P8f1exTHdfuF6wF1SBF5LZg/viewform?usp=header\" style=\"color: #0073b1;\">https://docs.google.com/forms/d/e/1FAIpQLSdD_o4P4K9rvcYzanbhwCh3PJ2P8f1exTHdfuF6wF1SBF5LZg/...</a></p>\n        <p>P≈ôedem Ti dƒõkujeme za rychl√© vyplnƒõn√≠!</p>\n        <hr style=\"border: none; border-top: 1px solid #dddddd; margin: 30px 0;\">\n        <p style=\"font-family: Verdana, sans-serif; font-size: 14px; color: #333;\">S pozdravem,</p>\n        <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"font-family: Verdana, sans-serif; font-size: 14px; color: #333;\">\n            <tr>\n                <td style=\"padding-right: 15px; vertical-align: middle;\">\n                    <img src=\"https://www.terrahunt.cz/TerraHunt/media/static-media/fecf446d-5e97-4754-8a8e-55b43bdc62aa@w600.webp\" alt=\"Logo Z-AGENCY\" width=\"80\" height=\"80\" style=\"border-radius: 50%; display: block; object-fit: cover;\">\n                </td>\n                <td style=\"vertical-align: middle;\">\n                    <strong style=\"font-size: 16px; color: #0073b1;\">T√Ωm Z-AGENCY</strong><br>\n                    <span style=\"display: block; margin-top: 3px;\">Z-AGENCY s.r.o.</span>\n                    <span style=\"display: block;\">Karlova 38, 61400 Brno</span>\n                    <span style=\"display: block;\">‚òéÔ∏è +420 542 211 935</span>\n                    <span style=\"display: block;\">‚úâÔ∏è <a href=\"mailto:info@z-agency.cz\" style=\"color: #0073b1; text-decoration: none;\">info@z-agency.cz</a></span>\n                    <span style=\"display: block;\">üåê <a href=\"https://www.z-agency.cz\" style=\"color: #0073b1; text-decoration: none;\">z-agency.cz</a> |\n                    <a href=\"https://www.terrahunt.cz\" style=\"color: #0073b1; text-decoration: none;\">terrahunt.cz</a></span>\n                </td>\n            </tr>\n        </table>\n    </div>\n</body>\n</html>",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        -176,
        96
      ],
      "id": "ed05ec49-ae37-4176-b988-891233f51bbc",
      "name": "Send a message",
      "webhookId": "729c0fea-04b6-4d5d-8723-206e8540a659",
      "credentials": {
        "gmailOAuth2": {
          "id": "cUMqdo7XCF6noXLb",
          "name": "Gmail-info@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "documentId": {
          "__rl": true,
          "value": "15LqLq43bCdy01h5VaTV2OMxq2Lcl69PG73DwbP0CdI4",
          "mode": "list",
          "cachedResultName": "Dotazn√≠k pro nov√© instruktory 2026 (Odpovƒõdi)",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/15LqLq43bCdy01h5VaTV2OMxq2Lcl69PG73DwbP0CdI4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1005795739,
          "mode": "list",
          "cachedResultName": "Odpovƒõdi formul√°≈ôe 1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/15LqLq43bCdy01h5VaTV2OMxq2Lcl69PG73DwbP0CdI4/edit#gid=1005795739"
        },
        "event": "rowAdded",
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "typeVersion": 1,
      "position": [
        48,
        96
      ],
      "id": "ac776967-f9d4-4f05-967b-5ac266a09d45",
      "name": "Google Sheets Trigger",
      "credentials": {
        "googleSheetsTriggerOAuth2Api": {
          "id": "PONFxr0FZ1WvjNKm",
          "name": "Google Sheets zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "00cacb1b-7485-431d-8a33-8c64ef3e6c0d",
              "leftValue": "={{ $json['Chce≈° s n√°mi nad√°le spolupracovat?'] }}",
              "rightValue": "Ano",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        240,
        96
      ],
      "id": "c5eb0fee-58d0-4628-93af-3a453f6e9b5e",
      "name": "If"
    },
    {
      "parameters": {
        "content": "## Google Sheet Information Added\n**1. Employe fills data\n2. Google Sheet updated\n3. New row added** ",
        "height": 368,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        -48
      ],
      "typeVersion": 1,
      "id": "4de8e36b-e1d5-4e18-b9d8-89298188cbe3",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## Does  NOT Want To Cooperate Anymore\n**Thank you e-mail* ",
        "height": 368,
        "width": 672
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        576,
        256
      ],
      "typeVersion": 1,
      "id": "2c17d1fb-737d-4396-9e3a-7ed75b4e5982",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "formTitle": "Dotazn√≠k pro nov√© instruktory",
        "formDescription": "Do pole zadej e-maily nov√Ωch instruktor≈Ø oddƒõlen√© ƒç√°rkou.",
        "formFields": {
          "values": [
            {
              "fieldLabel": "E-mail list",
              "requiredField": true
            }
          ]
        },
        "responseMode": "lastNode",
        "options": {
          "appendAttribution": false,
          "buttonLabel": "Odeslat",
          "path": "",
          "respondWithOptions": {
            "values": {
              "formSubmittedText": "V√°≈° e-mail byl odesl√°n."
            }
          },
          "customCss": ":root {\n\t--font-family: 'Open Sans', sans-serif;\n\t--font-weight-normal: 400;\n\t--font-weight-bold: 600;\n\t--font-size-body: 12px;\n\t--font-size-label: 14px;\n\t--font-size-test-notice: 12px;\n\t--font-size-input: 14px;\n\t--font-size-header: 20px;\n\t--font-size-paragraph: 14px;\n\t--font-size-link: 12px;\n\t--font-size-error: 12px;\n\t--font-size-html-h1: 28px;\n\t--font-size-html-h2: 20px;\n\t--font-size-html-h3: 16px;\n\t--font-size-html-h4: 14px;\n\t--font-size-html-h5: 12px;\n\t--font-size-html-h6: 10px;\n\t--font-size-subheader: 14px;\n\n\t/* Colors */\n\t--color-background: #fbfcfe;\n\t--color-test-notice-text: #e6a23d;\n\t--color-test-notice-bg: #fefaf6;\n\t--color-test-notice-border: #f6dcb7;\n\t--color-card-bg: #ffffff;\n\t--color-card-border: #dbdfe7;\n\t--color-card-shadow: rgba(99, 77, 255, 0.06);\n\t--color-link: #7e8186;\n\t--color-header: #525356;\n\t--color-label: #555555;\n\t--color-input-border: #dbdfe7;\n\t--color-input-text: #71747A;\n\t--color-focus-border: rgb(90, 76, 194);\n\t--color-submit-btn-bg: #ff6d5a;\n\t--color-submit-btn-text: #ffffff;\n\t--color-error: #ea1f30;\n\t--color-required: #ff6d5a;\n\t--color-clear-button-bg: #7e8186;\n\t--color-html-text: #555;\n\t--color-html-link: #ff6d5a;\n\t--color-header-subtext: #7e8186;\n\n\t/* Border Radii */\n\t--border-radius-card: 8px;\n\t--border-radius-input: 6px;\n\t--border-radius-clear-btn: 50%;\n\t--card-border-radius: 8px;\n\n\t/* Spacing */\n\t--padding-container-top: 24px;\n\t--padding-card: 24px;\n\t--padding-test-notice-vertical: 12px;\n\t--padding-test-notice-horizontal: 24px;\n\t--margin-bottom-card: 16px;\n\t--padding-form-input: 12px;\n\t--card-padding: 24px;\n\t--card-margin-bottom: 16px;\n\n\t/* Dimensions */\n\t--container-width: 448px;\n\t--submit-btn-height: 48px;\n\t--checkbox-size: 18px;\n\n\t/* Others */\n\t--box-shadow-card: 0px 4px 16px 0px var(--color-card-shadow);\n\t--opacity-placeholder: 0.5;\n}"
        }
      },
      "id": "8d30c74f-0a15-4b14-b3c0-2ac3ad02fa13",
      "name": "On form submission",
      "type": "n8n-nodes-base.formTrigger",
      "position": [
        -592,
        96
      ],
      "webhookId": "bdc27889-3c20-4dba-9249-b896cc486464",
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "jsCode": "const items = [];\n\n// 1. Z√≠sk√°n√≠ a zabezpeƒçen√≠ vstupu. \n// Odkazujeme se na kl√≠ƒç 'E-mail list' z p≈ôedchoz√≠ho uzlu Form Trigger\nconst allEmails = $json['E-mail list'] || \"\"; \n\n// 2. Rozdƒõlen√≠ ≈ôetƒõzce na pole (array)\nconst emailArray = allEmails.split(',')\n  .map(email => email.trim()) // Odstran√≠ mezery kolem ƒç√°rek\n  .filter(email => email.length > 0); // Odstran√≠ pr√°zdn√© polo≈æky\n\n// 3. Vytvo≈ôen√≠ nov√Ωch polo≈æek\n// Vytvo≈ô√≠ se jedna polo≈æka pro ka≈æd√Ω email\nfor (const email of emailArray) {\n  // Ka≈æd√° polo≈æka mus√≠ m√≠t kl√≠ƒç 'json', jeho≈æ hodnota je OBJEKT { ... }\n  items.push({\n    json: {\n      email: email // Ka≈æd√° nov√° polo≈æka m√° nyn√≠ kl√≠ƒç 'email'\n    }\n  });\n}\n\nreturn items;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -320,
        96
      ],
      "id": "c82af037-5bd0-4cbc-b09b-3d76cc52f4cb",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://app.tabidoo.cloud/api/v2/apps/dev-personalistika-u226/tables/instruktorsky_tym/data",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"fields\": {{ JSON.stringify($('Multichoice and Dropdown').item.json) }}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1008,
        -32
      ],
      "id": "72cecee2-ab1a-4e1b-8478-b19ba9c80516",
      "name": "HTTP Request - POST data",
      "retryOnFail": true,
      "credentials": {
        "httpHeaderAuth": {
          "id": "wFGIMCQoDGlh0Gtd",
          "name": "Header Auth DEV-Personalistika"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "sendTo": "={{ $json['E-mailov√° adresa'] }}",
        "subject": "Z-AGENCY: Dƒõkujeme za Tv√© up≈ô√≠mn√© rozhodnut√≠",
        "message": "=<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Z-AGENCY: Dƒõkujeme za Tv√© up≈ô√≠mn√© rozhodnut√≠</title>\n</head>\n<body style=\"font-family: Arial, sans-serif; font-size: 16px; color: #333333; line-height: 1.6;\">\n\n    <div style=\"max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eeeeee; border-radius: 8px;\">\n\n        <p style=\"font-size: 18px; font-weight: bold; color: #0073b1;\">Dƒõkujeme za Tvoji zpƒõtnou vazbu</p>\n        \n        <p>Ahoj,</p>\n\n        <p>Dƒõkujeme Ti za rychl√© vyplnƒõn√≠ dotazn√≠ku a p≈ôedev≈°√≠m za <strong style=\"font-weight: bold;\">naprostou up≈ô√≠mnost</strong> ohlednƒõ Tv√© situace.</p>\n\n        <p>Tv√© rozhodnut√≠ plnƒõ <strong style=\"font-weight: bold;\">respektujeme</strong> a cen√≠me si Tv√© otev≈ôenosti. Je d≈Øle≈æit√©, aby ka≈æd√Ω dƒõlal to, co mu d√°v√° smysl a kde se c√≠t√≠ nejl√©pe.</p>\n\n        <p>Chtƒõli bychom Ti ≈ô√≠ct, ≈æe u n√°s m√°≈° do budoucna <strong style=\"font-weight: bold;\">dve≈ôe v≈ædy otev≈ôen√©</strong>. <strong style=\"font-weight: bold;\">Pokud se Tv√© rozhodnut√≠ zmƒõn√≠</strong> a Tv√© okolnosti se vyvinou jinak, nev√°hej se n√°m kdykoli ozvat!</p>\n\n        <p>P≈ôejeme Ti mnoho osobn√≠ch i pracovn√≠ch √∫spƒõch≈Ø do budoucna!</p>\n\n        <hr style=\"border: none; border-top: 1px solid #dddddd; margin: 30px 0;\">\n\n        <p style=\"font-family: Verdana, sans-serif; font-size: 14px; color: #333;\">S pozdravem,</p>\n        <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"font-family: Verdana, sans-serif; font-size: 14px; color: #333;\">\n            <tr>\n                <td style=\"padding-right: 15px; vertical-align: middle;\">\n                    <img src=\"https://www.terrahunt.cz/TerraHunt/media/static-media/fecf446d-5e97-4754-8a8e-55b43bdc62aa@w600.webp\" alt=\"Logo Z-AGENCY\" width=\"80\" height=\"80\" style=\"border-radius: 50%; display: block; object-fit: cover;\">\n                </td>\n                <td style=\"vertical-align: middle;\">\n                    <strong style=\"font-size: 16px; color: #0073b1;\">T√Ωm Z-AGENCY</strong><br>\n                    <span style=\"display: block; margin-top: 3px;\">Z-AGENCY s.r.o.</span>\n                    <span style=\"display: block;\">Karlova 38, 61400 Brno</span>\n                    <span style=\"display: block;\">‚òéÔ∏è +420 542 211 935</span>\n                    <span style=\"display: block;\">‚úâÔ∏è <a href=\"mailto:info@z-agency.cz\" style=\"color: #0073b1; text-decoration: none;\">info@z-agency.cz</a></span>\n                    <span style=\"display: block;\">üåê <a href=\"https://www.z-agency.cz\" style=\"color: #0073b1; text-decoration: none;\">z-agency.cz</a> |\n                    <a href=\"https://www.terrahunt.cz\" style=\"color: #0073b1; text-decoration: none;\">terrahunt.cz</a></span>\n                </td>\n            </tr>\n        </table>\n        </div>\n\n</body>\n</html>",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        768,
        400
      ],
      "id": "4fcb83d3-0236-4771-8243-6fa0cd35e642",
      "name": "Thank You and Good Bye",
      "webhookId": "15c5f7bf-0957-4e27-846e-b8f595eef4b3",
      "credentials": {
        "gmailOAuth2": {
          "id": "cUMqdo7XCF6noXLb",
          "name": "Gmail-info@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9c72fdd1-c851-435e-b452-2c1de68510bb",
              "name": "jmeno_prijmeni",
              "value": "={{ $json['Jm√©no a p≈ô√≠jmen√≠'] }}",
              "type": "string"
            },
            {
              "id": "7cff9997-0db6-45d6-848c-00aea2265f9e",
              "name": "email",
              "value": "={{ $json['E-mailov√° adresa'] }}",
              "type": "string"
            },
            {
              "id": "900da024-7079-4e04-8da5-9a058902ebbe",
              "name": "trvale_bydliste",
              "value": "={{ $json['Adresa trval√©ho bydli≈°tƒõ (co m√°≈° v obƒçance)'] }}",
              "type": "string"
            },
            {
              "id": "892038af-13bd-4162-8ddf-125f26058484",
              "name": "misto_pobytu",
              "value": "={{ $json['Adresa m√≠sta, kde aktu√°lnƒõ ≈æije≈°'] }}",
              "type": "string"
            },
            {
              "id": "ae93a8d0-50b9-4b95-889c-c67762e2a655",
              "name": "telefon",
              "value": "={{ $json['Telefonn√≠ ƒç√≠slo, kter√© aktivnƒõ pou≈æ√≠v√°≈°'] }}",
              "type": "string"
            },
            {
              "id": "43df036b-e651-4351-b317-58a110d438b0",
              "name": "cislo_uctu",
              "value": "={{ $json['ƒå√≠slo √∫ƒçtu, na kter√Ω ti budeme pos√≠lat pen√≠ze'] }}",
              "type": "string"
            },
            {
              "id": "d42fc4a0-4da0-432e-b0a7-760a88396feb",
              "name": "rodne_jmeno",
              "value": "={{ $json['Rodn√© p≈ô√≠jmen√≠ (pokud m√°≈° teƒè jin√©)'] }}",
              "type": "string"
            },
            {
              "id": "29a49084-4280-401f-8842-10567e334787",
              "name": "misto_narozeni",
              "value": "={{ $json['M√≠sto narozen√≠ (mƒõsto nebo obec)'] }}",
              "type": "string"
            },
            {
              "id": "5eecc033-4fd4-4035-be76-9bc9685eae17",
              "name": "datum_narozeni",
              "value": "={{ $json['Datum narozen√≠'] }}",
              "type": "string"
            },
            {
              "id": "5c917466-9f5a-4ad4-a962-7a09bb55447c",
              "name": "rodne_cislo",
              "value": "={{ $json['Rodn√© ƒç√≠slo'] }}",
              "type": "string"
            },
            {
              "id": "546c340c-ad6e-411a-ba80-a10626257054",
              "name": "zdravotni_pojistovna",
              "value": "={{ $json['Zdravotn√≠ poji≈°≈•ovna (napi≈° n√°zev, ƒç√≠slo a jestli je ƒçesk√° nebo z jin√© zemƒõ)'] }}",
              "type": "string"
            },
            {
              "id": "3088e75a-392b-4c93-801f-10542c25a8f7",
              "name": "cislo_dokladu",
              "value": "={{ $json['ƒå√≠slo pasu nebo obƒçansk√Ω pr≈Økaz (pokud nem√°≈° ƒçeskou n√°rodnost)'] }}",
              "type": "string"
            },
            {
              "id": "99f25967-7f30-4f9a-b6bd-083ab274f074",
              "name": "ico",
              "value": "={{ $json['IƒåO '] }}",
              "type": "string"
            },
            {
              "id": "d8ef0264-0810-4dfd-a914-402da0667130",
              "name": "dic",
              "value": "={{ $json['DIƒå '] }}",
              "type": "string"
            },
            {
              "id": "6bbc91c1-a18e-4d1b-a5c3-0c4ef6712919",
              "name": "obchodni_nazev",
              "value": "={{ $json['N√°zev firmy nebo jm√©no ≈æivnostn√≠ka'] }}",
              "type": "string"
            },
            {
              "id": "a9f1651b-69b6-4ae1-bc49-6ea3e264675e",
              "name": "sidlo_podnikani",
              "value": "={{ $json['S√≠dlo firmy/≈æivnostn√≠ka'] }}",
              "type": "string"
            },
            {
              "id": "9df217e3-53d6-4440-8658-7bb75c160ac8",
              "name": "=informace_1",
              "value": "={{ $json['Je nƒõco co bychom mƒõli vƒõdƒõt, nebo ƒç√≠m se chce≈° pochlubit? (vlastnosti, dovednosti, √∫spƒõchy)'] }}",
              "type": "string"
            },
            {
              "id": "479720b0-6964-4e1d-8c9d-ee6fbea85fed",
              "name": "forma_spoluprace",
              "value": "={{ $json['Forma spolupr√°ce'] ? [$json['Forma spolupr√°ce']] : [] }}",
              "type": "string"
            },
            {
              "id": "1f5bc5c7-a47f-4484-86f2-dfcee48b47ce",
              "name": "sleva_dane",
              "value": "={{ $json['Bude≈° cht√≠t u n√°s podepsat r≈Ø≈æov√Ω formul√°≈ô (sleva na dani - poplatn√≠k, student..)?'] }}",
              "type": "string"
            },
            {
              "id": "0c551e5d-3738-4fd5-9c7b-cd2d4929fef5",
              "name": "status_instruktora",
              "value": "={{ $json['Vid√≠m se v n√°sleduj√≠c√≠m t√Ωmu instruktor≈Ø:'] }}",
              "type": "string"
            },
            {
              "id": "49bb4782-4e94-4f94-bb3e-717ed77ab052",
              "name": "dalsi_specializace",
              "value": "={{ $json['Jak√© m√°≈° dal≈°√≠ dovednosti a kvalifikace? (za≈°krtni, co plat√≠)'] }}",
              "type": "string"
            },
            {
              "id": "7d97d7f8-20f4-4186-82fc-22f51836062b",
              "name": "ridic",
              "value": "={{ $('Google Sheets Trigger').item.json['M√°≈° ≈ôidiƒç√°k a pravidelnƒõ ≈ô√≠d√≠≈°?'] }}",
              "type": "string"
            },
            {
              "id": "dbe1b009-575a-47bd-8720-0d9b23a061ae",
              "name": "vlastni_automobil",
              "value": "={{ $('Google Sheets Trigger').item.json['M√°≈° vlastn√≠ auto, kter√© m≈Ø≈æe≈° vz√≠t na akci?'] }}",
              "type": "string"
            },
            {
              "id": "e0a32ca2-1913-4e89-8a72-fc11b4463a10",
              "name": "jazykova_vybava",
              "value": "={{ $json[\"Jak√Ωmi jazyky mluv√≠≈°?\"] }}",
              "type": "string"
            },
            {
              "id": "c55ea6fc-bca1-4352-babb-732ec3e21fd8",
              "name": "level_english",
              "value": "={{ $json[\"Jak jsi dobr√Ω v angliƒçtinƒõ?\"] }}",
              "type": "string"
            },
            {
              "id": "fb051023-2716-4c26-9965-d19ea0dd3925",
              "name": "poznamky_kvalifikace",
              "value": "={{ $json['Jak√© m√°≈° zku≈°enosti s veden√≠m reflex√≠?'] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        624,
        -32
      ],
      "id": "d5740ebe-0c9a-44ed-bd98-6359e8e3a6da",
      "name": "Tabidoo Mapping"
    },
    {
      "parameters": {
        "jsCode": "const smartSplit = (text) => {\n  if (!text) return [];\n  if (typeof text !== 'string') return [text];\n  const result = [];\n  let current = \"\";\n  let depth = 0;\n  for (let i = 0; i < text.length; i++) {\n    const char = text[i];\n    if (char === '(') depth++;\n    if (char === ')') depth--;\n    if (char === ',' && depth === 0) {\n      result.push(current.trim());\n      current = \"\";\n    } else {\n      current += char;\n    }\n  }\n  if (current) result.push(current.trim());\n  return result.filter(r => r !== \"\");\n};\n\nconst mapJazyk = (value) => {\n  if (typeof value !== 'string') return value;\n  const lower = value.toLowerCase();\n  if (lower.includes(\"anglick\")) return \"EN\";\n  if (lower.includes(\"nƒõmeck\")) return \"DE\";\n  if (lower.includes(\"slovensk\")) return \"SK\";\n  return value;\n};\n\nconst mapRidic = (value) => {\n  if (typeof value !== 'string') return value;\n  const lower = value.toLowerCase();\n  if (lower.includes(\"osobn√≠ automobil\")) return \"Osob√°k\";\n  if (lower.includes(\"malou dod√°vku\")) return \"Mal√° dod√°vka\";\n  if (lower.includes(\"velkou nalo≈æenou\") || lower.includes(\"velkou dod√°vku\")) return \"Velk√° dod√°vka\";\n  return value;\n};\n\nconst mapAuto = (value) => {\n  if (typeof value !== 'string') return value;\n  const lower = value.toLowerCase();\n  if (lower.includes(\"mal√° dod√°vka\") || lower.includes(\"mala dodavka\")) return \"Dod√°vka typu VW\";\n  if (lower.includes(\"velk√° dod√°vka\") || lower.includes(\"velka dodavka\")) return \"Dod√°vka typu Transit\";\n  if (lower.includes(\"osobn√≠ automobil velk√Ω\") || lower.includes(\"combi\") || lower.includes(\"galaxy\")) return \"Osobn√≠ velk√© typu combi\";\n  if (lower.includes(\"osobn√≠ automobil mal√Ω\") || lower.includes(\"fabia\") || lower.includes(\"hatchback\")) return \"Osobn√≠ mal√©\";\n  return value;\n};\n\nconst toArray = (value, mapFunction) => {\n  if (value === undefined || value === null || value === '') return [];\n  let val = value;\n  if (Array.isArray(val)) {\n    return mapFunction ? val.map(mapFunction) : val;\n  }\n  if (typeof val === 'string' && val.startsWith('[')) {\n    try { val = JSON.parse(val); } catch(e) {}\n  }\n  if (typeof val === 'string') {\n    val = smartSplit(val);\n  }\n  if (!Array.isArray(val)) val = [val];\n  if (mapFunction) {\n    val = val.map(mapFunction);\n  }\n  return val.filter(item => item !== null && item !== undefined && item !== '');\n};\n\nreturn $input.all().map(item => {\n  const newItem = { ...item.json };\n\n  if (newItem.forma_spoluprace !== undefined) {\n    newItem.forma_spoluprace = toArray(newItem.forma_spoluprace);\n  }\n\n  if (newItem.sleva_dane) {\n    let value = newItem.sleva_dane;\n    if (typeof value === 'string' && value.startsWith('[')) {\n      try { value = JSON.parse(value); } \n      catch (e) { value = value.replace(/[\\[\\]\"]/g, '').trim(); }\n    }\n    if (Array.isArray(value)) value = value.length > 0 ? value[0] : null;\n    newItem.sleva_dane = (value !== null && value !== undefined) ? String(value).trim() : null;\n  }\n\n  if (newItem.status_instruktora) {\n    let value = newItem.status_instruktora;\n    if (typeof value === 'string' && value.startsWith('[')) {\n      try { value = JSON.parse(value); } \n      catch (e) { value = value.replace(/[\\[\\]\"]/g, '').trim(); }\n    }\n    if (Array.isArray(value)) value = value.length > 0 ? value[0] : \"\";\n    let stringValue = (value !== null && value !== undefined) ? String(value).trim() : \"\";\n    const upperVal = stringValue.toUpperCase();\n    if (upperVal.includes('CORE')) newItem.status_instruktora = 'CORE';\n    else if (upperVal.includes('SUPPORT')) newItem.status_instruktora = 'SUPPORT';\n    else if (upperVal.includes('Z√ÅLOHA') || upperVal.includes('ZALOHA')) newItem.status_instruktora = 'Z√ÅLOHA';\n    else if (upperVal.includes('NEAKTIVN√ç') || upperVal.includes('NEAKTIVNI')) newItem.status_instruktora = 'NEAKTIVN√ç';\n    else newItem.status_instruktora = null;\n  }\n\n  if (newItem.dalsi_specializace !== undefined) {\n    newItem.dalsi_specializace = toArray(newItem.dalsi_specializace);\n  }\n\n  if (newItem.ridic !== undefined) {\n    newItem.ridic = toArray(newItem.ridic, mapRidic);\n  }\n\n  if (newItem.vlastni_automobil !== undefined) {\n    newItem.vlastni_automobil = toArray(newItem.vlastni_automobil, mapAuto);\n  }\n\n  if (newItem.jazykova_vybava !== undefined) {\n    newItem.jazykova_vybava = toArray(newItem.jazykova_vybava, mapJazyk);\n  }\n\n  if (newItem.level_english !== undefined) {\n    newItem.level_english = toArray(newItem.level_english);\n  }\n\n  // --- DATUM NAROZEN√ç (konverze z Excel serial nebo ƒçesk√©ho form√°tu) ---\n  if (newItem.datum_narozeni) {\n    let dateVal = newItem.datum_narozeni;\n    \n    // Pokud je to ƒç√≠slo (Excel serial date)\n    if (!isNaN(dateVal) && Number(dateVal) > 0) {\n      const excelSerial = Number(dateVal);\n      const date = new Date((excelSerial - 25569) * 86400 * 1000);\n      const year = date.getUTCFullYear();\n      const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n      const day = String(date.getUTCDate()).padStart(2, '0');\n      newItem.datum_narozeni = year + '-' + month + '-' + day;\n    }\n    // Pokud je to ƒçesk√Ω form√°t (dd.mm.yyyy)\n    else if (typeof dateVal === 'string' && dateVal.includes('.')) {\n      const parts = dateVal.split('.');\n      if (parts.length === 3) {\n        const day = parts[0].trim().padStart(2, '0');\n        const month = parts[1].trim().padStart(2, '0');\n        const year = parts[2].trim();\n        newItem.datum_narozeni = year + '-' + month + '-' + day;\n      }\n    }\n    // Pokud u≈æ je ve spr√°vn√©m form√°tu, nech ho\n  }\n\n  // Pole informace_1 a poznamky_kvalifikace z≈Østanou oddƒõlen√°\n\n  return {\n    json: newItem,\n    pairedItem: item.pairedItem\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        816,
        -32
      ],
      "id": "844e321e-d642-4e91-b66c-136c7309257d",
      "name": "Multichoice and Dropdown"
    },
    {
      "parameters": {
        "content": "## SENSITIVE!!!\n**CODE NODE necessery to update with every new dropdown or multichoice",
        "height": 128,
        "width": 688,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        560,
        -352
      ],
      "typeVersion": 1,
      "id": "740a64f1-31ab-4fe0-8150-4e884a8d71ce",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "## Error - Check Manually",
        "height": 304,
        "width": 304
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1712,
        -112
      ],
      "typeVersion": 1,
      "id": "44da311c-3080-4508-bab7-1f3be8ad8a13",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "sendTo": "info@z-agency.cz",
        "subject": "=CHYBA p≈ôi vkl√°d√°n√≠ instruktora {{ $('HTTP Request - POST data').item.json.data.fields.jmeno_prijmeni }} do Tabidoo",
        "message": "=Automatizace pro instruktora {{ $('HTTP Request - POST data').item.json.data.fields.jmeno_prijmeni }} neprobƒõhla z d≈Øvodu chby, uprav √∫daje ruƒçnƒõ.",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        1776,
        -48
      ],
      "id": "a82fb922-3b0f-4683-9ae5-459444505e89",
      "name": "Send Error Message",
      "webhookId": "7a5b84e6-f0c1-4403-8365-3f8271704c4e",
      "credentials": {
        "gmailOAuth2": {
          "id": "cUMqdo7XCF6noXLb",
          "name": "Gmail-info@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "891bca1a-0ca8-418d-b52d-4fb102bff417",
              "leftValue": "={{ $json.error }}",
              "rightValue": "={{ $json.error }}",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1376,
        -32
      ],
      "id": "9e976f41-4bc2-4421-9edf-2f04dd7a4c7f",
      "name": "If - Is There Any Error?"
    },
    {
      "parameters": {
        "sendTo": "info@zetkaci.cz",
        "subject": "=√öspe≈°n√© vlo≈æen√≠ instruktora {{ $json.data.fields.jmeno_prijmeni }} do Tabidoo",
        "message": "={{ $json.data.fields.jmeno_prijmeni  }} byl vlo≈æen do tabulky nov√Ωch instruktor≈Ø v Tabidoo.",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        1808,
        448
      ],
      "id": "f6f2e95b-fc2c-416a-9b87-b2a02399d10a",
      "name": "Send a message1",
      "webhookId": "c65f04b2-37e7-4414-a4ea-9c35ebd639cb",
      "credentials": {
        "gmailOAuth2": {
          "id": "cUMqdo7XCF6noXLb",
          "name": "Gmail-info@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## OK - Confirmation",
        "height": 304,
        "width": 304
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1712,
        352
      ],
      "typeVersion": 1,
      "id": "2d05a9ea-505d-4c34-8657-913e820528af",
      "name": "Sticky Note8"
    }
  ],
  "settings": {
    "executionOrder": "v1",
    "errorWorkflow": "zVAjJgKV17IWzFP7",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false,
    "timezone": "Europe/Prague"
  },
  "shared": [
    {
      "updatedAt": "2025-12-07T11:58:40.494Z",
      "createdAt": "2025-12-07T11:58:40.494Z",
      "role": "workflow:owner",
      "workflowId": "PVID8xP0tbMMrWYz",
      "projectId": "XqkS7oX8lMj4YbIK"
    }
  ],
  "staticData": {
    "node:Google Sheets Trigger": {
      "documentId": "15LqLq43bCdy01h5VaTV2OMxq2Lcl69PG73DwbP0CdI4",
      "sheetId": 1005795739,
      "lastIndexChecked": 16,
      "lastRevision": 23,
      "lastRevisionLink": "https://docs.google.com/spreadsheets/export?id=15LqLq43bCdy01h5VaTV2OMxq2Lcl69PG73DwbP0CdI4&revision=23&exportFormat=xlsx"
    }
  },
  "tags": [],
  "triggerCount": 2,
  "updatedAt": "2025-12-16T14:35:15.707Z",
  "versionId": "6085b590-6c4a-4156-aebc-df36f77ada6c"
}