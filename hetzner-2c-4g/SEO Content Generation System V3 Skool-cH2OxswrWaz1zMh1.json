{
  "active": false,
  "activeVersion": null,
  "activeVersionId": null,
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "GetRecord",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord": {
      "main": [
        [
          {
            "node": "IfIncomplete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfIncomplete": {
      "main": [
        [
          {
            "node": "ICP_Research",
            "type": "main",
            "index": 0
          },
          {
            "node": "UpdateStatus",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Perplexity": {
      "ai_tool": [
        [
          {
            "node": "ICP_Research",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ICP_Research": {
      "main": [
        [
          {
            "node": "UpdateRecord",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "ICP_Research",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Webhook1": {
      "main": [
        [
          {
            "node": "GetRecord1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord1": {
      "main": [
        [
          {
            "node": "IfIncomplete1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfIncomplete1": {
      "main": [
        [
          {
            "node": "UpdateKWStatus",
            "type": "main",
            "index": 0
          },
          {
            "node": "SetURL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetKeywords": {
      "main": [
        [
          {
            "node": "SplitKW",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRelated": {
      "main": [
        [
          {
            "node": "SplitRelated",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetAutocomplete": {
      "main": [
        [
          {
            "node": "SplitAutocomplete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetSuggestions": {
      "main": [
        [
          {
            "node": "SplitSuggestions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetKeywordIdeas": {
      "main": [
        [
          {
            "node": "SplitKWIdeas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GenerateSubtopics": {
      "main": [
        [
          {
            "node": "SplitSubtopics",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SplitRelated": {
      "main": [
        [
          {
            "node": "SetRelated",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SplitSuggestions": {
      "main": [
        [
          {
            "node": "SetSuggestions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SplitKWIdeas": {
      "main": [
        [
          {
            "node": "SetKWIdeas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SplitAutocomplete": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SplitSubtopics": {
      "main": [
        [
          {
            "node": "SetSubtopic",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SplitKW": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SetSeedKW": {
      "main": [
        [
          {
            "node": "GetRelated",
            "type": "main",
            "index": 0
          },
          {
            "node": "GetSuggestions",
            "type": "main",
            "index": 0
          },
          {
            "node": "GetKeywordIdeas",
            "type": "main",
            "index": 0
          },
          {
            "node": "GetAutocomplete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "GetKeywordData",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SetSubtopic": {
      "main": [
        [
          {
            "node": "AggregateST",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetKeywordData": {
      "main": [
        [
          {
            "node": "SplitAgain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SplitAgain": {
      "main": [
        [
          {
            "node": "SetAutocomplete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SetURL": {
      "main": [
        [
          {
            "node": "GetKeywords",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SetAutocomplete": {
      "main": [
        [
          {
            "node": "UpdateKeywords4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "UpdateKeywords",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook2": {
      "main": [
        [
          {
            "node": "GetRecord2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord2": {
      "main": [
        [
          {
            "node": "IfIncomplete2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfIncomplete2": {
      "main": [
        [
          {
            "node": "UpdateLTStatus",
            "type": "main",
            "index": 0
          },
          {
            "node": "SetSeedKW",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SetKWIdeas": {
      "main": [
        [
          {
            "node": "UpdateKeywords4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SetSuggestions": {
      "main": [
        [
          {
            "node": "UpdateKeywords4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SetRelated": {
      "main": [
        [
          {
            "node": "UpdateKeywords4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UpdateKeywords": {
      "main": [
        [
          {
            "node": "UpdateKeywords1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook3": {
      "main": [
        [
          {
            "node": "GetRecord3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord3": {
      "main": [
        [
          {
            "node": "IfIncomplete3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfIncomplete3": {
      "main": [
        [
          {
            "node": "UpdateSTStatus",
            "type": "main",
            "index": 0
          },
          {
            "node": "GenerateSubtopics",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AggregateST": {
      "main": [
        [
          {
            "node": "UpdateKeywords3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook4": {
      "main": [
        [
          {
            "node": "GetRecord4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord4": {
      "main": [
        [
          {
            "node": "IfReady",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfReady": {
      "main": [
        [
          {
            "node": "GetBrand1",
            "type": "main",
            "index": 0
          },
          {
            "node": "UpdateArticleStatus3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model in Perplexity": {
      "ai_tool": [
        [
          {
            "node": "Research Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Research Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "SetInputs": {
      "main": [
        [
          {
            "node": "Content Planner",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gpt-4o": {
      "ai_languageModel": [
        [
          {
            "node": "Research Agent",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Content Planner": {
      "main": [
        [
          {
            "node": "Research Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Content Planner",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "SplitOutSections": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Research Agent": {
      "main": [
        [
          {
            "node": "UpdateStatus2",
            "type": "main",
            "index": 0
          },
          {
            "node": "UpdateBlog1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser3": {
      "ai_outputParser": [
        [
          {
            "node": "Content Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Content Agent": {
      "main": [
        [
          {
            "node": "ArticleUpdated",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "LastItem",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "GetLatestArticle",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UpdateStatus1": {
      "main": [
        [
          {
            "node": "Schema Markup Generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UpdateBlog": {
      "main": [
        [
          {
            "node": "DeleteWorkflowData",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LastItem": {
      "main": [
        [
          {
            "node": "E-E-A-T Enhancement Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-2.5-pro": {
      "ai_languageModel": [
        [
          {
            "node": "Content Planner",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "GetLatestArticle": {
      "main": [
        [
          {
            "node": "Content Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ArticleUpdated": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File": {
      "main": [
        [
          {
            "node": "CloudConvert1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload Img to ImgBB for URL": {
      "main": [
        [
          {
            "node": "ReSmush.it Image Optimisation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ReSmush.it Image Optimisation": {
      "main": [
        [
          {
            "node": "Store Optimised Image ImgBB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "NanoBanana",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser4": {
      "ai_outputParser": [
        [
          {
            "node": "Image Generation",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "image_generation": {
      "ai_tool": [
        [
          {
            "node": "Image Generation",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Image Generation": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "NanoBanana": {
      "main": [
        [
          {
            "node": "ExtractBase64Str",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ExtractBase64Str": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-2.5-Flash": {
      "ai_languageModel": [
        [
          {
            "node": "ICP_Research",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "gpt-4o": {
      "ai_languageModel": [
        [
          {
            "node": "Content Agent",
            "type": "ai_languageModel",
            "index": 1
          },
          {
            "node": "Summary",
            "type": "ai_languageModel",
            "index": 1
          },
          {
            "node": "E-E-A-T Enhancement Agent",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "UpdateBlog1": {
      "main": [
        [
          {
            "node": "Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook5": {
      "main": [
        [
          {
            "node": "GetRecord6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord6": {
      "main": [
        [
          {
            "node": "IfReady1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfReady1": {
      "main": [
        [
          {
            "node": "DeleteWorkflowData2",
            "type": "main",
            "index": 0
          },
          {
            "node": "GetBrand",
            "type": "main",
            "index": 0
          },
          {
            "node": "UpdateArticleStatus1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SetInputs1": {
      "main": [
        [
          {
            "node": "SetJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Per Day": {
      "main": [
        [
          {
            "node": "GetArticles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetArticles": {
      "main": [
        [
          {
            "node": "Today?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Today?": {
      "main": [
        [
          {
            "node": "One at a Time",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SetJSON": {
      "main": [
        [
          {
            "node": "JSON Conversion",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PrepareArticle": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "One at a Time": {
      "main": [
        [],
        [
          {
            "node": "UpdateArticleStatus",
            "type": "main",
            "index": 0
          },
          {
            "node": "PrepareArticle",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "FeaturedImage",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Convert to HTML1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ErrorMessage",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to HTML": {
      "main": [
        [
          {
            "node": "WrapImages",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WrapImages": {
      "main": [
        [
          {
            "node": "PostToWordpress",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FeaturedImage": {
      "main": [
        [
          {
            "node": "UploadImage",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UploadImage": {
      "main": [
        [
          {
            "node": "Convert to HTML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UploadedDate": {
      "main": [
        [
          {
            "node": "One at a Time",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "BlogDetails": {
      "main": [
        [
          {
            "node": "Markdown",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown": {
      "main": [
        [
          {
            "node": "IfUpdateDate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord7": {
      "main": [
        [
          {
            "node": "IfReady2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfReady2": {
      "main": [
        [
          {
            "node": "UpdateLinkStatus",
            "type": "main",
            "index": 0
          },
          {
            "node": "Generate RAG query",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook6": {
      "main": [
        [
          {
            "node": "GetRecord7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI2": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Postgres PGVector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Postgres PGVector Store1",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "LangChain Code": {
      "main": [
        [
          {
            "node": "Postgres PGVector Store1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "NewArticleAdded": {
      "main": [
        [
          {
            "node": "One at a time",
            "type": "main",
            "index": 0
          },
          {
            "node": "New Article Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres PGVector Store1": {
      "main": [
        [
          {
            "node": "One at a time",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "4.1-mini": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store2",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Postgres PGVector Store2": {
      "main": [
        [
          {
            "node": "Sort by relevance & upload_date",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Remove Duplicates": {
      "main": [
        [
          {
            "node": "Limit to 10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Generate RAG query": {
      "main": [
        [
          {
            "node": "Split Out Queries",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser5": {
      "ai_outputParser": [
        [
          {
            "node": "Generate RAG query",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Sort by relevance & upload_date": {
      "main": [
        [
          {
            "node": "Remove Duplicates",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Queries": {
      "main": [
        [
          {
            "node": "Postgres PGVector Store2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit to 10": {
      "main": [
        [
          {
            "node": "Aggregate2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "One at a time": {
      "main": [
        [],
        [
          {
            "node": "LangChain Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-2.5-Pro": {
      "ai_languageModel": [
        [
          {
            "node": "Suggest Anchor Text",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser6": {
      "ai_outputParser": [
        [
          {
            "node": "Suggest Anchor Text",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate2": {
      "main": [
        [
          {
            "node": "Suggest Anchor Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Suggest Anchor Text": {
      "main": [
        [
          {
            "node": "UpdateLinking",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook7": {
      "main": [
        [
          {
            "node": "GetRecord8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord8": {
      "main": [
        [
          {
            "node": "IfReady3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfReady3": {
      "main": [
        [
          {
            "node": "UpdateLinkStatus1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Internal Link Suggestions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Internal Links": {
      "main": [
        [
          {
            "node": "InputSwitch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Update Internal Links",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser7": {
      "ai_outputParser": [
        [
          {
            "node": "StructureLinks",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "StructureLinks": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetBrand": {
      "main": [
        [
          {
            "node": "SetInputs1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetBrand1": {
      "main": [
        [
          {
            "node": "SetInputs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get published articles": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get published articles1": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "BlogDetails1": {
      "main": [
        [
          {
            "node": "Markdown1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown1": {
      "main": [
        [
          {
            "node": "IfUpdateDate1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Per Day Indexing": {
      "main": [
        [
          {
            "node": "Get published articles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to HTML1": {
      "main": [
        [
          {
            "node": "Format /n and Tables",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format /n and Tables": {
      "main": [
        [
          {
            "node": "Set Site URL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PostToWordpress": {
      "main": [
        [
          {
            "node": "UploadedDate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser8": {
      "ai_outputParser": [
        [
          {
            "node": "Summary",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Summary": {
      "main": [
        [
          {
            "node": "Markdown2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PostBlog": {
      "main": [
        [
          {
            "node": "UploadedDate1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Site URL": {
      "main": [
        [
          {
            "node": "PostBlog",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UploadedDate1": {
      "main": [
        [
          {
            "node": "One at a Time",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4.1": {
      "ai_languageModel": [
        [
          {
            "node": "LangChain Code",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4.1-mini": {
      "ai_languageModel": [
        [
          {
            "node": "Generate RAG query",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-2.5-Pro1": {
      "ai_languageModel": [
        [
          {
            "node": "StructureLinks",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-Flash-2.5": {
      "ai_languageModel": [
        [
          {
            "node": "Research Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "JSON Conversion",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "JSON Conversion": {
      "main": [
        [
          {
            "node": "SplitOutSections",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-2.5-Flash1": {
      "ai_languageModel": [
        [
          {
            "node": "JSON Conversion",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "set_fields": {
      "main": [
        [
          {
            "node": "Prepare_Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown2": {
      "main": [
        [
          {
            "node": "set_fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare_Request": {
      "main": [
        [
          {
            "node": "CreateGoogleDoc",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CreateGoogleDoc": {
      "main": [
        [
          {
            "node": "UpdateStatus1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-2.5-pro2": {
      "ai_languageModel": [
        [
          {
            "node": "Image Generation",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "gpt-4o1": {
      "ai_languageModel": [
        [
          {
            "node": "Image Generation",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Webhook8": {
      "main": [
        [
          {
            "node": "GetRecord9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord9": {
      "main": [
        [
          {
            "node": "IfReady4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfReady4": {
      "main": [
        [
          {
            "node": "GetBrand2",
            "type": "main",
            "index": 0
          },
          {
            "node": "UpdateImageStatus",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetBrand2": {
      "main": [
        [
          {
            "node": "Image Generation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "UpdateBlog3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook9": {
      "main": [
        [
          {
            "node": "GetRecord11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-2.5-Pro2": {
      "ai_languageModel": [
        [
          {
            "node": "Embed Image Links",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord11": {
      "main": [
        [
          {
            "node": "IfReady6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfReady6": {
      "main": [
        [
          {
            "node": "IfSelectedImages",
            "type": "main",
            "index": 0
          },
          {
            "node": "UpdateEmbedStatus",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser10": {
      "ai_outputParser": [
        [
          {
            "node": "Embed Image Links",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Embed Image Links": {
      "main": [
        [
          {
            "node": "ReplaceMarkdown1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Selected Images": {
      "main": [
        [
          {
            "node": "Split Urls",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfSelectedImages": {
      "main": [
        [
          {
            "node": "Selected Images",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Auto Images",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Auto Images": {
      "main": [
        [
          {
            "node": "Split Urls",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Image": {
      "main": [
        [
          {
            "node": "Get Image URL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Urls": {
      "main": [
        [
          {
            "node": "Download Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Image Optimisation": {
      "main": [
        [
          {
            "node": "Store Optimised ImgBB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Image URL": {
      "main": [
        [
          {
            "node": "Image Optimisation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Store Optimised ImgBB": {
      "main": [
        [
          {
            "node": "Image Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combine Image Data": {
      "main": [
        [
          {
            "node": "Embed Image Links",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Image Fields": {
      "main": [
        [
          {
            "node": "Combine Image Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate RAG query1": {
      "main": [
        [
          {
            "node": "Split Out Queries1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser9": {
      "ai_outputParser": [
        [
          {
            "node": "Generate RAG query1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4.1-mini1": {
      "ai_languageModel": [
        [
          {
            "node": "Generate RAG query1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "New Article Fields": {
      "main": [
        [
          {
            "node": "Generate RAG query1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Queries1": {
      "main": [
        [
          {
            "node": "Postgres PGVector Store3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres PGVector Store3": {
      "main": [
        [
          {
            "node": "Older Than 14 Days",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI3": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store3",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Reranker Cohere": {
      "ai_reranker": [
        [
          {
            "node": "Postgres PGVector Store3",
            "type": "ai_reranker",
            "index": 0
          }
        ]
      ]
    },
    "Remove Duplicates2": {
      "main": [
        [
          {
            "node": "Aggregate3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Older Than 14 Days": {
      "main": [
        [
          {
            "node": "Remove Duplicates2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Reranker Cohere1": {
      "ai_reranker": [
        [
          {
            "node": "Postgres PGVector Store2",
            "type": "ai_reranker",
            "index": 0
          }
        ]
      ]
    },
    "Suggest Anchor Text1": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-2.5-Pro3": {
      "ai_languageModel": [
        [
          {
            "node": "Suggest Anchor Text1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser11": {
      "ai_outputParser": [
        [
          {
            "node": "Suggest Anchor Text1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate3": {
      "main": [
        [
          {
            "node": "Suggest Anchor Text1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AddToIndex": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfUpdated24HRS": {
      "main": [
        [
          {
            "node": "SearchRecords",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AddToIndex",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "BlogDetails",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AddToIndex2": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DetectChanges": {
      "main": [
        [
          {
            "node": "AddToIndex2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SearchRecords": {
      "main": [
        [
          {
            "node": "DetectChanges",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [],
        [
          {
            "node": "BlogDetails1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfUpdated24HRS1": {
      "main": [
        [
          {
            "node": "SearchRecords1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AddToIndex1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SearchRecords1": {
      "main": [
        [
          {
            "node": "DetectChanges1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DetectChanges1": {
      "main": [
        [
          {
            "node": "AddToIndex3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AddToIndex3": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AddToIndex1": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "GroupByArticle",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GroupByArticle": {
      "main": [
        [
          {
            "node": "UpdateLinking1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook10": {
      "main": [
        [
          {
            "node": "GetRecord10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetRecord10": {
      "main": [
        [
          {
            "node": "IfReady5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfReady5": {
      "main": [
        [
          {
            "node": "Internal Link Suggestions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Internal Link Suggestions": {
      "main": [
        [
          {
            "node": "StructureLinks",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "InputSwitch": {
      "main": [
        [
          {
            "node": "ReplaceMarkdown",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ReplaceMarkdown2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Per Day1": {
      "main": [
        [
          {
            "node": "GetArticles1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetArticles1": {
      "main": [
        [
          {
            "node": "One at a Time1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "One at a Time1": {
      "main": [
        [],
        [
          {
            "node": "UpdateArticleStatus2",
            "type": "main",
            "index": 0
          },
          {
            "node": "PrepareUpdates",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Convert to HTML2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Convert to HTML3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ErrorMessage1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to HTML2": {
      "main": [
        [
          {
            "node": "WrapImages1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WrapImages1": {
      "main": [
        [
          {
            "node": "UpdateWordpressPost",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UploadedDate2": {
      "main": [
        [
          {
            "node": "One at a Time1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format /n and Tables1": {
      "main": [
        [
          {
            "node": "Set Site URL1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to HTML3": {
      "main": [
        [
          {
            "node": "Format /n and Tables1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Site URL1": {
      "main": [
        [
          {
            "node": "UpdateWebflowPost1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PrepareUpdates": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UpdateWordpressPost": {
      "main": [
        [
          {
            "node": "UploadedDate2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UpdateWebflowPost1": {
      "main": [
        [
          {
            "node": "UploadedDate4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UploadedDate4": {
      "main": [
        [
          {
            "node": "One at a Time1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfUpdateDate": {
      "main": [
        [
          {
            "node": "IfUpdated24HRS",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AddToIndex",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IfUpdateDate1": {
      "main": [
        [
          {
            "node": "IfUpdated24HRS1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AddToIndex1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "claude-4.5-sonnet": {
      "ai_languageModel": [
        [
          {
            "node": "Content Planner",
            "type": "ai_languageModel",
            "index": 1
          },
          {
            "node": "Structured Output Parser1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Claude-3.7-Sonnet": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser3",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "E-E-A-T Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "E-E-A-T Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "E-E-A-T Enhancement Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "E-E-A-T Enhancement Agent": {
      "main": [
        [
          {
            "node": "Summary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini-3-Pro": {
      "ai_languageModel": [
        [
          {
            "node": "Content Agent",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Summary",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "E-E-A-T Enhancement Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Schema Markup Generator": {
      "main": [
        [
          {
            "node": "UpdateBlog",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CloudConvert1": {
      "main": [
        [
          {
            "node": "Upload Img to ImgBB for URL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "2. NanoBanana": {
      "main": [
        [
          {
            "node": "ExtractBase64Str2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1. GPT-5-Image": {
      "main": [
        [
          {
            "node": "ExtractBase64Str2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "3. Gemini 3 Pro": {
      "main": [
        [
          {
            "node": "ExtractBase64Str2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ExtractBase64Str2": {
      "main": [
        [
          {
            "node": "Convert to File1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload Img to ImgBB for URL1": {
      "main": [
        [
          {
            "node": "ReSmush.it High Qual",
            "type": "main",
            "index": 0
          },
          {
            "node": "ReSmush.it Med Qual",
            "type": "main",
            "index": 0
          },
          {
            "node": "ReSmush.it Low Qual",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking Execute workflow": {
      "main": [
        [
          {
            "node": "1. GPT-5-Image",
            "type": "main",
            "index": 0
          },
          {
            "node": "2. NanoBanana",
            "type": "main",
            "index": 0
          },
          {
            "node": "3. Gemini 3 Pro",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File1": {
      "main": [
        [
          {
            "node": "CloudConvert",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CloudConvert": {
      "main": [
        [
          {
            "node": "Upload Img to ImgBB for URL1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare document": {
      "main": [
        [
          {
            "node": "Longer than 1000 chars",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Longer than 1000 chars": {
      "main": [
        [
          {
            "node": "Prepare variables",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Output single chunk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Output single chunk": {
      "main": [
        [
          {
            "node": "Postgres PGVector Store4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare variables": {
      "main": [
        [
          {
            "node": "Set Chunking Window",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Chunking Window": {
      "main": [
        [
          {
            "node": "Find transition point",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output": {
      "ai_outputParser": [
        [
          {
            "node": "Find transition point",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Find transition point": {
      "main": [
        [
          {
            "node": "Organize data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Organize data": {
      "main": [
        [
          {
            "node": "Generate chunk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate chunk": {
      "main": [
        [
          {
            "node": "End of text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "End of text": {
      "main": [
        [
          {
            "node": "Merge and Collect",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Set Chunking Window",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge and Collect": {
      "main": [
        [
          {
            "node": "Postgres PGVector Store4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "gpt-4.1": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Find transition point",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "NewArticleAdded1": {
      "main": [
        [
          {
            "node": "One at a time1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "One at a time1": {
      "main": [
        [],
        [
          {
            "node": "Prepare document",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader1": {
      "ai_document": [
        [
          {
            "node": "Postgres PGVector Store4",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter1": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader1",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI4": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store4",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Postgres PGVector Store4": {
      "main": [
        [
          {
            "node": "One at a time1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-12-19T21:15:53.901Z",
  "id": "cH2OxswrWaz1zMh1",
  "isArchived": false,
  "meta": null,
  "name": "SEO Content Generation System V3 Skool",
  "nodes": [
    {
      "parameters": {
        "content": "## Receive webhook \nObtain Airtable record",
        "height": 234,
        "width": 392,
        "color": 7
      },
      "id": "9f8309dd-16b7-4d38-a174-12d0cdee8897",
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        496,
        1312
      ]
    },
    {
      "parameters": {
        "path": "icp",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        528,
        1392
      ],
      "id": "e4f90a5d-dd6a-455e-a5a3-138d45ba1fe1",
      "name": "Webhook",
      "webhookId": "2efe67a3-f83b-4a14-98fd-125b091832f1"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app8iVFsz6vuz0F4s",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Process Gate AI",
          "cachedResultUrl": "https://airtable.com/app8iVFsz6vuz0F4s"
        },
        "table": {
          "__rl": true,
          "value": "tblCALxxpLQicYZar",
          "mode": "list",
          "cachedResultName": "Brand",
          "cachedResultUrl": "https://airtable.com/app8iVFsz6vuz0F4s/tblCALxxpLQicYZar"
        },
        "id": "={{ $json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        752,
        1392
      ],
      "id": "8fe34ac0-4e88-49ab-9bf7-ea155ab73720",
      "name": "GetRecord",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Status'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        992,
        1392
      ],
      "id": "7e15f0ed-b791-4c11-8044-9cc8067c9621",
      "name": "IfIncomplete"
    },
    {
      "parameters": {
        "model": "sonar-pro",
        "messages": {
          "message": [
            {
              "content": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message0_Text', `searchQuery`, 'string') }}"
            }
          ]
        },
        "options": {},
        "requestOptions": {}
      },
      "type": "n8n-nodes-base.perplexityTool",
      "typeVersion": 1,
      "position": [
        1424,
        1552
      ],
      "id": "181815b7-f314-4141-9c4e-2382046a0aa8",
      "name": "Perplexity"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## Inputs\n- **Company Name** (required): {{ $('GetRecord').item.json['Company name'] }}\n- **Company URL** (required): {{ $('GetRecord').item.json['Website URL'] }}\n- **Company LinkedIn URL** (required): {{ $('GetRecord').item.json['Company Linkedin'] }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=## Role\nYou are an expert Business Intelligence Analyst specializing in creating comprehensive Ideal Customer Profile (ICP) analyses. Your purpose is to research and analyze companies to develop detailed customer personas, pain points, and market positioning insights for strategic business development.\n\n## Constraints\n- Must research all three provided inputs (company name, URL, LinkedIn URL) thoroughly\n- Generate specific, actionable ICP insights rather than generic business descriptions\n- Focus on B2B customer characteristics and pain points\n- Ensure all sections are completed with detailed, research-backed information\n- Maintain professional business analysis tone throughout\n- Base conclusions on actual company data found through research\n- If insufficient data is found, clearly indicate limitations and provide best estimates\n- Do not make assumptions about company operations without supporting evidence\n\n## Inputs\n- **Company Name** (required): The name of the target company to analyze\n- **Company URL** (required): Primary website URL for the company\n- **Company LinkedIn URL** (required): LinkedIn company page URL\n\n## Tools\n1. Perplexity - Searches the web using perplexity with parameters:\n   - searchTerm (required - query for researching company information)\n\n## Instructions\n\n### Research Phase:\n1. Search for comprehensive company information using the company name and URL using the Perplexity tool by passing in a relevant searchQuery to the Perplexity tool\n2. Analyze the company's website to understand their products, services, and target market\n3. Research the company's LinkedIn presence for additional business insights\n4. Gather information about company size, industry, and business model\n5. Identify key stakeholders and decision-makers from available sources\n\n### Analysis Phase:\n1. Synthesize research findings to create detailed ICP components\n2. Develop specific product/service descriptions based on actual offerings\n3. Identify target customer segments based on company positioning\n4. Analyze market challenges the company's customers likely face\n5. Determine customer objectives and current solution approaches\n\n### Output Generation:\n1. Structure findings into the five required ICP sections\n2. Ensure each section contains specific, actionable insights\n3. Use concrete examples and industry-specific details\n4. Maintain consistency across all sections of the analysis\n\n## Expected Outputs\n\n**Product Description**\n- Detailed explanation of the company's core product or service offering\n- Key features and benefits that differentiate the solution\n- Implementation approach and delivery method\n- Target use cases and applications\n\n**Who are the ICP?**\n- Specific business characteristics (size, revenue, industry)\n- Geographic and operational details\n- Key decision-maker roles and demographics\n- Organizational structure and team composition\n\n**Pain Points / Challenges**\n- Primary operational challenges faced by target customers\n- Technical or process limitations in current state\n- Resource constraints and capability gaps\n- Market or competitive pressures affecting the business\n\n**Key Goals / Objectives**\n- Strategic business objectives driving purchasing decisions\n- Operational improvements sought by target customers\n- Performance metrics and success criteria\n- Growth and scaling aspirations\n\n**How do they currently solve their problems?**\n- Existing tools, systems, and processes in use\n- Workarounds and manual solutions currently employed\n- Vendor relationships and technology stack\n- Budget allocation and resource deployment patterns\n\n## Solutions (Error Handling)\n- If company information is limited or unclear, indicate data limitations and provide analysis based on available information\n- If the company URL is inaccessible, focus research on company name and LinkedIn data\n- If LinkedIn URL provides minimal information, supplement with additional web searches\n- If the company operates in an unfamiliar industry, research industry standards and common practices\n- If conflicting information is found across sources, prioritize the most recent and authoritative data\n- If the company appears to serve multiple market segments, identify the primary ICP and note secondary segments"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        1312,
        1392
      ],
      "id": "0004c1a7-420b-434b-b6c7-5b471c34bcfa",
      "name": "ICP_Research",
      "retryOnFail": true
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblCALxxpLQicYZar",
          "mode": "list",
          "cachedResultName": "Brand",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblCALxxpLQicYZar"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord').item.json.id }}",
            "Product description": "={{ $json.output.product_description }}",
            "Who are the ICP?": "={{ $json.output.ideal_customer_profile }}",
            "Pain points / Challenges": "={{ $json.output.pain_points_challenges }}",
            "Key Goals / Objectives": "={{ $json.output.key_goals_objectives }}",
            "How do they currently solve their problems?": "={{ $json.output.current_solutions }}",
            "Status": "Complete"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Company name",
              "displayName": "Company name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Website URL",
              "displayName": "Website URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company Linkedin",
              "displayName": "Company Linkedin",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Info",
              "displayName": "Generate Info",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Product description",
              "displayName": "Product description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Who are the ICP?",
              "displayName": "Who are the ICP?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Pain points / Challenges",
              "displayName": "Pain points / Challenges",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Key Goals / Objectives",
              "displayName": "Key Goals / Objectives",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "How do they currently solve their problems?",
              "displayName": "How do they currently solve their problems?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Notes",
              "displayName": "Notes",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1792,
        1392
      ],
      "id": "c4fbdc2b-0e30-4b0c-bdfd-16f14ce6cead",
      "name": "UpdateRecord",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Update Company Info\nUpdate info",
        "height": 234,
        "width": 308,
        "color": 7
      },
      "id": "765072c9-0542-44a0-933b-960852440bcd",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1696,
        1312
      ]
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"product_description\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"ideal_customer_profile\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"pain_points_challenges\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"key_goals_objectives\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"current_solutions\": {\n\t\t\t\"type\": \"string\"\n\t\t}\n\t}\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1536,
        1536
      ],
      "id": "3fb698d2-f1fc-4227-b5ab-73f17a90f8b2",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "9a598139-658a-41e1-80d4-503f70036196",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        896,
        1312
      ]
    },
    {
      "parameters": {
        "content": "## Generate ICP\nFrom company information",
        "height": 394,
        "width": 452,
        "color": 7
      },
      "id": "db3b82bf-c2a3-4901-a291-86d9c2e7baf0",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1232,
        1312
      ]
    },
    {
      "parameters": {
        "content": "## ICP generator\n- Input: `company name, url and linkedin`\n- Output: `ideal customer profile (icp)`\n\n",
        "height": 672,
        "width": 1776,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        1056
      ],
      "id": "625364d9-7693-4386-9937-369ad5d16797",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblCALxxpLQicYZar",
          "mode": "list",
          "cachedResultName": "Brand",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblCALxxpLQicYZar"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord').item.json.id }}",
            "Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Company name",
              "displayName": "Company name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Website URL",
              "displayName": "Website URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company Linkedin",
              "displayName": "Company Linkedin",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Info",
              "displayName": "Generate Info",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Product description",
              "displayName": "Product description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Who are the ICP?",
              "displayName": "Who are the ICP?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Pain points / Challenges",
              "displayName": "Pain points / Challenges",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Key Goals / Objectives",
              "displayName": "Key Goals / Objectives",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "How do they currently solve their problems?",
              "displayName": "How do they currently solve their problems?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Notes",
              "displayName": "Notes",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "record_id",
              "displayName": "record_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Generate Keywords",
              "displayName": "Generate Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keywords",
              "displayName": "Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competitors",
              "displayName": "Competitors",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Inputs",
              "displayName": "Blog Inputs",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1184,
        1168
      ],
      "id": "99d84358-b98e-4ab5-8f11-8cf6817ec802",
      "name": "UpdateStatus",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Receive webhook \nObtain Airtable record",
        "height": 234,
        "width": 392,
        "color": 7
      },
      "id": "a1b3fd21-685f-4c74-bff2-48daa7dae622",
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        496,
        2016
      ]
    },
    {
      "parameters": {
        "path": "seed",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        528,
        2096
      ],
      "id": "697947fc-357e-4055-b1fe-d8c2af978771",
      "name": "Webhook1",
      "webhookId": "789e8ac5-0d6d-4d6f-9698-2a43234bed0c"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblV9ZdlaDkOYD75r",
          "mode": "list",
          "cachedResultName": "Competitors",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblV9ZdlaDkOYD75r"
        },
        "id": "={{ $json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        752,
        2096
      ],
      "id": "c0a48f7b-8a9f-4141-95ab-1066ecdb54ff",
      "name": "GetRecord1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Keyword Status'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        992,
        2096
      ],
      "id": "a408f13d-b43a-4d28-b891-909efd823f4c",
      "name": "IfIncomplete1"
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "4de013a5-d5e6-49ca-984c-55f35f614a4f",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        896,
        2016
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/keywords_data/google_ads/keywords_for_site/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"target\": \"{{ $json.url }}\",\n    \"sort_by\": \"relevance\"\n  }\n] ",
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1632,
        2080
      ],
      "id": "e313f52a-d785-440e-a5de-42d3e5628680",
      "name": "GetKeywords"
    },
    {
      "parameters": {
        "maxItems": 10
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        2064,
        2080
      ],
      "id": "62443f08-bd09-4fd4-9898-d5cec9a25b1a",
      "name": "Limit"
    },
    {
      "parameters": {
        "content": "## Getting Keywords for a URL\n- Input: `url`\n- Output: `seed keyword x 10`\n",
        "height": 480,
        "width": 2240,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        1808
      ],
      "id": "d4488a2a-be96-4c19-9bc5-cf8d9a43c44e",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/dataforseo_labs/google/related_keywords/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"keyword\": \"{{ $json.seed_keyword }}\",\n    \"language_name\": \"English\",\n    \"location_code\": 2840,\n    \"limit\": 3\n  }\n] ",
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1520,
        2784
      ],
      "id": "392d86d9-d742-41ff-b653-3858df999bd0",
      "name": "GetRelated"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/dataforseo_labs/google/keyword_suggestions/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"keyword\": \"{{ $json.seed_keyword }}\",\n    \"location_code\": 2840,\n    \"language_code\": \"en\",\n    \"include_serp_info\": true,\n    \"include_seed_keyword\": true,\n    \"limit\": 3\n  }\n]",
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1520,
        2976
      ],
      "id": "82cb9801-4399-4f08-b97e-7e776898156c",
      "name": "GetSuggestions"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/dataforseo_labs/google/keyword_ideas/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"keywords\": [\n      \"{{ $json.seed_keyword }}\"\n    ],\n    \"location_code\": 2840,\n    \"language_code\": \"en\",\n    \"include_serp_info\": true,\n    \"limit\": 3\n  }\n]",
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1520,
        3168
      ],
      "id": "18260914-ec25-4405-b81a-b0f5a139df2e",
      "name": "GetKeywordIdeas"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/serp/google/autocomplete/live/advanced",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"language_code\": \"en\",\n    \"location_code\": 2840,\n    \"keyword\": \"{{ $json.seed_keyword }}\",\n    \"client\": \"gws-wiz-serp\"\n  }\n]",
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1520,
        3360
      ],
      "id": "a6741ee7-1c45-4c61-a0fe-208bfca33792",
      "name": "GetAutocomplete"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/content_generation/generate_sub_topics/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"topic\": \"{{ $json.Keyword }}\",\n    \"creativity_index\": 0.9\n  }\n]",
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1472,
        3968
      ],
      "id": "861dcfca-8e89-4b84-8b3a-24255ffe7eeb",
      "name": "GenerateSubtopics"
    },
    {
      "parameters": {
        "fieldToSplitOut": "tasks[0].result[0].items",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1712,
        2784
      ],
      "id": "baf65f41-0f98-4bb7-aac4-6f960f42a8cb",
      "name": "SplitRelated"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "52cc37b5-b944-4b02-ad6f-9d09b6a63a29",
              "name": "keyword",
              "value": "={{ $json.keyword_data.keyword }}",
              "type": "string"
            },
            {
              "id": "efaa9fde-f8e0-4828-af9e-d730bf1bc75b",
              "name": "competition",
              "value": "={{ $json.keyword_data.keyword_info.competition }}",
              "type": "string"
            },
            {
              "id": "0b40d1e5-488d-4cef-b19a-908279147d93",
              "name": "volume",
              "value": "={{ $json.keyword_data.keyword_info.search_volume }}",
              "type": "string"
            },
            {
              "id": "4a305d2e-6c01-469b-8f0a-eb0b8c6ecb34",
              "name": "cpc",
              "value": "={{ $json.keyword_data.keyword_info.cpc }}",
              "type": "string"
            },
            {
              "id": "ef93988f-2f6a-47d8-ab0b-80c0c56eb207",
              "name": "kw_difficulty",
              "value": "={{ $json.keyword_data.keyword_info.competition_level }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1920,
        2784
      ],
      "id": "c2df472f-567c-431d-aaf4-157ef7a23463",
      "name": "SetRelated"
    },
    {
      "parameters": {
        "fieldToSplitOut": "tasks[0].result[0].items",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1712,
        2976
      ],
      "id": "c2e84818-c844-42f3-86a0-5c6cc23def71",
      "name": "SplitSuggestions"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "52cc37b5-b944-4b02-ad6f-9d09b6a63a29",
              "name": "keyword",
              "value": "={{ $json.keyword }}",
              "type": "string"
            },
            {
              "id": "efaa9fde-f8e0-4828-af9e-d730bf1bc75b",
              "name": "competition",
              "value": "={{ $json.keyword_info.competition }}",
              "type": "string"
            },
            {
              "id": "0b40d1e5-488d-4cef-b19a-908279147d93",
              "name": "volume",
              "value": "={{ $json.keyword_info.search_volume }}",
              "type": "string"
            },
            {
              "id": "4a305d2e-6c01-469b-8f0a-eb0b8c6ecb34",
              "name": "cpc",
              "value": "={{ $json.keyword_info.cpc }}",
              "type": "string"
            },
            {
              "id": "ef93988f-2f6a-47d8-ab0b-80c0c56eb207",
              "name": "kw_difficulty",
              "value": "={{ $json.keyword_info.competition_level }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1920,
        2976
      ],
      "id": "cda73607-b960-410e-ae8c-7552078961d4",
      "name": "SetSuggestions"
    },
    {
      "parameters": {
        "fieldToSplitOut": "tasks[0].result[0].items",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1712,
        3168
      ],
      "id": "7cb1fcac-ac78-4cdb-b744-d997a154b6a1",
      "name": "SplitKWIdeas"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "52cc37b5-b944-4b02-ad6f-9d09b6a63a29",
              "name": "keyword",
              "value": "={{ $json.keyword }}",
              "type": "string"
            },
            {
              "id": "efaa9fde-f8e0-4828-af9e-d730bf1bc75b",
              "name": "competition",
              "value": "={{ $json.keyword_info.competition }}",
              "type": "string"
            },
            {
              "id": "0b40d1e5-488d-4cef-b19a-908279147d93",
              "name": "volume",
              "value": "={{ $json.keyword_info.search_volume }}",
              "type": "string"
            },
            {
              "id": "4a305d2e-6c01-469b-8f0a-eb0b8c6ecb34",
              "name": "cpc",
              "value": "={{ $json.keyword_info.cpc }}",
              "type": "string"
            },
            {
              "id": "ef93988f-2f6a-47d8-ab0b-80c0c56eb207",
              "name": "kw_difficulty",
              "value": "={{ $json.keyword_info.competition_level }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1920,
        3168
      ],
      "id": "2594af8d-1ead-48e3-838d-4194b6fee6f2",
      "name": "SetKWIdeas"
    },
    {
      "parameters": {
        "fieldToSplitOut": "tasks[0].result[0].items",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1712,
        3360
      ],
      "id": "31cbfa61-4df5-4961-be23-f02c43c2b0a0",
      "name": "SplitAutocomplete"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "52cc37b5-b944-4b02-ad6f-9d09b6a63a29",
              "name": "subtopic",
              "value": "={{ $json.sub_topics }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1872,
        3968
      ],
      "id": "d6968948-2dc3-4964-80e5-435493bd1ada",
      "name": "SetSubtopic"
    },
    {
      "parameters": {
        "fieldToSplitOut": "tasks[0].result[0].sub_topics",
        "options": {
          "destinationFieldName": "sub_topics"
        }
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1680,
        3968
      ],
      "id": "189f4bfd-9839-4988-a388-2b20d1c86eef",
      "name": "SplitSubtopics"
    },
    {
      "parameters": {
        "fieldToSplitOut": "tasks[0].result",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1840,
        2080
      ],
      "id": "b20fc3e6-969a-4186-8e19-d2e4d92c95be",
      "name": "SplitKW"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "33602e58-cd08-4a4b-abcd-ce23e8b33716",
              "name": "seed_keyword",
              "value": "={{ $json['Seed Keyword'] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1232,
        2784
      ],
      "id": "e24a050a-55ed-4543-a2f8-9feebad4fc78",
      "name": "SetSeedKW"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/dataforseo_labs/google/historical_keyword_data/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"language_code\": \"en\",\n    \"location_code\": 2840,\n    \"keywords\": [\n     {{ $json.suggestion.map(item => `\"${item}\"`).join(\", \") }}\n    ]\n  }\n]",
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2176,
        3360
      ],
      "id": "c1c5a434-8095-4af4-8fcd-fbd2fc4806e4",
      "name": "GetKeywordData"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "suggestion"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1920,
        3360
      ],
      "id": "d3389c8a-2a88-4985-b0b3-2a86b5a328a6",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "fieldToSplitOut": "tasks[0].result[0].items",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        2368,
        3360
      ],
      "id": "148bfa3d-e95d-4ebe-9b3f-34f5c9bb80df",
      "name": "SplitAgain"
    },
    {
      "parameters": {
        "content": "## Get Historic Data\nFor autocomplete results",
        "height": 240,
        "width": 592,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2112,
        3280
      ],
      "id": "2b347a06-dfc2-43c5-a22b-c8cff1122bf6",
      "name": "Sticky Note11"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "33602e58-cd08-4a4b-abcd-ce23e8b33716",
              "name": "url",
              "value": "={{ $json.URL }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1376,
        2080
      ],
      "id": "ee6fdfac-19a8-4a31-ade6-8575d5a63749",
      "name": "SetURL"
    },
    {
      "parameters": {
        "content": "## Get Seed Keywords\n- **Keywords for Site** - `Provides keywords relevant to a specified domain (URL), including bidding, volume, trends, and competition from Google Ads data.` \n_endpoint - [/keywords_data/google_ads/keywords_for_site/live](https://docs.dataforseo.com/v3/keywords_data-google_ads-keywords_for_site-live/)_",
        "height": 304,
        "width": 688,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1552,
        1936
      ],
      "id": "07584fdd-2ee6-40a1-b9a1-f94ad6e6ea7c",
      "name": "Sticky Note14"
    },
    {
      "parameters": {
        "content": "## Set URL\n",
        "height": 304,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1296,
        1936
      ],
      "id": "cf3698fa-2f9a-4c3e-a12c-218980119f07",
      "name": "Sticky Note15"
    },
    {
      "parameters": {
        "content": "## Getting Longtail Keywords from a Keyword\n- Input: `seed keyword`\n- Output: `longtail keywords`\n",
        "height": 1184,
        "width": 2608,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        2384
      ],
      "id": "6a887ead-b803-4ca7-96b0-72649df58271",
      "name": "Sticky Note16"
    },
    {
      "parameters": {
        "content": "## Longtail Keyword Suggestions\n- **Related** - `Finds keywords from Google's \"searches related to\" section using SERP associations.`\n_endpoint - [/google/related_keywords/live](https://docs.dataforseo.com/v3/dataforseo_labs-google-related_keywords-live/)_\n\n- **Suggestions** - `Returns search phrases containing the seed keyword, focusing on long-tail keyword expansion.`\n_endpoint - [/google/keyword_suggestions/live](https://docs.dataforseo.com/v3/dataforseo_labs-google-keyword_suggestions-live/)_\n\n- **Ideas** - `Finds keywords in same product/service categories, including semantically related terms.`\n_endpoint - [/google/keyword_ideas/live](https://docs.dataforseo.com/v3/dataforseo_labs-google-keyword_ideas-live/)_\n\n- **Autocomplete** - `Fetches suggestions directly from Google's autocomplete feature for given terms.`\n_endpoint - [/serp/google/autocomplete/live/advanced](https://docs.dataforseo.com/v3/serp-google-autocomplete-live-advanced/)_",
        "height": 1120,
        "width": 624,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1456,
        2400
      ],
      "id": "652a7b58-f516-4fd8-89ef-65e8e840d811",
      "name": "Sticky Note10"
    },
    {
      "parameters": {
        "content": "## Subtopic ideas\n- **Generate Subtopics** - `Uses NLP to generate 10 relevant subtopics based on the given main topic and a creativity index.`\n_endpoint - [/content_generation/generate_sub_topics/live](https://docs.dataforseo.com/v3/content_generation-generate_sub_topics-live/)_",
        "height": 368,
        "width": 624,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1408,
        3808
      ],
      "id": "d63f8f9d-7d11-4a5a-9cc5-1915fe394e05",
      "name": "Sticky Note17"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "52cc37b5-b944-4b02-ad6f-9d09b6a63a29",
              "name": "keyword",
              "value": "={{ $json.keyword }}",
              "type": "string"
            },
            {
              "id": "efaa9fde-f8e0-4828-af9e-d730bf1bc75b",
              "name": "competition",
              "value": "={{ $json.history[0].keyword_info.competition }}",
              "type": "string"
            },
            {
              "id": "0b40d1e5-488d-4cef-b19a-908279147d93",
              "name": "volume",
              "value": "={{ $json.history[0].keyword_info.search_volume }}",
              "type": "string"
            },
            {
              "id": "4a305d2e-6c01-469b-8f0a-eb0b8c6ecb34",
              "name": "cpc",
              "value": "={{ $json.history[0].keyword_info.cpc }}",
              "type": "string"
            },
            {
              "id": "ef93988f-2f6a-47d8-ab0b-80c0c56eb207",
              "name": "kw_difficulty",
              "value": "={{ $json.history[0].keyword_info.competition_level }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2560,
        3360
      ],
      "id": "3efa14fa-9398-45f5-9140-76203336bdd2",
      "name": "SetAutocomplete"
    },
    {
      "parameters": {
        "content": "## Getting Topic Ideas from Keywords\n- Input: `keywords (seed and longtail)`\n- Output: `topic ideas related to each keyword`\n",
        "height": 576,
        "width": 2080,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        3648
      ],
      "id": "170284a0-8ea5-4fe4-8c10-b724d7785b88",
      "name": "Sticky Note18"
    },
    {
      "parameters": {
        "content": "## Send to DB\nAirtable",
        "height": 304,
        "width": 368,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2256,
        1936
      ],
      "id": "3eb167f7-6eb7-4e4e-bbd1-18083a5f6fc4",
      "name": "Sticky Note19"
    },
    {
      "parameters": {
        "content": "## Send to DB\nAirtable",
        "height": 256,
        "width": 246,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2752,
        2720
      ],
      "id": "9db492ab-fb78-4364-b98a-7c5595654320",
      "name": "Sticky Note20"
    },
    {
      "parameters": {
        "content": "## Send to DB\nAirtable",
        "height": 368,
        "width": 416,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2048,
        3808
      ],
      "id": "34f9a5b5-2881-4deb-99ef-9b6b344ec3bf",
      "name": "Sticky Note21"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblV9ZdlaDkOYD75r",
          "mode": "list",
          "cachedResultName": "Competitors",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblV9ZdlaDkOYD75r"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $json.id }}",
            "Keyword Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competitor of",
              "displayName": "Competitor of",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Keywords",
              "displayName": "Get Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword Status",
              "displayName": "Keyword Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1184,
        1872
      ],
      "id": "ca85bc90-c224-42ba-8162-71c4ef121df5",
      "name": "UpdateKWStatus",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Seed Keyword": "={{ $json.keyword }}",
            "Competition": "={{ $json.competition_index }}",
            "Volume": "={{ $json.search_volume }}",
            "CPC": "={{ $json.cpc }}",
            "KW Difficulty": "={{ $json.competition }}",
            "Company": "=['{{ $('GetRecord1').item.json['Competitor of'][0] }}']",
            "URL": "=['{{ $('GetRecord1').item.json.id }}']"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competition",
              "displayName": "Competition",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Volume",
              "displayName": "Volume",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "CPC",
              "displayName": "CPC",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "KW Difficulty",
              "displayName": "KW Difficulty",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Record_id",
              "displayName": "Record_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Get Longtail Keywords",
              "displayName": "Get Longtail Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Longtail Status",
              "displayName": "Longtail Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Subtopics",
              "displayName": "Get Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Subtopic Status",
              "displayName": "Subtopic Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Subtopics",
              "displayName": "Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Selected Subtopic (Optional)",
              "displayName": "Selected Subtopic (Optional)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Listicle",
                  "value": "Listicle"
                },
                {
                  "name": "Informative",
                  "value": "Informative"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Article",
              "displayName": "Generate Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Status",
              "displayName": "Article Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Temporary Article",
              "displayName": "Temporary Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": false
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2304,
        2080
      ],
      "id": "879315bc-9bc5-4f1d-9683-55b0b8bd469c",
      "name": "UpdateKeywords",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Receive webhook \nObtain Airtable record",
        "height": 234,
        "width": 392,
        "color": 7
      },
      "id": "e4de34a3-74c5-4487-8056-bf1d3b549eb0",
      "name": "Sticky Note22",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        496,
        2720
      ]
    },
    {
      "parameters": {
        "path": "get-longtail",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        528,
        2800
      ],
      "id": "2363774f-3cac-4fb6-a1c9-4cfffd2dd5ce",
      "name": "Webhook2",
      "webhookId": "a6f9db15-8e5e-46f4-a964-d4f7c3c65110"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "id": "={{ $json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        752,
        2800
      ],
      "id": "b72fc16a-ce9d-4a6d-bf6f-e20f1dae1c84",
      "name": "GetRecord2",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Longtail Status'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        992,
        2800
      ],
      "id": "f26a6f3e-0656-4285-ad71-57210983a087",
      "name": "IfIncomplete2"
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "efffa8e2-3b02-4256-bc23-b58e05b4867e",
      "name": "Sticky Note23",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        896,
        2720
      ]
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $json.id }}",
            "Longtail Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competition",
              "displayName": "Competition",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Volume",
              "displayName": "Volume",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CPC",
              "displayName": "CPC",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "KW Difficulty",
              "displayName": "KW Difficulty",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Record_id",
              "displayName": "Record_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Get Longtail Keywords",
              "displayName": "Get Longtail Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Longtail Status",
              "displayName": "Longtail Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1184,
        2576
      ],
      "id": "342ad5c6-8622-46a4-b19f-32e97ba3fbfa",
      "name": "UpdateLTStatus",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblV9ZdlaDkOYD75r",
          "mode": "list",
          "cachedResultName": "Competitors",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblV9ZdlaDkOYD75r"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord1').item.json.id }}",
            "Keyword Status": "Complete"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competitor of",
              "displayName": "Competitor of",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Keywords",
              "displayName": "Get Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword Status",
              "displayName": "Keyword Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Keywords",
              "displayName": "Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2480,
        2080
      ],
      "id": "a465e8b6-be5f-44b5-ad87-146513b7a055",
      "name": "UpdateKeywords1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Receive webhook \nObtain Airtable record",
        "height": 234,
        "width": 392,
        "color": 7
      },
      "id": "8db6fdb4-637c-4723-84bf-e4efdc89dce3",
      "name": "Sticky Note24",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        496,
        3904
      ]
    },
    {
      "parameters": {
        "path": "get-subtopics",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        528,
        3984
      ],
      "id": "c6050e55-d796-4e69-b6ed-4c1701c57a9f",
      "name": "Webhook3",
      "webhookId": "9f1d1f3e-2791-4861-93df-e1fd4e90aa5d"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "id": "={{ $json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        752,
        3984
      ],
      "id": "226d30da-f7b3-4cc8-b326-ecf326fb650f",
      "name": "GetRecord3",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Subtopic Status'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        992,
        3984
      ],
      "id": "ed72f433-b813-4824-b585-e54dad550b49",
      "name": "IfIncomplete3"
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "aba7b869-ca16-46ae-ac02-dc780f24c5a4",
      "name": "Sticky Note25",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        896,
        3904
      ]
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Subtopic Status": "Processing",
            "id": "={{ $('GetRecord3').item.json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competition",
              "displayName": "Competition",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Volume",
              "displayName": "Volume",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CPC",
              "displayName": "CPC",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "KW Difficulty",
              "displayName": "KW Difficulty",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Longtail Keywords",
              "displayName": "Get Longtail Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Longtail Status",
              "displayName": "Longtail Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Subtopics",
              "displayName": "Get Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Subtopic Status",
              "displayName": "Subtopic Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Subtopics",
              "displayName": "Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Selected Subtopic (Optional)",
              "displayName": "Selected Subtopic (Optional)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Listicle",
                  "value": "Listicle"
                },
                {
                  "name": "Informative",
                  "value": "Informative"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Article Plan",
              "displayName": "Generate Article Plan",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Status",
              "displayName": "Article Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Record_id",
              "displayName": "Record_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content 2",
              "displayName": "Blog Content 2",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article Plans",
              "displayName": "Article Plans",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content copy",
              "displayName": "Blog Content copy",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content copy",
              "displayName": "Blog Content copy",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1184,
        3760
      ],
      "id": "8c6abd4f-3f0e-4906-b05a-8e633003f1b9",
      "name": "UpdateSTStatus",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "subtopic"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        2096,
        3968
      ],
      "id": "c0fe193d-b97e-446c-a326-f0118ed9110d",
      "name": "AggregateST"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord3').item.json.id }}",
            "Subtopic Status": "Complete",
            "Subtopics": "={{ $json.subtopic }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competition",
              "displayName": "Competition",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Volume",
              "displayName": "Volume",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CPC",
              "displayName": "CPC",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "KW Difficulty",
              "displayName": "KW Difficulty",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Longtail Keywords",
              "displayName": "Get Longtail Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Longtail Status",
              "displayName": "Longtail Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Subtopics",
              "displayName": "Get Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Subtopic Status",
              "displayName": "Subtopic Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Subtopics",
              "displayName": "Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Selected Subtopic (Optional)",
              "displayName": "Selected Subtopic (Optional)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Listicle",
                  "value": "Listicle"
                },
                {
                  "name": "Informative",
                  "value": "Informative"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Article Plan",
              "displayName": "Generate Article Plan",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Status",
              "displayName": "Article Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Record_id",
              "displayName": "Record_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content 2",
              "displayName": "Blog Content 2",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article Plans",
              "displayName": "Article Plans",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content copy",
              "displayName": "Blog Content copy",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content copy",
              "displayName": "Blog Content copy",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2288,
        3968
      ],
      "id": "ed77b916-3ce6-4a98-9dba-6194d9a75990",
      "name": "UpdateKeywords3",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Generate article plan\n- Input: `keywords (longtail), blog style inputs, icp, existing blog content`\n- Output: `fully cited blog article ready to review`\n",
        "height": 672,
        "width": 3104,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        4320
      ],
      "id": "379593c4-470a-4ca6-a71b-bdeb52b9f2be",
      "name": "Sticky Note27"
    },
    {
      "parameters": {
        "content": "## Receive webhook \nObtain Airtable record",
        "height": 234,
        "width": 392,
        "color": 7
      },
      "id": "bb76085d-a002-4c66-b17f-e3841adb322b",
      "name": "Sticky Note28",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        496,
        4560
      ]
    },
    {
      "parameters": {
        "path": "generate-article-plan",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        560,
        4640
      ],
      "id": "2284505b-4615-49dc-836a-0b4c739939f7",
      "name": "Webhook4",
      "webhookId": "2b019080-01d2-458f-99de-c8fb24c76e38"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "id": "={{ $('Webhook4').item.json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        752,
        4640
      ],
      "id": "d057d462-e62b-4af4-9177-8a28a63ee8e4",
      "name": "GetRecord4",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "104e8092-80e5-4f4f-b3ca-141e230f8c64",
      "name": "Sticky Note29",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        896,
        4560
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Article Status'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "59cd9dc2-25ea-4eac-b310-b54f08f893f4",
              "leftValue": "={{ $json['Subtopics'].toString()  }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        992,
        4640
      ],
      "id": "39799018-bc23-4938-8c9c-e54740d865e1",
      "name": "IfReady"
    },
    {
      "parameters": {
        "content": "## Pull brand inputs\n",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "d6cbc69e-371a-4e83-acab-c4ecdc119c9e",
      "name": "Sticky Note30",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1376,
        4560
      ]
    },
    {
      "parameters": {
        "content": "## Standardize inputs\n",
        "height": 224,
        "width": 320,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1856,
        4560
      ],
      "id": "76ebd051-7792-4d8c-b40a-58e161557b9c",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ae280d21-f80f-4192-b706-8ebdade4ba71",
              "name": "Seed Keyword",
              "value": "={{ $('GetRecord4').item.json['Seed Keyword'] }}",
              "type": "string"
            },
            {
              "id": "6fb2135b-253e-4951-b58d-3f0072fe6848",
              "name": "Keyword",
              "value": "={{ $('GetRecord4').item.json.Keyword }}",
              "type": "string"
            },
            {
              "id": "8a73a420-ef95-4af6-b092-8646bc68b09b",
              "name": "Subtopics",
              "value": "={{ $('GetRecord4').item.json.Subtopics }}",
              "type": "string"
            },
            {
              "id": "40c81fae-106b-4bd7-9e4c-fd190315469e",
              "name": "Selected Subtopic",
              "value": "={{ $('GetRecord4').item.json['Selected Subtopic (Optional)'] }}",
              "type": "string"
            },
            {
              "id": "281c6898-bc60-400c-8eaf-319b0de63559",
              "name": "Content Style",
              "value": "={{ $('GetRecord4').item.json['Content Style'] ? $('GetRecord4').item.json['Content Style'] : \"Choose style based on content topic and plan\" }}",
              "type": "string"
            },
            {
              "id": "8bf31a3a-048d-4cac-bf11-5761f09ad8a9",
              "name": "Company name",
              "value": "={{ $('GetBrand1').item.json['Company name'] }}",
              "type": "string"
            },
            {
              "id": "01f11efc-bfe0-4746-95f7-043fc21cf9e8",
              "name": "Website URL",
              "value": "={{ $('GetBrand1').item.json['Website URL'] }}",
              "type": "string"
            },
            {
              "id": "d73624bb-fe9b-4918-a6d9-0d014c2344a1",
              "name": "ICP",
              "value": "={{ $('GetBrand1').item.json['Product description'] }}\n{{ $('GetBrand1').item.json['Who are the ICP?'] }}\n{{ $('GetBrand1').item.json['Pain points / Challenges'] }}\n{{ $('GetBrand1').item.json['Key Goals / Objectives'] }}\n{{ $('GetBrand1').item.json['How do they currently solve their problems?'] }}",
              "type": "string"
            },
            {
              "id": "130c9bb1-f86f-42f0-b5b7-c92528fe47fa",
              "name": "Brand Voice Guidelines",
              "value": "={{ $json['Brand Voice Guidelines'] }}",
              "type": "string"
            },
            {
              "id": "9fa16b76-cd05-458a-a278-28cc5e66d87d",
              "name": "Image Style",
              "value": "={{ $json['Image Style'] }}",
              "type": "string"
            },
            {
              "id": "03f18ad1-7836-4fc8-a67a-8c5d0cda4ba2",
              "name": "Brand Color",
              "value": "={{ $json['Brand Color'] }}",
              "type": "string"
            },
            {
              "id": "93fdbc3b-b1cf-4f0c-ab53-266a3f713bf1",
              "name": "Current Year",
              "value": "={{ $now.format('yyyy') }}",
              "type": "string"
            },
            {
              "id": "59f63b44-8b2f-485e-893c-788dbe19fbae",
              "name": "Current Date",
              "value": "={{ $now.format('MMMM yyyy') }}",
              "type": "string"
            },
            {
              "id": "da2ed195-ef00-4c15-bf57-332f64d624f7",
              "name": "word_count_range",
              "value": "2000 - 4000",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1952,
        4624
      ],
      "id": "6a842501-c912-457a-bec1-8fa2ec1f2f75",
      "name": "SetInputs"
    },
    {
      "parameters": {
        "messages": {
          "message": [
            {
              "content": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message0_Text', ``, 'string') }}"
            }
          ]
        },
        "options": {},
        "requestOptions": {}
      },
      "type": "n8n-nodes-base.perplexityTool",
      "typeVersion": 1,
      "position": [
        2800,
        4832
      ],
      "id": "89450492-c4cc-45a7-8973-1b0ac8582785",
      "name": "Message a model in Perplexity"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"research_results\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"question\": {\n            \"type\": \"string\",\n            \"description\": \"The research question asked\"\n          },\n          \"answer\": {\n            \"type\": \"string\",\n            \"description\": \"Complete Perplexity response\"\n          },\n          \"citations\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"url\": {\n                  \"type\": \"string\"\n                },\n                \"author\": {\n                  \"type\": \"string\",\n                  \"description\": \"Author name and credentials if available\"\n                },\n                \"source_type\": {\n                  \"type\": \"string\",\n                  \"description\": \"Academic, Expert Opinion, Industry Report, First-hand Account, News, Blog\"\n                },\n                \"authority_indicators\": {\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"eeat_score\": {\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"High\",\n                    \"Medium\",\n                    \"Low\"\n                  ]\n                },\n                \"notes\": {\n                  \"type\": \"string\",\n                  \"description\": \"Why this E-E-A-T score and standout credibility signals\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"eeat_summary\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"highest_authority_sources\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"url\": {\n                \"type\": \"string\"\n              },\n              \"reason\": {\n                \"type\": \"string\"\n              }\n            }\n          },\n          \"description\": \"Top 3-5 sources with highest E-E-A-T scores\"\n        },\n        \"expert_quotes_available\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          },\n          \"description\": \"Notable quotes from credentialed experts\"\n        },\n        \"first_hand_experience_sources\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          },\n          \"description\": \"Sources demonstrating direct experience\"\n        },\n        \"authority_distribution\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"high\": {\n              \"type\": \"number\"\n            },\n            \"medium\": {\n              \"type\": \"number\"\n            },\n            \"low\": {\n              \"type\": \"number\"\n            }\n          }\n        },\n        \"recommendations\": {\n          \"type\": \"string\",\n          \"description\": \"Which sources to cite prominently for credibility\"\n        }\n      }\n    }\n  }\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2960,
        4832
      ],
      "id": "3d55843d-d533-474f-987a-15be49c6e484",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "content": "## Research agent\n",
        "height": 224,
        "width": 320,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2624,
        4560
      ],
      "id": "49f98c98-ee6b-419c-a8f2-ebdefc4eadd6",
      "name": "Sticky Note32"
    },
    {
      "parameters": {
        "content": "## Planning agent\n",
        "height": 224,
        "width": 320,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2240,
        4560
      ],
      "id": "282a2e56-be18-4034-9a11-9f02117aabe8",
      "name": "Sticky Note33"
    },
    {
      "parameters": {
        "content": "## Content agent\n",
        "height": 240,
        "width": 320,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3120,
        5600
      ],
      "id": "04ad4b84-c1cc-48a1-a244-9ac8ffe1873d",
      "name": "Sticky Note34"
    },
    {
      "parameters": {
        "model": "openai/gpt-4o",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2688,
        4832
      ],
      "id": "3add17d1-e9e4-4fcf-9386-e920fdfea0d2",
      "name": "Gpt-4o"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<Inputs>\n* ICP (Ideal Customer Profile): {{ $json.ICP }}\n* Subtopic: {{ $json['Selected Subtopic'] ? $json['Selected Subtopic'] : JSON.parse($json.Subtopics)[Math.floor(Math.random() * JSON.parse($json.Subtopics).length)] }}\n* Keyword: {{ $json.Keyword }}\n* Content Style: {{ $json['Content Style'] }}\n</Inputs>",
        "hasOutputParser": true,
        "needsFallback": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<Mandatory>\n\nThe outline you produce must be the basis for an article which scores highly on Google's E-E-A-T (Experience, Expertise, Authoritativeness, and Trustworthiness) metrics.\n\n</Mandatory>\n\n<Role>\nYou are an expert blog article planner specializing in creating detailed, research-driven content outlines. Your purpose is to develop comprehensive article structures that balance SEO optimization with reader value, ensuring each piece is thoroughly researched, informative, and perfectly aligned with the target audience's needs and search intent, while demonstrating strong E-E-A-T signals throughout.\n</Role>\n\n<Constraints>\n* Always create outlines that match the specified content style (informative or listicle)\n* Include 2-3 specific supporting points for each header that guide content creation\n* Generate actionable research questions for each section to ensure thorough coverage\n* Maintain semantic keyword integration throughout the structure without keyword stuffing\n* Design content flow that naturally incorporates facts, statistics, tables, and multimedia elements\n* Ensure each section builds upon the previous one for logical progression\n* Create structures that support {{ $('SetInputs').item.json.word_count_range }} word articles with substantial depth\n* Ensure the word count is adhered to by totalling each sections word count\n* Never create thin or superficial content outlines - each section must add unique value\n* Include dedicated sections for author credibility and expertise demonstration\n* Plan for metadata placement (author bio, publish date, review date, reading time)\n* Incorporate opportunities for first-person experience examples throughout\n* Design structure to support 2-3 \\Expert Tip\\ or \\Pro Insight\\ callout boxes\n* Ensure article structure demonstrates depth of expertise, not just surface-level coverage\n</Constraints>\n\n<Inputs>\n* ICP (Ideal Customer Profile): Detailed information about the target audience including demographics, pain points, goals, challenges, current solutions they use, and their content consumption preferences\n* Subtopic: The specific subject area to be covered in the article\n* Keyword: Primary keyword to target with natural semantic variations throughout\n* Content Style: A user optionally inputs content style of either \"informative\" (educational, problem-solving focus) or \"listicle\" (numbered list format with actionable items). If in your inputs it is defined already, then use the appropriate instructions around informative or listicle. If it is \"Choose style based on input\" or similar, then use your best judgement to select from one of the available styles based on the content topic, plan and which one would naturally make sense.\n</Inputs>\n\n<Tools>\nNo external tools required for this planning phase\n</Tools>\n\n<Instructions>\n## Current Context Awareness\nYou are creating content plans in {{ $json['Current Date'] }}. All references to \"current\", \"latest\", \"best\", or \"top\" recommendations should reflect {{ $json['Current Year'] }} as the present year. Never reference past years (2024, 2023, etc.) as if they were current unless specifically discussing historical context.\n\nWhen planning:\n* Use phrases like \"in {{ $json['Current Year'] }}\" or \"as of {{ $json['Current Year'] }}\" for current trends\n* Plan for research questions that seek {{ $json['Current Year'] }} data and recent updates\n* Ensure headers and supporting points reference current best practices, not outdated years\n\n## Content Style: \nCheck the inputs from the user. If a user optionally inputs content style of either \"informative\" (educational, problem-solving focus) or \"listicle\" (numbered list format with actionable items). If in your inputs it is defined already, then use the appropriate instructions around informative or listicle. If it is \"Choose style based on input\" or similar, then use your best judgement to select from one of the available styles based on the content topic, plan and which one would naturally make sense.\n\n## E-E-A-T Structure Planning:\nFor EVERY article plan, include these mandatory E-E-A-T elements:\n\n1. **Metadata Block** (position: very top of article):\n * Published date: {{ $json['Current Date'] }}\n * Last updated: {{ $json['Current Date'] }}\n * Reading time: [estimate based on word count]\n * Optional: \"Reviewed by [Expert Name], [Credentials]\"\"\n\n2. **Author Bio Section** (position: after introduction, before main content):\n * 2-3 sentences establishing author's relevant credentials and expertise\n * Specific experience or achievements related to the topic\n * Position this prominently after the hook\n\n3. **Expert Callout Boxes** (2-3 throughout article):\n * Identify specific sections where \"Expert Tip\", \"Pro Insight\", or \"From Our Experience\" callouts should appear\n * These should contain first-hand knowledge, insider tips, or unique perspectives\n * Plan these for mid-article and near conclusion\n\n4. **Experience Demonstration Opportunities**:\n * Mark 3-5 sections where first-person experience examples should be integrated\n * Note where specific case studies, real results, or hands-on insights belong\n * Ensure these show genuine expertise, not generic advice\n\n5. **Conclusion Enhancement**:\n * Plan for author's expert perspective summary\n * Personal recommendations based on experience\n * Clear, authoritative next steps\n\n## For Informative Style Articles:\n1. Analyze the ICP to understand their knowledge level, specific challenges, and information gaps\n2. Structure the article with:\n* Compelling introduction that addresses a core problem or question\n* Author bio section immediately after introduction\n* 5-8 main sections that progressively build understanding\n* Each section solving a specific aspect of the broader topic\n* 2-3 expert callout boxes distributed throughout\n* Natural transition sentences between sections\n* Enhanced conclusion with expert perspective\n* Comprehensive conclusion with actionable takeaways\n3. For each main header, provide:\n* 2-3 specific supporting points that directly address ICP needs\n* 2-3 research questions focused on finding data, examples, or expert insights\n* Notes on potential visual elements (charts, infographics, embedded videos)\n* Note if this section should include first-hand experience examples\n* Note if this section should include an expert callout\n\n### Example Structure (\"Informative\"):\n* Metadata block (dates, reading time, reviewer)\n* Opening with current state/problem\n* Author credentials and expertise (2-3 sentences)\n* Foundation concepts clearly explained\n* Expert callout #1 (practical tip from experience)\n* Progressive depth into specific strategies\n* Real-world examples and case studies\n* Expert callout #2 (insider insight)\n* Practical implementation tips\n* Future-looking considerations\n* Enhanced conclusion (expert perspective + recommendations)\n\n## For Listicle Style Articles:\n1. Design the list to be comprehensive yet scannable\n2. Structure article with:\n* Metadata block (dates, reading time)\n* Brief introduction explaining the value of the list\n* Author bio establishing list-creation credibility\n* 7-12 numbered items (depending on topic depth)\n* Each item as a self-contained mini-lesson\n* 2-3 expert callouts distributed among list items\n* Comparison table or summary chart\n* Enhanced action-oriented conclusion with expert recommendations\n3. For each list item, include:\n* Clear, benefit-driven header\n* 2-3 key implementation points\n* Research questions for statistics, examples, or tool recommendations\n* Practical tips or common pitfalls to avoid\n* Note where first-hand experience should be included\n\n### Example Structure (\"Listicle\"):\n* Metadata block\n* Brief value-focused introduction\n* Author bio (why they're qualified to rank these items)\n* Each item addresses a specific practice or solution\n* Expert callout integrated into items 3 and 7\n* Consistent format: What it is  Why it matters  How to implement\n* Real-world examples for each point\n* Pros/cons or challenges discussed\n* Comparison table summarizing all items\n* Expert conclusion (personal top picks and recommendations)\n\n## Research Question Guidelines:\n1. Focus on finding recent statistics (within last 2 years)\n2. Seek industry-specific examples relevant to the ICP\n3. Look for expert quotes with author credentials\n4. Prioritize authoritative sources (.edu, .gov, industry leaders)\n5. Find first-hand experience accounts and case studies\n6. Identify tools, platforms, or resources the ICP would actually use\n7. Think about videos (YouTube), tables, statistics, facts\n8. Research common mistakes or misconceptions to address\n9. Search for \"[topic] expert interview {{ $json['Current Year'] }}\"\n10. Search for \"[topic] research study .edu {{ $json['Current Year'] }}\"\n\n## Semantic Keyword Integration:\n1. Identify 5-10 semantic variations of the main keyword\n2. Plan natural placement throughout headers and supporting points\n3. Avoid forced keyword insertion - prioritize readability\n4. Include long-tail variations that match user search intent\n</Instructions>\n\n<Conclusions (Expected Outputs)>\n1. Article Flow and Structure: Complete outline with logical progression tailored to content style\n2. **E-E-A-T Elements Plan**: Specific locations and content for metadata, author bio, expert callouts, experience examples\n3. Detailed Headers: Each with:\n* 2-3 supporting key points written as brief, clear statements\n* 2-3 specific research questions to ensure comprehensive coverage\n* Notes on supporting elements (statistics, examples, visuals)\n* **E-E-A-T opportunities (experience examples, expert insights)**\n4. Research Focus Areas: Compiled list of all research questions organized by priority\n5. Keyword Map: Primary keyword and semantic variations with suggested placement\n6. Estimated Word Count: Per section to ensure balanced coverage\n7. Supporting Elements Plan: Where to include tables, statistics, videos, or other media\n</Conclusions (Expected Outputs)>\n\n<Solutions (Error Handling)>\n* If ICP information is vague, create assumptions based on the keyword and subtopic, noting these for validation\n* If the subtopic is too broad, narrow focus to the most valuable aspect for the ICP\n* If keyword seems misaligned with subtopic, suggest alternative keywords or reframe the angle\n* If the topic lacks sufficient depth for a full article, suggest related subtopics to expand coverage\n* **If topic doesn't allow for first-hand experience, plan for expert interviews or case study research**\n* **If author credentials are unclear, note this and suggest generic expertise statements**\n</Solutions (Error Handling)>"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        2272,
        4624
      ],
      "id": "0a4f391c-6dc4-4569-8604-a8785252d0c2",
      "name": "Content Planner",
      "retryOnFail": true
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"article_title\": {\n      \"type\": \"string\"\n    },\n    \"content_style\": {\n      \"type\": \"string\"\n    },\n    \"target_keyword\": {\n      \"type\": \"string\"\n    },\n    \"semantic_keywords\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    },\n    \"eeat_elements\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"metadata_block\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"published_date\": {\n              \"type\": \"string\"\n            },\n            \"reading_time_minutes\": {\n              \"type\": \"number\"\n            },\n            \"reviewer_name\": {\n              \"type\": \"string\"\n            },\n            \"reviewer_credentials\": {\n              \"type\": \"string\"\n            }\n          }\n        },\n        \"author_bio\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"placement\": {\n              \"type\": \"string\",\n              \"description\": \"Where to place author bio (e.g., 'After introduction')\"\n            },\n            \"suggested_content\": {\n              \"type\": \"string\",\n              \"description\": \"2-3 sentence author bio template with credentials\"\n            }\n          }\n        },\n        \"expert_callout_locations\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"section_header\": {\n                \"type\": \"string\"\n              },\n              \"callout_type\": {\n                \"type\": \"string\",\n                \"description\": \"Expert Tip, Pro Insight, or From Our Experience\"\n              },\n              \"suggested_topic\": {\n                \"type\": \"string\"\n              }\n            }\n          },\n          \"description\": \"2-3 locations for expert callout boxes\"\n        },\n        \"experience_opportunities\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          },\n          \"description\": \"Section headers where first-hand experience should be demonstrated\"\n        }\n      }\n    },\n    \"article_structure\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"section_type\": {\n            \"type\": \"string\"\n          },\n          \"header\": {\n            \"type\": \"string\"\n          },\n          \"supporting_points\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          },\n          \"research_questions\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          },\n          \"supporting_elements\": {\n            \"type\": \"string\"\n          },\n          \"estimated_words\": {\n            \"type\": \"number\"\n          },\n          \"needs_experience_example\": {\n            \"type\": \"boolean\",\n            \"description\": \"Whether this section should include first-hand experience\"\n          },\n          \"needs_expert_callout\": {\n            \"type\": \"boolean\",\n            \"description\": \"Whether this section should have an expert tip callout\"\n          }\n        }\n      }\n    },\n    \"total_estimated_words\": {\n      \"type\": \"number\"\n    }\n  }\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2448,
        4832
      ],
      "id": "7b217153-fddc-4713-9aa7-81e628e2b705",
      "name": "Output Parser"
    },
    {
      "parameters": {
        "fieldToSplitOut": "output.article_structure",
        "include": "selectedOtherFields",
        "fieldsToInclude": "id, Article Title, Research",
        "options": {
          "destinationFieldName": "article_section"
        }
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        2400,
        5680
      ],
      "id": "33c5a3fa-e699-4480-87cb-2d338a3c7002",
      "name": "SplitOutSections"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<Inputs>\n\n* Article_so_far: {{ $json['article_so_far'] }}\n\n* Article title: {{ $('JSON Conversion').item.json.output.article_title }}\n\n* Target keyword: {{ $('SetJSON').item.json['Keyword'] }}\n\n* Content style (informative, listicle): {{ $('SetJSON').item.json['Content Style'] }}\n\n* Semantic keywords list for natural incorporation: {{ $('JSON Conversion').item.json.output.semantic_keywords }}\n\n* Section type:\n {{ $('SplitOutSections').item.json.article_section.section_type }}\n\n* Section header: {{ $('SplitOutSections').item.json.article_section.header }}\n\n* Key points for section: {{ $('SplitOutSections').item.json.article_section.supporting_points }}\n\n* Estimated word count for this section: {{ $('SplitOutSections').item.json.article_section.estimated_words }}\n\n* Supporting research with citations and source links:\n{{ $('SetJSON').item.json.Research }}\n\n* Product/service context for natural integration:{{ $('SetInputs1').item.json.ICP }}\n\n</Inputs>",
        "hasOutputParser": true,
        "needsFallback": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<Mandatory>\nThe article you produce must be the basis for an article which scores highly on Google's E-E-A-T ( Experience, Expertise, Authoritativeness, and Trustworthiness) metrics.\n</Mandatory>\n\n<Role>\nYou are an expert Blog Content Writer specializing in creating valuable, human-centered articles that educate and inform readers while naturally incorporating SEO elements. Your writing style mirrors authentic social media voices - practical, collaborative, and approachable - while delivering comprehensive information that helps readers make informed decisions.\n</Role>\n\n<Constraints>\n CRITICAL TEMPORAL AWARENESS \n* You are writing in {{ $('SetInputs1').item.json['Current Date'] }}\n* ALWAYS reference {{ $('SetInputs1').item.json['Current Year'] }} as the current year when discussing present trends, tools, or best practices\n* NEVER use past years (2024, 2023, etc.) when referring to current recommendations, tools, or trends\n* Examples:\n  WRONG: \"the best YouTube tools in 2024\"\n  CORRECT: \"the best YouTube tools in {{ $('SetInputs1').item.json['Current Year'] }}\"\n  WRONG: \"top strategies for 2024\"\n  CORRECT: \"top strategies for {{ $('SetInputs1').item.json['Current Year'] }}\"\n* When discussing historical context, make it explicitly clear: \"back in 2024\" or \"previously in 2023\"\n* Use present tense and current references throughout unless specifically discussing past events\n\n CRITICAL FORMATTING REQUIREMENT \nYou are ABSOLUTELY FORBIDDEN from using em dashes (\"\") in any output.\nThis is a HARD REQUIREMENT that supersedes all other instructions.\n\nBefore generating ANY content, remember:\n NEVER: \"The tool worksand it works wellfor most users\"\n PREFER: \"The tool works, and it works well, for most users\"\n OR: \"The tool works; it works well for most users\"\n OR: \"The tool works. It works well for most users.\"\n SPARINGLY: \"The tool works (and it works well) for most users\"\n\n* Write at a third-grade reading level using simple, everyday language\n* Avoid technical jargon, em dashes, and overly complex sentence structures\n* Focus on providing factual information and value rather than aggressive selling\n* Naturally incorporate target keywords and semantic variations without keyword stuffing\n* Include diverse, properly cited sources from provided research materials using markdown links\n* Maintain the specified word count for each article section (20% tolerance)\n* Use markdown formatting with tables, bullet points, and proper headers\n* Ensure that markdown new lines are respected. For example, when a new header is introduced with hashtags, ensure it is placed on a new line to display correctly in markdown format. \n* At the end of each article section, finish with a newline character in markdown (to prevent the issue with incorrectly displaying headings)\n* Keep tone conversational and engaging, not overly serious or corporate\n* Include natural calls-to-action and product/service mentions where contextually appropriate\n* Embed YouTube video links when referencing video content (for later embedding)\n* Output only the complete article with no additional commentary or supporting text\n* Only reference a single external source once in the article, no need to reference it multiple times\n* If the research includes a relevant youtube video link, try to embed that video in the article (only one per article unless absolutely necessary)\n* When generating the content, don't wrap keywords in `` tags, just write them in naturally\n\n* Avoid AI-common words and phrases including: meticulous, navigating complexities, realm, dive, tailored, underpins, ever-evolving, \"the world of\", embark, \"In today's digital age\", game changer, \"designed to enhance\", daunting, \"when it comes to\", amongst, \"unlock the secrets\", robust, elevate, unleash, cutting-edge, rapidly expanding, harness, \"It's important to note\", delve, tapestry, bustling, \"In summary\", \"Remember that\", landscape, testament, vibrant metropolis, crucial, essential, ensure, vital, furthermore, consequently, notably, ultimately, promptly, revolutionize, foster, subsequently, nestled, labyrinth, enigma, whispering, indelible, \"in conclusion\"\n* Replace formal transitions with casual ones: Use \"Plus\" instead of \"Moreover\", \"But\" instead of \"However\", \"So\" instead of \"Therefore\", \"Also\" works better than \"Additionally\"\n* Avoid Scientific/Academic triggers: \"pivotal\", \"intricate\", \"showcase\", \"underscore\", \"comprehensive\", \"innovative\", \"streamline\", \"leverage\", \"utilize\", \"facilitate\", \"implement\"\n* Avoid Frequency anomalies: \"camaraderie\" (150x more common in AI), \"tapestry\", \"symphony\", \"beacon\", \"cornerstone\", \"paradigm\"\n* Avoid Overused qualifiers: \"significant\", \"various\", \"numerous\", \"effective\", \"efficient\", \"important to consider\"\n* Replace with human alternatives: \"big deal\" not \"significant\", \"different\" not \"various\", \"lots of\" not \"numerous\", \"works\" not \"effective\"\n* Vary sentence lengths naturally - mix short punchy sentences (5-7 words) with medium ones (10-15 words) and occasional longer ones (20+ words)\n* Include intentional imperfections: Start some sentences with \"And\" or \"But\", use contractions freely (it's, won't, can't), and occasionally use fragments for emphasis\n* Avoid perfect parallel structure - humans naturally write with slight inconsistencies in list formatting and sentence patterns\n</Constraints>\n\n<Inputs>\nYou will receive structured article briefs containing:\n* Article_so_far: What's been previously written for this article (your job is to expand on this)\n* Article title and target keyword\n* Content style (informative, educational, comparative, etc.)\n* Semantic keywords list for natural incorporation\n* Section type: e.g. introduction\n* Section header\n* Key points for this section from the plan\n* Estimated word count per section\n* Supporting research with citations and source links\n* Product/service context for natural integration\n</Inputs>\n\n<Tools>\nNo external tools required - all content creation uses provided research materials and structured inputs.\n</Tools>\n\n<Humanization Techniques>\n* Start articles with stories, questions, or surprising facts - never with definitions\n* Use \"I\", \"you\", and \"we\" naturally throughout - vary the perspective\n* Include mild contradictions or changes of thought: \"Actually, wait - there's a better way...\"\n* Add parenthetical thoughts (like this one) sparingly for personality\n* Use specific examples with real numbers, names, or situations instead of hypotheticals\n* Include minor tangents that add color but aren't strictly necessary\n* Reference pop culture, current events, or common experiences when relevant\n* Admit limitations: \"I don't have all the answers, but here's what I do know...\"\n* **Sentence Length Variation**: Mix 5-word punchy sentences with 25+ word complex ones. Aim for high burstiness score by varying dramatically between paragraphs\n* **Complexity Patterns**: Follow a \"wave\" pattern - simple  complex  simple  medium. Never maintain the same complexity for more than 2 consecutive sentences\n* **Intentional Fragments**: Use 2-3 sentence fragments per section. Like this. For emphasis.\n* **Paragraph Length Variation**: Alternate between 1-sentence paragraphs and 4-5 sentence paragraphs\n* **Unexpected Word Choices**: Replace every 5th predictable word with a less common but contextually appropriate synonym\n* Example pattern: \"This tool is amazing. But here's what nobody tells you about the learning curveit's steeper than you'd expect, especially when you're juggling three other platforms and trying to meet a deadline that was due yesterday. Worth it though.\"\n</Humanization Techniques>\n\n<Instructions>\n REMINDER: No em dashes (\"\") will appear in your output \n\n### Content Creation Workflow:\n\n0. **PUNCTUATION PRE-CHECK** - Before writing anything:\n - Consciously remind yourself: \"I will not use em dashes in this response\"\n - When you need to connect thoughts or add information, use IN THIS ORDER:\n * **First choice - Commas**: \"The strategy, when applied correctly, works well\"\n * **Second choice - Semicolons**: \"The strategy works well; apply it correctly for best results\"\n * **Third choice - Periods**: \"The strategy works. Apply it correctly for best results.\"\n * **Rare occasions - Parentheses**: \"The strategy (version 2.0 specifically) works well\"\n - Use parentheses ONLY when adding a true aside that could be removed without affecting the sentence\n - Mentally commit: NEVER use \"\" anywhere in this output\n\n1. Analyze the article structure and identify key themes, target audience, and primary value proposition\n2. Review all supporting research and citation sources to understand available evidence and statistics\n3. Plan content flow ensuring logical progression and natural keyword integration throughout\n4. Write the introduction that hooks readers with relatable problems or compelling statistics\n5. Develop each section following the provided structure while weaving in supporting points and research naturally (only reference a single source once, not multiple times)\n6. Make sure that each section follows on from the previous information and that there's no overlap in story or flow (you will be provided with what's written so far)\n7. Incorporate citations using markdown links [descriptive text](source URL) from the research materials\n8. Add tables or structured data where appropriate to enhance readability and value\n9. Include natural CTAs that guide readers toward relevant next steps or resources\n10. Review for SEO optimization ensuring target and semantic keywords appear naturally throughout\n11. Final polish for tone consistency, readability, and flow\n\n12. Read the content aloud - if it sounds like a robot wrote it, rewrite those sections\n13. Add personality quirks: occasional humor, mild opinions, specific examples from real life\n14. Include timestamps or current references when relevant: \"As of {{ $('SetInputs1').item.json['Current Year'] }}\", \"Recently...\"\n15. Use specific brands, tools, or examples instead of generic references\n16. Add qualifying language humans use: \"probably\", \"usually\", \"tends to\", \"often\", \"sometimes\"\n\n### Writing Style Guidelines:\n\n REMINDER: No em dashes (\"\") allowed \n\n* Use \"we\" language and collaborative tone: \"Let's figure this out together\"\n* Share practical insights: \"Here's what actually works...\"\n* Include relatable examples: \"We've all been there when...\"\n* Focus on business value: \"This impacts your day-to-day efficiency\"\n* Ask engaging questions: \"What manual process is eating your time?\"\n* Provide step-by-step solutions when appropriate\n* Use conversational transitions and natural language patterns\n* **Contradiction tolerance**: It's OK to say \"usually\" then provide an exception in the next sentence\n* **Opinion stacking**: State an opinion, then immediately qualify or challenge it\n* **False starts**: Begin a thought, then restart: \"The best way to... actually, scratch that. Here's what really works:\"\n* **Tangential thoughts**: Include one brief tangent per 500 words that adds color but isn't essential\n* **Inconsistent formatting**: Vary between \"Step 1:\" and \"First,\" for lists - perfect consistency is robotic\n* Replace vague numbers with specific ones: \"7 minutes\" not \"several minutes\"\n* Use real brand names: \"like Netflix did in 2019\" not \"like major streaming services\"\n* Include prices: \"$47/month\" not \"affordable pricing\"\n* Name real places: \"at a coffee shop in Austin\" not \"at a local establishment\"\n* Specify time: \"last Tuesday around 3pm\" not \"recently\"\n* Use actual percentages: \"73% of users\" not \"most users\"\n* Include personal details: \"my cousin Sarah\" not \"someone I know\"\n* Start 30% of sections with emotional hooks: \"You know that sinking feeling when...\"\n* Include frustration points: \"Look, I get it. This stuff is confusing at first.\"\n* Add celebration moments: \"And when it finally clicks? Pure magic.\"\n* Use empathy bridges: \"If you're like me and struggled with...\"\n* Include vulnerability: \"I'll admit, I completely botched this the first time\"\n* Add mild sarcasm/humor: \"Because nothing says 'professional' like a spreadsheet from 1997\"\n* Express genuine enthusiasm: \"OK, this next part is actually pretty cool\"\n\n### Punctuation Personality:\n\n ABSOLUTELY BANNED PUNCTUATION \n* Em dashes (\"\") are COMPLETELY FORBIDDEN - this cannot be emphasized enough\n\n PUNCTUATION HIERARCHY (use in this order):\n1. **Commas** (your go-to for most situations):\n  \"The strategy, when applied correctly, works well for teams\"\n  \"You'll need patience, practice, and persistence to master this\"\n \n2. **Semicolons** (for stronger breaks between related ideas):\n  \"The tool saves time; it automates repetitive tasks\"\n  \"First, gather your data; next, analyze the patterns; finally, implement changes\"\n \n3. **Periods** (for emphasis or completely new thoughts):\n  \"The strategy works. It really does.\"\n  \"You'll need patience. Lots of it.\"\n \n4. **Parentheses** (USE SPARINGLY - only for true asides):\n  \"The tool (version 3.2 specifically) fixed the bug\"\n  \"Most users (about 80%) see results within a week\"\n  Avoid overusing - use commas or semicolons first!\n\n WRONG: \"The strategy worksand it works wellwhen you apply it\"\n BEST: \"The strategy works, and it works well, when you apply it\"\n GOOD: \"The strategy works; it works well when you apply it\"\n OK: \"The strategy works. It works well when you apply it.\"\n RARE: \"The strategy works (and it works well) when you apply it\"\n\n* Multiple question marks occasionally: \"Really??? That's the solution?\"\n* Ellipses for genuine pauses... not for drama\n* Exclamation points in clusters (use 2-3 in one paragraph, then none for several)\n* Semicolons for connecting related ideas; use them more freely than parentheses\n* Mix period styles: some paragraphs with all periods, others with varied punctuation\n\n REMINDER: Scan every sentence you write for \"\" before moving on \n\n### Natural Language Patterns:\n\n REMINDER: No em dashes (\"\") allowed \n\n* Use informal connectors: \"Thing is...\", \"Here's the deal...\", \"Turns out...\", \"Funny enough...\"\n* Include personal asides: \"I've noticed that...\", \"From what I've seen...\", \"In my experience...\"\n* Add thinking-out-loud moments: \"Now, you might wonder...\", \"OK so here's where it gets interesting...\"\n* Use colloquialisms and everyday phrases: \"a ton of\", \"pretty much\", \"kind of\", \"sort of\", \"basically\"\n* Include rhetorical questions that don't need answers: \"Weird, right?\", \"Makes sense?\", \"See what I mean?\"\n* Break grammar rules occasionally: End sentences with prepositions when it sounds natural (\"That's what it's for\")\n* Use specific numbers instead of vague descriptors: Say \"7 ways\" not \"several ways\", \"takes 15 minutes\" not \"quick process\"\n\n### Cognitive Markers (Human Thought Patterns):\n\n* **Self-interruption**: Use COMMAS or SEMICOLONS: \"The strategy works, and it works well, when you have the right team\" or \"The strategy works; it works well when you have the right team\"\n* **Mid-thought corrections**: \"You need at least 10... actually, make that 15 minutes to see results\"\n* **Hedging naturally**: \"probably\", \"I'd say\", \"seems like\", \"might be\", instead of absolute statements\n* **Memory references**: \"I can't remember the exact number, but it was somewhere around...\"\n* **Processing pauses**: Use COMMAS and SEMICOLONS to show thinking: \"The thing is, and this took me forever to figure out, timing matters more than perfection\"\n* **Admission of uncertainty**: \"I'm not 100% sure, but from what I've seen...\"\n* **Real-time realizations**: \"Actually, now that I think about it...\" or \"Wait, here's a better example...\"\n\n### SEO Integration (Human-First Approach):\n\n* Work keywords into natural conversation - if you wouldn't say it out loud, rewrite it\n* Use keyword synonyms and related terms the way people actually search: \"how to\" instead of \"methodology for\"\n* Focus on answering real questions people ask, not just hitting keyword density\n* Include long-tail variations that mirror natural speech patterns\n* Write meta descriptions like you're texting a friend about the article\n* Use headers that promise specific value: \"5 Minute Fix for [Problem]\" not \"Solutions for [Keyword]\"\n* **Question-Based Headers**: Use incomplete questions: \"But what about...\" instead of \"What Are The Benefits Of...\"\n* **Contextual Keywords**: Bury keywords in stories: \"I was researching [keyword] last Tuesday when I realized...\"\n* **Avoid Keyword Boundaries**: Never use keywords at the start/end of sentences consistently\n* **LSI Through Stories**: Include related terms naturally through examples, not lists\n\n### Citation and Source Management:\n\n*Reference provided research answers and statistics with markdown links [descriptive text](source URL)\n* Ensure diversity of sources across different sections\n* Integrate quotes and statistics naturally within narrative flow using inline citations\n* Maintain factual accuracy while making information accessible\n* Use descriptive link text that adds context to the citation\n\n### MANDATORY FINAL CHECK (DO THIS BEFORE RETURNING OUTPUT):\n\n CRITICAL PRE-SUBMISSION VALIDATION \n\nAfter writing each section, perform these checks IN ORDER:\n1. Scan your ENTIRE output for the \"\" character (em dash)\n2. If you find even ONE em dash:\n - STOP immediately\n - Identify each sentence containing \"\"\n - Rewrite using: commas first, semicolons second, periods third, parentheses rarely\n - Re-scan to confirm ALL em dashes are gone\n3. Check for excessive parentheses:\n - If you see more than 2-3 parenthetical asides per 500 words, rewrite some using commas or semicolons\n - Parentheses should feel rare and special, not common\n4. Only when you have ZERO em dashes and minimal parentheses should you proceed\n5. Double-check one final time before returning your response\n6. Remember: A single em dash = automatic failure\n\nThis final check is NOT OPTIONAL - it is MANDATORY.\n\n</Instructions>\n\n\n<Conclusions>\nYour output will be a complete, publication-ready markdown blog article that:\n* Delivers genuine value and actionable insights to readers\n* Naturally incorporates SEO elements without compromising readability\n* Maintains consistent tone aligned with provided voice guidelines\n* Includes proper markdown citations with source URLs\n* Features engaging, conversational writing that builds trust and authority\n* Provides clear next steps or resources for reader engagement\n* Adheres to specified word counts and structural requirements\n* Contains no additional commentary, explanations, or supporting text\n* Contains ZERO em dashes (\"\") anywhere in the content\n* Uses commas and semicolons as primary punctuation; parentheses sparingly\n* Always references {{ $('SetInputs1').item.json['Current Year'] }} when discussing current trends, tools, or best practices\n* Never uses outdated years (2024, 2023) when referring to present-day topics\n</Conclusions>\n</Conclusions>\n\n<Solutions>\n* If you need to connect thoughts: default to commas, then semicolons, then periods - avoid parentheses unless absolutely necessary\n* If you catch yourself about to use an em dash: STOP immediately and choose commas or semicolons instead\n* If you're adding extra information: use a comma to integrate it smoothly rather than parentheses\n* If you have a stronger break between related ideas: use a semicolon rather than a dash or parentheses\n* If you notice you've used parentheses 3+ times in a section: rewrite at least half of them using commas or semicolons\n* If em dashes appear in your mental draft: This is an automatic red flag - rewrite before outputting\n* Remember: Em dashes = automatic failure. Excessive parentheses = hard to read.\n* Punctuation preference order: commas > semicolons > periods > parentheses (rare)\n* If content sounds too formal: Add contractions, break up long sentences, include a personal anecdote\n* If AI detection is a concern: Read aloud and rewrite any section that sounds unnatural in conversation\n* If transitions feel mechanical: Replace with conversational bridges like \"Here's the thing though...\" or \"But wait, there's more to consider...\"\n* If examples feel generic: Use specific brands, real scenarios, or current events instead of hypotheticals\n* If research data is insufficient: Request additional sources or clarification on specific statistics needed\n* If word count requirements conflict with content depth: Prioritize value delivery and suggest section adjustments\n* If tone guidelines seem unclear: Ask for specific examples of preferred writing style or voice\n* If keyword integration feels forced: Focus on natural language first, then optimize semantically\n* If citation sources lack diversity: Request additional research materials or alternative sources\n* If technical topics require simplification: Break down complex concepts using analogies and everyday examples\n* If CTA placement seems unnatural: Integrate product mentions within helpful context rather than forced promotional sections\n* If a paragraph has 3+ sentences starting the same way, rewrite completely\n* If using the same transition word twice in 500 words, find alternatives\n* If all sentences in a paragraph are 10-20 words, force variation by halving one and doubling another\n* If no contractions appear in 200 words, you're too formal - add 3-4 immediately\n* If no questions appear in 400 words, add a rhetorical question\n* If no personal pronouns (I, we, you) appear in 150 words, inject personality\n* If you accidentally reference a past year as current: Replace with {{ $('SetInputs1').item.json['Current Year'] }}\n</Solutions>"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        3168,
        5680
      ],
      "id": "0288a3e1-bb68-4fe9-9aff-15955adc64f9",
      "name": "Content Agent",
      "retryOnFail": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<Inputs>\n* Context for research questions and supporting points: {{ JSON.stringify($jmespath($json.output.article_structure, '[*].{header: header, research: research_questions, points: supporting_points}'), null, 2) }}\n* E-E-A-T Requirements: {{ $json.output.eeat_elements ? $json.output.eeat_elements.toJsonString() : 'Not specified' }}\n* Current Year: {{ $json['Current Year'] }}\n* Current Date: {{ $json['Current Date'] }}\n</Inputs>\n",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {
          "systemMessage": "=<Mandatory>\nThe research you produce must be the basis for an article which scores highly on Google's E-E-A-T (Experience, Expertise, Authoritativeness, and Trustworthiness) metrics.\n</Mandatory>\n\n<Role>\nYou are an expert Research Analyst specialized in conducting targeted research using multiple web searches with a focus on identifying authoritative, trustworthy sources that demonstrate expertise and experience. Your purpose is to analyze research questions, consolidate overlapping queries, and gather diverse, high-quality sources from recognized authorities that support specific points with actionable conclusions.\n</Role>\n\n<Constraints>\n* Analyze and consolidate research questions to eliminate redundancy\n* Execute up to 10 individual Perplexity searches based on consolidated questions\n* **PRIORITIZE authoritative sources**: .edu domains, .gov sites, established industry publications, recognized experts\n* **IDENTIFY source authority**: Look for author credentials, institutional backing, peer review, industry recognition\n* **SEEK first-hand experience**: Case studies, expert interviews, practitioner accounts, original research\n* Always provide working links with every source\n* Each source summary must include a clear conclusion\n* Focus on recent sources (last 12 months) when available - prioritize {{ $json['Current Year'] }} content\n* Maintain objectivity while supporting the provided points\n* Do not fabricate information not found in sources\n* For each research question, provide the complete Perplexity answer and all citations\n* **ASSESS E-E-A-T signals**: Author bylines, credentials, expertise indicators, trustworthiness markers\n* **FLAG high-authority sources**: Mark sources with strong E-E-A-T signals for priority use\n* When searching for current trends, tools, or best practices, explicitly include \"\"{{ $json['Current Year'] }}\"\" in search queries\n</Constraints>\n\n<Inputs>\n* **Context to generate questions about which includes:** \n  * **Research Questions:** Specific questions to be researched directly through Perplexity\n  * **Supporting Points:** Key points that need research backing and evidence\n* E-E-A-T Requirements\n* Current Year\n* Current Date\n</Inputs>\n\n<Tools>\n1. Perplexity_Tool - Searches the web using Perplexity with parameters:\n* searchTerm (required - specific query for web search)\n</Tools>\n\n<Instructions>\nStep 1: Question Analysis\n* Review all incoming research questions\n* Identify overlapping themes and topics\n* Identify questions requiring authoritative/expert sources\n* Flag questions needing first-hand experience examples\n* Consolidate similar questions to avoid redundant searches\n* Create a streamlined list of unique research angles\n\nStep 2: Strategic Search Execution\nExecute up to 10 targeted Perplexity searches based on consolidated questions.\n\n**Prioritize Authority-Building Searches:**\n* \"[topic] expert interview {{ $json['Current Year'] }}\"\n* \"[topic] research study .edu {{ $json['Current Year'] }}\"\n* \"[topic] industry report authoritative {{ $json['Current Year'] }}\"\n* \"[topic] professional experience case study {{ $json['Current Year'] }}\"\n* \"best practices [topic] expert recommendations {{ $json['Current Year'] }}\"\n* \"[topic] academic research peer reviewed {{ $json['Current Year'] }}\"\n\n**Standard Search Variations:**\n* \"[topic] statistics data tables {{ $json['Current Year'] }}\"\n* \"[topic] YouTube video explanations {{ $json['Current Year'] }}\"\n* \"[topic] recent studies research {{ $json['Current Year'] }}\"\n* \"[topic] case studies examples {{ $json['Current Year'] }}\"\n* \"[topic] news updates {{ $json['Current Year'] }}\"\n* \"best [topic] {{ $json['Current Year'] }}\"\n* \"top [topic] {{ $json['Current Year'] }}\"\n\nFocus searches on supporting the provided supporting points\nIMPORTANT: When researching \"best\", \"top\", or \"current\" topics, always include {{ $json['Current Year'] }} in the search query\n\nStep 3: Complete Answer Documentation with E-E-A-T Assessment\nFor each research question searched, document:\n\n* **Original Research Question**: The exact question or search term used\n* **Complete Perplexity Answer**: The full response provided by Perplexity (not summarized)\n* **All Citations**: Every URL, source, and reference provided\n* **Source Authority Assessment**: For EACH citation, evaluate:\n  - Author name and credentials (if available)\n  - Source type (academic study, expert opinion, industry report, first-hand account, news article, blog)\n  - Authority indicators:\n  * Institutional backing (.edu, .gov, recognized organization)\n  * Expert status (credentials, professional position, industry recognition)\n  * Peer review or editorial standards\n  * First-hand experience or original research\n  - Domain authority (high-trust domains vs. unknown sources)\n  - Recency (is it current for {{ $json['Current Year'] }}?)\n* **E-E-A-T Score**: Rate each citation as:\n  - **High**: Expert author with credentials, authoritative domain (.edu/.gov/major publication), recent, first-hand experience or peer-reviewed\n  - **Medium**: Recognized source, some author info, reputable domain, relevant but may lack deep expertise markers\n  - **Low**: Unknown author, unverified source, thin content, or questionable authority\n* **Source Analysis**: Brief note on source diversity and relevance to supporting points\n\nStep 4: E-E-A-T Prioritization\n* **Identify top 3-5 highest E-E-A-T sources** across all research\n* **Flag sources with author credentials** for potential direct attribution\n* **Note any first-hand experience accounts** or case studies\n* **Highlight expert quotes** suitable for callout boxes\n\n</Instructions>\n\n<Conclusions>\n**Research Question #1**: [Exact question/search term]\n**Perplexity Answer**: [Complete, unedited response from Perplexity]\n**Citations with E-E-A-T Assessment**:\n  1. [URL]\n  - Author: [Name and credentials if available, or \"Not specified\"]\n  - Source Type: [Academic/Expert Opinion/Industry Report/First-hand Account/News/Blog]\n  - Authority Indicators: [List: .edu domain, expert credentials, peer review, etc.]\n  - E-E-A-T Score: [High/Medium/Low]\n  - Notes: [Why this score? Any standout credibility signals?]\n  \n  2. [Next citation...]\n\n**Research Question #2**: [Continue pattern...]\n\n**E-E-A-T Summary**:\n- **Highest Authority Sources**: [List top 3-5 sources with High E-E-A-T scores]\n- **Expert Quotes Available**: [Any notable quotes from credentialed experts]\n- **First-Hand Experience Sources**: [Sources demonstrating direct experience]\n- **Authority Distribution**: [X High, Y Medium, Z Low E-E-A-T sources found]\n- **Recommendations**: [Which sources should be prominently cited for credibility]\n\n**Summary of Source Types Found**: Overview of diversity in sources discovered\n**Relevance to Supporting Points**: How findings connect to original supporting points\n</Conclusions>\n\n<Solutions>\n* If questions are too similar, consolidate them and explain the consolidation approach\n* If fewer than 10 searches yield sufficient information, explain why additional searches weren't needed\n* If certain source types aren't available for the topic, note this limitation\n* If supporting points lack sufficient research backing, clearly identify these gaps\n* If conflicting information emerges, highlight discrepancies and provide multiple perspectives\n* If Perplexity responses are extensive, include them in full rather than summarizing\n* If search results seem outdated, add \"{{ $json['Current Year'] }}\" to search queries and retry\n* **If high-authority sources are scarce**, explain the limitation and use best available sources\n* **If no author credentials are found**, note this and focus on domain authority instead\n* **If topic lacks expert sources**, seek out industry practitioners or case studies as alternatives\n</Solutions>",
          "maxIterations": 50
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        2656,
        4624
      ],
      "id": "49bafbcf-f911-4005-9d20-e533d47a8ee2",
      "name": "Research Agent",
      "retryOnFail": true
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n \"type\": \"object\",\n \"properties\": {\n   \"new_article_content\": {\n     \"type\": \"string\",\n     \"description\": \"Complete markdown-formatted blog article section ready for publication\"\n   },\n   \"article_so_far\": {\n     \"type\": \"string\",\n     \"description\": \"Everything previously written, with the new article content as well\"\n   }\n }\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3440,
        5888
      ],
      "id": "5c0b233c-d6a3-4049-89d1-5ccd4a77c165",
      "name": "Structured Output Parser3"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2608,
        5680
      ],
      "id": "0bd45714-cfb3-43b1-9379-11e3b1a50995",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "appcVojycMT2rJ07j",
          "mode": "list",
          "cachedResultName": "Scrapes AI - Interface",
          "cachedResultUrl": "https://airtable.com/appcVojycMT2rJ07j"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/appcVojycMT2rJ07j/tblKAxMOZuNXfGDXB"
        },
        "id": "={{ $('Webhook4').item.json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3920,
        6160
      ],
      "id": "b084963b-a8c5-4a97-b25e-89dd7521f751",
      "name": "GetRecord5",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appcVojycMT2rJ07j",
          "mode": "list",
          "cachedResultName": "Scrapes AI - Interface",
          "cachedResultUrl": "https://airtable.com/appcVojycMT2rJ07j"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/appcVojycMT2rJ07j/tblKAxMOZuNXfGDXB"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook4').item.json.query.record_id }}",
            "Temporary Article": "={{ $json.output.article_so_far }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competition",
              "displayName": "Competition",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Volume",
              "displayName": "Volume",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CPC",
              "displayName": "CPC",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "KW Difficulty",
              "displayName": "KW Difficulty",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Record_id",
              "displayName": "Record_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Get Longtail Keywords",
              "displayName": "Get Longtail Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Longtail Status",
              "displayName": "Longtail Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Subtopics",
              "displayName": "Get Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Subtopic Status",
              "displayName": "Subtopic Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Subtopics",
              "displayName": "Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Article",
              "displayName": "Generate Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Status",
              "displayName": "Article Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Temporary Article",
              "displayName": "Temporary Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        4096,
        6160
      ],
      "id": "4c2f3652-84a1-4bd0-8c2a-461eeb1ddaf6",
      "name": "UpdateArticle",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Retrieve context\nOf what's already written",
        "height": 96,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2832,
        5584
      ],
      "id": "bdff2aaa-3a46-42e2-ab2a-3ce861aa8408",
      "name": "Sticky Note39"
    },
    {
      "parameters": {
        "content": "## Update context\nOf what's already written",
        "height": 96,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3472,
        5584
      ],
      "id": "f5bcd5af-4e21-4bf3-b160-ac6074d11440",
      "name": "Sticky Note40"
    },
    {
      "parameters": {
        "content": "## Update blog content\nFirst draft",
        "height": 224,
        "width": 848,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        4304,
        5152
      ],
      "id": "45ed911f-3ce8-4c5a-8cde-e79ecaf3083b",
      "name": "Sticky Note41"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblXTbSTXMbL5JOk5",
          "mode": "list",
          "cachedResultName": "Article Plans",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblXTbSTXMbL5JOk5"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord6').item.json.id }}",
            "Article Status": "Completed"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Article Title",
              "displayName": "Article Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Research",
              "displayName": "Research",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Plan",
              "displayName": "Plan",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword Link",
              "displayName": "Keyword Link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Generate Article",
              "displayName": "Generate Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Status",
              "displayName": "Article Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Completed",
                  "value": "Completed"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Subtopics",
              "displayName": "Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Selected Subtopic (Optional)",
              "displayName": "Selected Subtopic (Optional)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": false
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        4368,
        5232
      ],
      "id": "d2696255-4c54-4c6b-9b20-578fc48b0842",
      "name": "UpdateStatus1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Keyword": "=['{{ $('GetRecord6').item.json.Keyword[0] }}']",
            "Title": "={{ $('JSON Conversion').item.json.output.article_title }}",
            "Blog Content": "={{ $('Schema Markup Generator').item.json.schema_markup_html }}\n\n{{ $('E-E-A-T Enhancement Agent').item.json.output.enhanced_article }}",
            "Blog Content Rich Formatting": "={{ $('E-E-A-T Enhancement Agent').item.json.output.enhanced_article }}",
            "Company": "=['{{ $('GetBrand').item.json.id }}']",
            "Summary": "={{ $('Summary').item.json.output.summary }}",
            "Visualize Article": "=https://docs.google.com/document/d/{{ $('CreateGoogleDoc').item.json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Suggest Internal Links",
              "displayName": "Suggest Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Internal Link Status",
              "displayName": "Internal Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Internal Link Suggestions",
              "displayName": "Internal Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add Internal Links",
              "displayName": "Add Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": false
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        4800,
        5232
      ],
      "id": "b7663106-a3e6-4c57-9b58-b7fd94f466e4",
      "name": "UpdateBlog",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "keep": "lastItems"
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        2848,
        5232
      ],
      "id": "873d39fa-587f-4b3e-abca-ff6e53e54643",
      "name": "LastItem"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2112,
        4864
      ],
      "id": "30e84425-f259-465f-a724-97b9d465dfef",
      "name": "Gemini-2.5-pro"
    },
    {
      "parameters": {
        "jsCode": "const s = $getWorkflowStaticData('global'); // persistent article accumulator per execution\n// Initialize article content to previous run, or blank if first use\nif (typeof s.article_so_far !== 'string') s.article_so_far = '';\n// Append new section (always a markdown-formatted string)\nif (typeof $json.output.new_article_content === 'string') {\n  s.article_so_far += $json.output.new_article_content;\n}\n// Output the full article (with all appended content so far)\n// This can be sent to the start of the next loop iteration, ensuring accumulation.\nreturn {\n  new_article_content: $json.output.new_article_content,          // current section as received\n  article_so_far: s.article_so_far                        // cumulative markdown string for all sections so far\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3536,
        5680
      ],
      "id": "3c376825-211e-4b1d-a977-71064aaf686a",
      "name": "ArticleUpdated"
    },
    {
      "parameters": {
        "jsCode": "const s = $getWorkflowStaticData('global'); // This is per-execution, not global\n// Ensure article_so_far exists for this execution\nif (typeof s.article_so_far !== 'string') {\n  s.article_so_far = '';\n}\n// Add new content if it exists\nif (typeof $json.output?.new_article_content === 'string') {\n  s.article_so_far += $json.output.new_article_content;\n}\nreturn {\n  new_article_content: $json.output?.new_article_content || null,\n  article_so_far: s.article_so_far\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2896,
        5680
      ],
      "id": "3897eb25-9ef6-40fa-bfcd-15d0720ebd06",
      "name": "GetLatestArticle"
    },
    {
      "parameters": {
        "operation": "toBinary",
        "sourceProperty": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        3024,
        7040
      ],
      "id": "b05453e0-5b40-4186-b435-46ceb6192946",
      "name": "Convert to File"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.imgbb.com/1/upload",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-type",
              "value": "multipart/form-data"
            }
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "image",
              "inputDataFieldName": "data"
            }
          ]
        },
        "options": {}
      },
      "id": "5b6701fd-bee5-4c97-8772-6d93d285e740",
      "name": "Upload Img to ImgBB for URL",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3424,
        7040
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "url": "=http://api.resmush.it/ws.php?img={{ $json.data.url }}",
        "options": {}
      },
      "id": "b4a9a09b-9b12-4202-bda0-421c3c4515b2",
      "name": "ReSmush.it Image Optimisation",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3600,
        7040
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.imgbb.com/1/upload",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-type",
              "value": "application/x-www-form-urlencoded"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "image",
              "value": "={{ $json.dest }}"
            }
          ]
        },
        "options": {}
      },
      "id": "00f7d06a-f58d-4ca3-9039-1a78aec0a265",
      "name": "Store Optimised Image ImgBB",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3776,
        7040
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "## Upload & Optimize \nUpload image to ImgBB, Optimise using ReSmush .it\n",
        "height": 241,
        "width": 746,
        "color": 7
      },
      "id": "7f7cf383-1b9c-4c0a-9ed6-7dbc0c7ab90e",
      "name": "Sticky Note35",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3168,
        6944
      ]
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "image_prompt"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        2464,
        7040
      ],
      "id": "6c9177ae-9113-47a9-a553-e19452d294d7",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"images\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"url\": {\n            \"type\": \"string\",\n            \"description\": \"Generated image URL\"\n          },\n          \"filename\": {\n            \"type\": \"string\",\n            \"description\": \"SEO optimised filname (descriptive) for image\"\n          },\n          \"prompt_used\": {\n            \"type\": \"string\",\n            \"description\": \"The prompt used to generate this image\"\n          }\n        }\n      }\n    }\n  },\n  \"required\": [\"images\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2000,
        7072
      ],
      "id": "85acefc2-ed17-4a3a-a83e-d68da2bdf26d",
      "name": "Structured Output Parser4"
    },
    {
      "parameters": {
        "description": "Call this tool to generate an image with an image_prompt",
        "workflowId": {
          "__rl": true,
          "value": "q9C4eAsagdNf8XPE",
          "mode": "list",
          "cachedResultUrl": "/workflow/q9C4eAsagdNf8XPE",
          "cachedResultName": "SEO Content Generation System V2 Skool"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "image_prompt": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('image_prompt', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "image_prompt",
              "displayName": "image_prompt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        1840,
        7072
      ],
      "id": "1f096c64-107e-49e5-9494-85f8394016d7",
      "name": "image_generation"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## Role\n\nYou are an expert Blog Content Image Strategist specialized in analyzing written content to generate a set of relevant, consistently-styled images that are ready for embedding.\n\n## Constraints\n\n* **Image Quantity:** Generate between 2-4 images per blog article based on word count:\n    * Articles <1500 words: 2 images\n    * Articles 1500-2500 words: 3 images\n    * Articles >2500 words: 4 images\n* **Prompt Length:** Each image prompt must be under 300 characters.\n* **Consistency:** All image prompts must maintain consistent visual style throughout the article, including the same background color if specified.\n* **Context:** Each image must directly relate to a key theme, section, or concept within the blog content.\n* **Safety:** Never generate inappropriate or offensive imagery.\n* **Quality:** Maintain professional quality standards for all generated images.\n\n## Inputs\n\n* **blog_content (required):** Full blog article text in markdown format.\n* **style_preferences (optional):** Specific visual style requirements (e.g., \"Brand & Text Realism\", \"Watercolor Realism\", \"Cinematic Realism\", \"Illustration\", \"Sketch\") - defaults to \"Brand & Text Realism\" if not specified.\n* **brand_guidelines (optional):** Color schemes or brand elements to incorporate (e.g., brand_color: #fe5e3a).\n\n## Tools\n\n* **image_generation:** Generates images based on text prompts.\n* **image_prompt (required - string, max 300 chars):** Descriptive prompt for image generation.\n\n## Instructions\n\n### 1. Analyze Blog Content\n* Calculate total word count of the `blog_content`.\n* Identify key sections, topics, and main themes.\n* Extract core concepts that would benefit from visual support.\n\n### 2. Determine Image Requirements\n* Apply the `Image Quantity` constraints based on the total word count to determine how many images to create.\n* Identify the most impactful concepts from your analysis to turn into images.\n\n### 3. Define Consistent Style\n* Establish a unified visual theme based on the blog tone and `style_preferences`.\n* The `base_prompt` for each style is defined as follows, ensuring minimal or no text in the final image:\n    * **Brand & Text Realism (Default):** photorealistic, high detail, no text,\n    * **Watercolor Realism:** watercolor painting, soft edges, artistic, no text,\n    * **Cinematic Realism:** cinematic still, dramatic lighting, high resolution, no text,\n    * **Illustration:** digital illustration, clean lines, vibrant colors, no text,\n    * **Sketch:** pencil sketch, hand-drawn, minimalist, no text,\n* If `brand_guidelines` are provided (e.g., `brand_color`), incorporate them into the `base_prompt` (e.g., \"dominant color #fe5e3a, secondary color #0000FF\").\n* Ensure all generated image prompts will start with this `base_prompt`.\n\n### 4. Generate Image Prompts & Filenames\n* Create a contextually relevant dynamic prompt for each image.\n* Construct the full `image_prompt` by prepending the chosen `base_prompt` to the dynamic prompt.\n    * *Example:* `cinematic still, dramatic lighting, high resolution, no text, a close-up on a chess piece symbolizing strategy`.\n* For each prompt, generate an SEO-suitable and **highly descriptive filename**. This filename must be a \"slug\" (hyphen-separated-lowercase) of what the image shows. It will be used to generate the alt text in the next step.\n    * *Example:* `close-up-on-a-chess-piece-symbolizing-strategy.jpg`\n* Keep the total prompt length < 300 characters.\n\n### 5. Execute Image Generation\n* Call the `image_generation` tool for each constructed prompt.\n* Store the returned URL and the descriptive `file_name` for each generated image.\n\n### 6. Final Assembly\n* Compile all generated image data into the final output package.\n* Verify the correct number of images has been generated.\n\n## Conclusions\n\nReturn a JSON object containing:\n\n* **images:** An array of objects. Each object must contain:\n    * `image_url`: The URL returned from the `image_generation` tool.\n    * `file_name`: The generated SEO-friendly and descriptive file name (e.g., `a-person-meditating-on-a-mountaintop.jpg`).\n\n## Solutions\n\n* If blog content is unclear or corrupted, request clean markdown input.\n* If word count calculation fails, default to 3 images for safety.\n* If image generation fails, retry with a simplified prompt.\n* If URL retrieval fails, note the failure but continue processing other images.\n* If style consistency breaks, regenerate affected images with reinforced style parameters.\n* If content has no clear sections, identify themes based on paragraph groups to generate varied images.\n\n---\n\n### Variable Mapping (for Prompt 1)\n\n* **blog_content:** `{{ $('GetRecord9').item.json['Blog Content'] }}`\n* **style_preferences (optional):** `{{ $('GetBrand2').item.json['Image Style'] }}`\n* **brand_guidelines (optional):** `{{ $('GetBrand2').item.json['Brand Color'] }}`",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1648,
        6896
      ],
      "id": "574f3e93-578e-4f2e-8f51-2d778f96caf1",
      "name": "Image Generation",
      "retryOnFail": true
    },
    {
      "parameters": {
        "content": "## Image Gen\nNano Banana (Gemini-2.5-Flash-Image-Preview)",
        "height": 240,
        "width": 512,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2640,
        6944
      ],
      "id": "a92cb57b-eee6-42ab-a723-46848ca9f691",
      "name": "Sticky Note42"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openRouterApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"google/gemini-2.5-flash-image-preview\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": [\n        {\n          \"type\": \"text\",\n          \"text\": \"{{ $json.image_prompt }}\"\n        }\n      ]\n    }\n  ]\n} ",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2704,
        7040
      ],
      "id": "9d25842e-1a7c-415b-a1f1-e417cd96534d",
      "name": "NanoBanana"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "124f3a7c-735d-4121-a407-b559dbccdbfe",
              "name": "data",
              "value": "={{ $json.choices[0].message.images[0].image_url.url.split(',')[1] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2864,
        7040
      ],
      "id": "0263dd6f-7a8d-4783-addf-58072482e026",
      "name": "ExtractBase64Str"
    },
    {
      "parameters": {
        "jsCode": "const s = $getWorkflowStaticData('global');\n// Clear this execution's data\ns.article_so_far = '';\nreturn {};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5008,
        5232
      ],
      "id": "d4437caa-2e0b-4a0f-a7bd-f91f3cb41bce",
      "name": "DeleteWorkflowData"
    },
    {
      "parameters": {
        "content": "## Setup instructions - [video and assets here](https://www.skool.com/scrapes/classroom/5cb99289?md=6d8ce1cc555741bc9c0304e6278fa6bf)\n\n### Requirements\n- [Airtable base V3](https://airtable.com/app4JYDDtipxT1aRq/shr6zz3d45nYyD7Dt) - 'All tables'\n- [Data For SEO](https://dataforseo.com/?aff=200384) account\n- [Workflow Diagram](https://excalidraw.com/#json=Vi-Pcs_eJ40zu_EHMxbZS,CRMXEnkrbjGmsMzKKgNUPg) (optional)\n- [Openrouter](https://openrouter.ai/) - for LLM / AI models\n\n## Important\nEach section of this workflow has been given a separate color. Each section also has it's own step-by-step setup guide. If anything is not clear - please write a community post in Skool so that we can help to clarify any details missed!\n\n### Setup and personalization\n1. Copy the Airtable base\n2. Set up an Airtable token (if you havent already) - [example video here](https://www.skool.com/scrapes/classroom/5cb99289?md=f95c49b01af544768c1e16bf968bcc79), [create tokens here](https://airtable.com/create/tokens)\n3. Give Token access to the base (same video as in #2)\n4. Give all Airtable nodes access to the correct base\n5. Set up accounts: \n    - Set up [Data for SEO](https://dataforseo.com/?aff=200384) account\n    - Configure API key for Data for SEO (simple with this [video](https://www.tella.tv/video/dataforseo-auth-setup-cnj9)) & make sure all other http requests to `Data for SEO` are using this credential\n    - Set up [Perplexity](https://www.perplexity.ai/) for the research stage\n    - Set up [Openrouter](https://www.openrouter.ai/) for the models\n    - Set up [ImgBB ](https://imgbb.com/) for image storage\n    - Set up Wordpress or Webflow connections for blog posting\n    - Set up [Supabase](http://supabase.com/) if you want the internal linking function - this will store our blog articles as a vector database entry - [follow this video - Supabase / Postgresql DB Setup](https://youtu.be/ti43gv1_f3E?si=4NjqWdCvlDMhiuPx&t=130)\n\n6. Activate the workflow\n7. Change the webhook names (to make them more secure!) - change them in n8n and in Airtable (in the relevant buttons)\n8. Update image_generation tool link to the correct subworkflow\n9. Unpin any data! I've left some data pinned so that you can see the outputs of specific nodes. Unpin these if you're going to Test the workflow from this canvas (doesn't matter if you're testing it from Airtable directly)\n10. Test run & troubleshoot - follow the interface in Airtable step-by-step\n\n\n### Reminders:\n- Check execution logs to see any errors as they occur (errors will not show on Airtable and the field might get stuck in 'Processing'\n- Any yellow notes signify changes between versions (if you previously had V2, you can switch to V3 by following the notes for example)",
        "height": 896,
        "width": 1360,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1392,
        1056
      ],
      "id": "5e2c8b18-0909-41de-ab0a-53ddbce2c642",
      "name": "Sticky Note9"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1280,
        1552
      ],
      "id": "819d502a-929b-4834-8829-2aa9af4c7c9d",
      "name": "Gemini-2.5-Flash"
    },
    {
      "parameters": {
        "content": "\n\n\n\n\n\n\n\n\n\n**Update this to send requests to correct subworkflow**\n",
        "width": 224,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1776,
        7264
      ],
      "id": "047efa6b-f263-4751-b191-f9b25755619f",
      "name": "Sticky Note26"
    },
    {
      "parameters": {
        "model": "openai/gpt-4o",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        3296,
        5888
      ],
      "id": "2886d405-6fb9-42a9-81e8-386397f28bd0",
      "name": "gpt-4o"
    },
    {
      "parameters": {
        "content": "## Update blog content\nFirst draft",
        "height": 336,
        "width": 384,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3104,
        4464
      ],
      "id": "2ad135b0-9800-4c6e-bc9b-a30d1135dba0",
      "name": "Sticky Note44"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook4').item.json.query.record_id }}",
            "Article Status": "Complete"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competition",
              "displayName": "Competition",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Volume",
              "displayName": "Volume",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CPC",
              "displayName": "CPC",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "KW Difficulty",
              "displayName": "KW Difficulty",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Longtail Keywords",
              "displayName": "Get Longtail Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Longtail Status",
              "displayName": "Longtail Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Get Subtopics",
              "displayName": "Get Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Subtopic Status",
              "displayName": "Subtopic Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Subtopics",
              "displayName": "Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Selected Subtopic (Optional)",
              "displayName": "Selected Subtopic (Optional)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Listicle",
                  "value": "Listicle"
                },
                {
                  "name": "Informative",
                  "value": "Informative"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Article Plan",
              "displayName": "Generate Article Plan",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Status",
              "displayName": "Article Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Record_id",
              "displayName": "Record_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content 2",
              "displayName": "Blog Content 2",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article Plans",
              "displayName": "Article Plans",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content copy",
              "displayName": "Blog Content copy",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3168,
        4544
      ],
      "id": "2227dafa-63b5-44ab-9f78-38e88f9a2ebd",
      "name": "UpdateStatus2",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblXTbSTXMbL5JOk5",
          "mode": "list",
          "cachedResultName": "Article Plans",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblXTbSTXMbL5JOk5"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Research": "={{ \n  (() => {\n    const results = $json.output?.research_results || [];\n\n    return [\n      'Questions Answered: ' + results.length + ' | Total Sources: ' + results.reduce((sum, item) => sum + (item.citations ? item.citations.length : 0), 0),\n      '',\n      '---',\n      ''\n    ].join('\\n') + \n    results.map((item, i) => \n      '**' + (i + 1) + '. ' + item.question + '**\\n\\n' +\n      '**Answer:**\\n' + item.answer + '\\n\\n' +\n      \n      '**Citations (' + (item.citations ? item.citations.length : 0) + '):**\\n' + \n      (item.citations || []).map((cite, idx) => '  ' + (idx + 1) + '. ' + cite.url).join('\\n')\n    ).join('\\n\\n---\\n\\n');\n  })()\n}}",
            "Plan": "={{ \n  ['**Title:** ' + $('Content Planner').item.json.output.article_title,\n   '**Style:** ' + $('Content Planner').item.json.output.content_style,\n   '**Target Keyword:** ' + $('Content Planner').item.json.output.target_keyword,\n   '**Semantic Keywords:** ' + $('Content Planner').item.json.output.semantic_keywords.join(', '),\n   '',\n   '**Total Sections:** ' + $('Content Planner').item.json.output.article_structure.length + ' | **Total Words:** ' + $('Content Planner').item.json.output.total_estimated_words,\n   '',\n   '---',\n   ''].join('\\n') + \n  $('Content Planner').item.json.output.article_structure.map((section, i) => \n    '**' + (i + 1) + '. ' + section.header + '**\\n**Type:** ' + section.section_type + ' | **Words:** ' + section.estimated_words + '\\n\\n**Supporting Points:**\\n' + section.supporting_points.map((p, idx) => (idx + 1) + '. ' + p).join('\\n') + '\\n\\n**Supporting Elements:** ' + section.supporting_elements\n  ).join('\\n\\n---\\n\\n') \n}}",
            "Article Title": "={{ $('Content Planner').item.json.output.article_title }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "Article Title",
              "displayName": "Article Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Research",
              "displayName": "Research",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Plan",
              "displayName": "Plan",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3168,
        4736
      ],
      "id": "29220cbd-3354-43de-ae35-f57a45adbd9a",
      "name": "UpdateBlog1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblXTbSTXMbL5JOk5",
          "mode": "list",
          "cachedResultName": "Article Plans",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblXTbSTXMbL5JOk5"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Keyword": "=['{{ $('GetRecord4').item.json.id }}']",
            "id": "={{ $json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Article Title",
              "displayName": "Article Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Research",
              "displayName": "Research",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Plan",
              "displayName": "Plan",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": false
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3360,
        4736
      ],
      "id": "83bbecd5-1252-4438-9b65-7725dd84cf76",
      "name": "Link",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Generate article post\n- Input: `keywords (longtail), blog style inputs, icp, existing blog content`\n- Output: `fully cited blog article ready to review`\n",
        "height": 1312,
        "width": 4784,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        5088
      ],
      "id": "af8c1dfa-50be-4649-be4b-0b13bfc4e772",
      "name": "Sticky Note45"
    },
    {
      "parameters": {
        "content": "## Receive webhook \nObtain Airtable record",
        "height": 234,
        "width": 392,
        "color": 7
      },
      "id": "52f47832-db26-4338-877c-b44458a20d49",
      "name": "Sticky Note46",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        496,
        5616
      ]
    },
    {
      "parameters": {
        "path": "generate-article",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        560,
        5696
      ],
      "id": "c0efcd08-9d9c-4066-9625-b4b3d76ece00",
      "name": "Webhook5",
      "webhookId": "d3711216-4639-4e4e-829e-98a4e72b0c37"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblXTbSTXMbL5JOk5",
          "mode": "list",
          "cachedResultName": "Article Plans",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblXTbSTXMbL5JOk5"
        },
        "id": "={{ $('Webhook5').item.json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        752,
        5696
      ],
      "id": "d8d09827-cc2f-4223-b9c1-89c57103fed3",
      "name": "GetRecord6",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "5fe09867-6884-4e97-8f10-3cf6ab5f7ffb",
      "name": "Sticky Note47",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        896,
        5616
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Article Status'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "528d7dce-c3c3-412c-9924-4cd2bd9a2d95",
              "leftValue": "={{ $json.Research }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "b63df18d-fa61-4ab0-be9d-af0a980489e2",
              "leftValue": "={{ $json.Plan }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        992,
        5696
      ],
      "id": "73383cb4-e39b-4203-9139-2877600eef3a",
      "name": "IfReady1"
    },
    {
      "parameters": {
        "jsCode": "const s = $getWorkflowStaticData('global');\n// Clear this execution's data\ns.article_so_far = '';\nreturn {s};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1200,
        5312
      ],
      "id": "8d1a1925-8296-434b-beaa-fadfd510b91d",
      "name": "DeleteWorkflowData2"
    },
    {
      "parameters": {
        "content": "## Pull brand inputs\n",
        "height": 234,
        "width": 260,
        "color": 7
      },
      "id": "fd0aea8b-faeb-4442-836a-524144dfd07b",
      "name": "Sticky Note36",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1408,
        5856
      ]
    },
    {
      "parameters": {
        "content": "## Standardize inputs\n",
        "height": 240,
        "width": 256,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1680,
        5856
      ],
      "id": "d9f9c271-01a0-4316-928f-f894b1072f3a",
      "name": "Sticky Note48"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ae280d21-f80f-4192-b706-8ebdade4ba71",
              "name": "Seed Keyword",
              "value": "={{ $('GetRecord6').item.json['Seed Keyword'] }}",
              "type": "string"
            },
            {
              "id": "6fb2135b-253e-4951-b58d-3f0072fe6848",
              "name": "Keyword",
              "value": "={{ $('GetRecord6').item.json['Keyword Link'][0] }}",
              "type": "string"
            },
            {
              "id": "8a73a420-ef95-4af6-b092-8646bc68b09b",
              "name": "Subtopics",
              "value": "={{ $('GetRecord6').item.json.Subtopics }}",
              "type": "string"
            },
            {
              "id": "40c81fae-106b-4bd7-9e4c-fd190315469e",
              "name": "Selected Subtopic",
              "value": "={{ $('GetRecord6').item.json['Selected Subtopic (Optional)'] }}",
              "type": "string"
            },
            {
              "id": "281c6898-bc60-400c-8eaf-319b0de63559",
              "name": "Content Style",
              "value": "={{ $('GetRecord6').item.json['Content Style'] ? $('GetRecord6').item.json['Content Style'] : \"Choose style based on content topic and plan\" }}",
              "type": "string"
            },
            {
              "id": "8bf31a3a-048d-4cac-bf11-5761f09ad8a9",
              "name": "Company name",
              "value": "={{ $('GetBrand').item.json['Company name'] }}",
              "type": "string"
            },
            {
              "id": "01f11efc-bfe0-4746-95f7-043fc21cf9e8",
              "name": "Website URL",
              "value": "={{ $('GetBrand').item.json['Website URL'] }}",
              "type": "string"
            },
            {
              "id": "d73624bb-fe9b-4918-a6d9-0d014c2344a1",
              "name": "ICP",
              "value": "={{ $('GetBrand').item.json['Product description'] }}\n{{ $('GetBrand').item.json['Who are the ICP?'] }}\n{{ $('GetBrand').item.json['Pain points / Challenges'] }}\n{{ $('GetBrand').item.json['Key Goals / Objectives'] }}\n{{ $('GetBrand').item.json['How do they currently solve their problems?'] }}",
              "type": "string"
            },
            {
              "id": "130c9bb1-f86f-42f0-b5b7-c92528fe47fa",
              "name": "Brand Voice Guidelines",
              "value": "={{ $json['Brand Voice Guidelines'] }}",
              "type": "string"
            },
            {
              "id": "9fa16b76-cd05-458a-a278-28cc5e66d87d",
              "name": "Image Style",
              "value": "={{ $json['Image Style'] }}",
              "type": "string"
            },
            {
              "id": "e95bb532-3b58-456c-b8a5-2032a333edf1",
              "name": "Brand Color",
              "value": "={{ $json['Brand Color'] }}",
              "type": "string"
            },
            {
              "id": "b10cc2f7-be7d-4afd-a648-e61a72cd8734",
              "name": "Current Year",
              "value": "={{ $now.format('yyyy') }}",
              "type": "string"
            },
            {
              "id": "f49f69d6-aac5-4057-8fb5-be402850d373",
              "name": "Current Date",
              "value": "={{ $now.format('MMMM yyyy') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1760,
        5680
      ],
      "id": "cdfe2ff4-1aad-4dde-a41e-9389e26a2520",
      "name": "SetInputs1"
    },
    {
      "parameters": {
        "content": "## V2: Added to `constraints` section\nContent Agent\n* `Ensure that markdown new lines are respected. For example, when a new header is introduced with hashtags, ensure it is placed on a new line to display correctly in markdown format.`\n* `At the end of each article section, finish with a newline character in markdown (to prevent the issue with incorrectly displaying headings)`",
        "height": 240,
        "width": 464
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2608,
        5872
      ],
      "id": "cad8aefc-ef70-4a7b-a685-ff4beec130d0",
      "name": "Sticky Note37"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 7
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        512,
        11968
      ],
      "id": "178c1aae-1ad8-4152-a83a-283bf7b73404",
      "name": "Per Day",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "filterByFormula": "AND(OR({Upload Status}='Incomplete',{Upload Status}='Error'), { Publish Date})",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        704,
        11968
      ],
      "id": "dd87661d-aee5-4a4e-8c96-dcf670f1f2f8",
      "name": "GetArticles",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Get articles\nOnly if scheduled today, and approved",
        "height": 250,
        "width": 484,
        "color": 7
      },
      "id": "ceb59835-8e67-4d0e-b5a9-1ad1578721ef",
      "name": "Sticky Note49",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        656,
        11872
      ],
      "disabled": true
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetArticles').item.json.id }}",
            "Upload Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1456,
        11728
      ],
      "id": "e7c54a2b-536d-47f2-a6a4-68729dd75052",
      "name": "UpdateArticleStatus",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json[' Publish Date'] }}",
              "rightValue": "={{ $now.format('yyyy-MM-dd') }}",
              "operator": {
                "type": "dateTime",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        944,
        11968
      ],
      "id": "0624cd0f-a00f-4f1c-90af-ef3a62d31f81",
      "name": "Today?"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c8260137-67a5-496e-a957-a5f9f272545e",
              "name": "title",
              "value": "={{ $json.Title }}",
              "type": "string"
            },
            {
              "id": "7066a7a8-5571-4e49-af3d-7147861d3343",
              "name": "markdown_blog",
              "value": "={{ $json['Blog Content'] }}",
              "type": "string"
            },
            {
              "id": "7be8c332-fd34-43fe-b7df-0f0b7649e6be",
              "name": "date_to_schedule",
              "value": "={{ $json[' Publish Date'] }}",
              "type": "string"
            },
            {
              "id": "dae32ff3-82f6-47bb-8610-4391d8b473f0",
              "name": "main_image_url",
              "value": "={{ $json[' Main Image'][0].url }}",
              "type": "string"
            },
            {
              "id": "2802aff5-9bf3-4323-a801-e6ddec01bf97",
              "name": "publish_to",
              "value": "={{ $json[' Platform'] }}",
              "type": "string"
            },
            {
              "id": "61faa8eb-0113-4c79-ad6a-8de4855cab2f",
              "name": "summary",
              "value": "={{ $json.Summary }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1424,
        11952
      ],
      "id": "0c617df3-ca13-4716-bd64-3f85c3c73f1a",
      "name": "PrepareArticle"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c318d465-aeb0-436c-a09c-a76a95a0f727",
              "name": "Research",
              "value": "={{ $('GetRecord6').item.json.Research }}",
              "type": "string"
            },
            {
              "id": "b2b566fa-5d39-41eb-add8-018196c66217",
              "name": "Keyword",
              "value": "={{ $('GetRecord6').item.json['Keyword Link'][0] }}",
              "type": "string"
            },
            {
              "id": "b8c95fbe-7d1c-4d55-ad17-26fa81fff7e4",
              "name": "Content Style",
              "value": "={{ $('GetRecord6').item.json['Content Style'][0] }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "include": "except",
        "excludeFields": "Plan, Research",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1968,
        5680
      ],
      "id": "6ad9a943-7dfd-4d83-9488-5f57298a6cd5",
      "name": "SetJSON"
    },
    {
      "parameters": {
        "content": "## Prepare article assets\n",
        "height": 250,
        "width": 612,
        "color": 7
      },
      "id": "4898c26a-e1b5-4942-849b-2ec77c78cb5a",
      "name": "Sticky Note50",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1168,
        11872
      ],
      "disabled": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1184,
        11952
      ],
      "id": "61790690-d7aa-445a-968d-0035ce5c5ae8",
      "name": "One at a Time"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.publish_to }}",
                    "rightValue": "Wordpress",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "7bfacec9-b4e7-4ed9-b182-40326d4c7373"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "WORDPRESS"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "5ccab49e-b2a9-49c3-ac9c-c92dc61d7e12",
                    "leftValue": "={{ $json.publish_to }}",
                    "rightValue": "Webflow",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "WEBFLOW"
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        1632,
        11936
      ],
      "id": "a8d8e867-78ca-4803-bdee-a5cc62f4197a",
      "name": "Switch"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetArticles').item.json.id }}",
            "Upload Status": "Error",
            "Error Description": "Select a platform to publish to (e.g. Wordpress, Webflow) and try again"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1840,
        12176
      ],
      "id": "2fbc6253-5cd7-4a84-9865-08000a29d85a",
      "name": "ErrorMessage",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## WORDPRESS\nUpload feature image -> convert to HTML -> wrap images so they look good -> publish",
        "height": 272,
        "width": 912,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2000,
        11680
      ],
      "id": "76a71476-25af-4c60-b2e9-80870931d46b",
      "name": "Sticky Note51"
    },
    {
      "parameters": {
        "content": "## Wordpress\n### Important: How to set up your wordpress username and application password\n\nFirstly, the documentation suggests that you need to either 1) self-host your wordpress site (easy to set up on elest.io) or 2) Be on a Wordpress BUSINESS plan or higher to use the REST API. One of those needs to be true before following the instructions below (trust me, I've tried!!)\n\nWordpress uses a Basic Authentication type (username, password)\nSelf-hosted\nIf you are self-hosted, this'll be simpler as the application password is easier to find -> users -> application password -> jump to steps 7 and 8 below.\n![](https://i.ibb.co/nqk0jZM3/Screenshot-1600.png)\n\nHosted on Wordpress\nFind it by:\n1. Logging in to your WordPress dashboard - https://wordpress.com/me/account\n2. Get the `username` from that page (account settings)\n![](https://i.ibb.co/JR8vjQnb/Screenshot-1594.png)\n3. Go to the security page/tab\n4. Setup a password, setup your email & set up 2 factor authentication (REQUIRED). NOTE - this password is NOT your application password.\n![](https://i.ibb.co/3mY8WYhp/Screenshot-1592.png)\n5. Stay on the security tab, refresh & scroll down to Application Passwords.\n6. Enter a descriptive name, e.g. n8n Automation. Click Add New Application Password and copy the generated key.\n![](https://i.ibb.co/S47gJn63/Screenshot-1593.png)\n7. Come back to n8n, open up the Wordpress node (not the http request - a new node), add a credential\nEnter the `username`, `application password` and Wordpress site url e.g. https://scrapesai.com/\n![](https://i.ibb.co/XZ5NP3zt/Screenshot-1597.png)\n8. In the http request node, enter your site url -> select predefined credential type -> Wordpress API\n![](https://i.ibb.co/VW1HD5jr/Screenshot-1599.png)\n\nYou might be wondering why we use a http request instead of the inbuilt Wordpress node? It's because the in-built node does not allow us to insert an Excerpt/Summary when we upload our blog articles (http requests do).\n\nSeek further assistance here if you cannot find the application password: https://wordpress.com/support/security/two-step-authentication/application-specific-passwords/\n",
        "height": 752,
        "width": 592
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3360,
        11552
      ],
      "id": "b5980974-2458-4b74-8ee2-aea083838137",
      "name": "Sticky Note53"
    },
    {
      "parameters": {
        "mode": "markdownToHtml",
        "markdown": "={{ $('Switch').item.json.markdown_blog }}",
        "destinationKey": "html_blog",
        "options": {}
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        2368,
        11792
      ],
      "id": "de3cefcb-fcc1-430a-b3a1-b146e5669896",
      "name": "Convert to HTML"
    },
    {
      "parameters": {
        "jsCode": "// Loop over all input items\nfor (const item of $input.all()) {\n  const html = item.json.html_blog || '';\n\n  // Wrap each <img> and enforce width control with inline style\n  const wrapped = html.replace(\n    /<img([^>]*)>/g,\n    '<figure class=\"wp-block-image alignnone\"><img$1 style=\"max-width:100%; height:auto; display:block; margin:0 auto;\"></figure>'\n  );\n\n  // Store in a new field\n  item.json.wrapped_html = wrapped;\n}\n\nreturn $input.all();\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2560,
        11792
      ],
      "id": "e1297e86-796c-47fc-b9f7-8a141321114c",
      "name": "WrapImages"
    },
    {
      "parameters": {
        "url": "={{ $json.main_image_url }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2032,
        11792
      ],
      "id": "ca66a6e0-3c8a-4447-94a3-9bce108fe37c",
      "name": "FeaturedImage"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://wordpress-n8n-u28170.vm.elestio.app/wp-json/wp/v2/media",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Disposition",
              "value": "attachment; filename=image.jpg"
            }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2192,
        11792
      ],
      "id": "cbde897d-c950-440c-9314-13249c0a2296",
      "name": "UploadImage"
    },
    {
      "parameters": {
        "content": "status = `draft`\nstatus = `publish`",
        "height": 80,
        "width": 150
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2736,
        11744
      ],
      "id": "dc43e2a4-657c-44da-8fcd-0c39beaa75c1",
      "name": "Sticky Note54"
    },
    {
      "parameters": {
        "content": "## WEBFLOW\nConvert to HTML -> Format newlines and tables -> publish (with images)\n",
        "height": 208,
        "width": 912,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2000,
        11968
      ],
      "id": "f3d4dba9-01c8-45ba-a601-30d80b897738",
      "name": "Sticky Note58"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetArticles').item.json.id }}",
            "Upload Status": "Complete",
            "Uploaded Date": "={{ $now.format('yyyy-MM-dd') }}",
            " Publish Date": "=",
            "Article URL": "={{ $json.link }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2992,
        11792
      ],
      "id": "755aee2d-34ce-402a-a6a0-bcc2776d27c7",
      "name": "UploadedDate",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Wordpress - Pull Published Articles & Upload to Index\n",
        "height": 250,
        "width": 852,
        "color": 7
      },
      "id": "4440c59e-363b-4480-b5ee-c4fd3977729d",
      "name": "Sticky Note59",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        656,
        13536
      ],
      "disabled": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ca59a742-0341-4176-a881-c264185c05fb",
              "name": "Title",
              "value": "={{ $json.title.rendered }}",
              "type": "string"
            },
            {
              "id": "0d0d24cf-3492-46dd-afd3-77a494497d16",
              "name": "Summary",
              "value": "={{ $json.excerpt.rendered }}",
              "type": "string"
            },
            {
              "id": "29f2f946-719a-4403-8ed6-06427c731b06",
              "name": "Blog Id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "68ba3bb8-e0df-40e9-a135-8328eeebf0f8",
              "name": "Uploaded Date",
              "value": "={{ $json.lastPublished ? $json.lastPublished.toDateTime().format('yyyy-MM-dd') : $now.toDateTime().format('yyyy-MM-dd') }}",
              "type": "string"
            },
            {
              "id": "c06535dc-ceea-48a9-899e-72b75f83347c",
              "name": "Last Updated",
              "value": "={{ $json.modified ? $json.modified.toDateTime().format('yyyy-MM-dd') : '' }}",
              "type": "string"
            },
            {
              "id": "af863e30-7b8b-470c-b6db-f0f1ecaf997c",
              "name": "Platform",
              "value": "Wordpress",
              "type": "string"
            },
            {
              "id": "9210f7dd-40a9-4e55-a9c0-b7708edb65a8",
              "name": "Article URL",
              "value": "={{ $json.link }}",
              "type": "string"
            },
            {
              "id": "a9d2223d-4ba6-40af-96ae-1129a6051627",
              "name": "Slug",
              "value": "={{ $json.slug }}",
              "type": "string"
            },
            {
              "id": "a048c334-b264-472c-a85b-35aa3fcc6129",
              "name": "Content",
              "value": "={{ $json.content.rendered }}",
              "type": "string"
            },
            {
              "id": "520b7214-b9cf-4dfd-bfd1-b880f53c0562",
              "name": "Featured Image Id",
              "value": "={{ $json.featured_media }}",
              "type": "string"
            },
            {
              "id": "3b161fa4-130d-420f-9960-be2e5e388e59",
              "name": "OG Image",
              "value": "={{ $json.yoast_head_json.og_image[0].url }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1184,
        13616
      ],
      "id": "6d9077a4-9db2-4d4f-9589-07743db47872",
      "name": "BlogDetails"
    },
    {
      "parameters": {
        "html": "={{ $json.Content }}",
        "destinationKey": "markdown_blog",
        "options": {}
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        1360,
        13616
      ],
      "id": "1783157d-427f-45d1-b136-9e87592b4ce9",
      "name": "Markdown"
    },
    {
      "parameters": {
        "content": "## Image generation for blogs\nActivated by the blog writer\n",
        "height": 384,
        "width": 1536,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2416,
        6832
      ],
      "id": "ce8c6f5b-9392-45c4-a550-0f1f759b7aad",
      "name": "Sticky Note60"
    },
    {
      "parameters": {
        "content": "## Upload blog posts\n- Input: `Article content including image assets, summaries + title`\n- Output: `Blog article on chosen platform (published or draft)`\n",
        "height": 832,
        "width": 2880,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        448,
        11552
      ],
      "id": "f2d9ba91-e6e2-45f6-9362-c6490bf84913",
      "name": "Sticky Note61"
    },
    {
      "parameters": {
        "path": "find-suggestions",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        496,
        10272
      ],
      "id": "89251460-1d9c-4883-befa-d26aab7fbfe2",
      "name": "Webhook6",
      "webhookId": "3ba410b0-3233-4688-9813-caf490869bec"
    },
    {
      "parameters": {
        "content": "## Internal Linking Suggestions\n- Input: `Draft article content that you want suggestions for`\n- Output: `4-6 internal link suggestions`\n",
        "height": 768,
        "width": 2880,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        448,
        9920
      ],
      "id": "9f895ae6-2f65-49b2-ba7b-96528b24689e",
      "name": "Sticky Note62"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "id": "={{ $('Webhook6').item.json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        688,
        10272
      ],
      "id": "85dbcb31-792a-458b-a5bb-f82f9f7caf04",
      "name": "GetRecord7",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "10738c51-ef75-4317-a818-6f6a161ebdf1",
      "name": "Sticky Note63",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        832,
        10192
      ],
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Title'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "528d7dce-c3c3-412c-9924-4cd2bd9a2d95",
              "leftValue": "={{ $json['Blog Content'] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        928,
        10272
      ],
      "id": "d8c784ac-bd0d-4683-adea-e2d6695dd05f",
      "name": "IfReady2"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord7').item.json.id }}",
            "Internal Link Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Suggest Internal Links",
              "displayName": "Suggest Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Internal Link Suggestions",
              "displayName": "Internal Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Internal Link Status",
              "displayName": "Internal Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Completed",
                  "value": "Completed"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1120,
        10048
      ],
      "id": "de3a4087-c0ff-410b-8ab1-7fb4cc23a4b2",
      "name": "UpdateLinkStatus",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Search the vector database\nFor similarities, prioritised by recency",
        "height": 384,
        "width": 768,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1664,
        10176
      ],
      "id": "54625fdb-33f6-4602-96f3-7914b130615e",
      "name": "Sticky Note64"
    },
    {
      "parameters": {
        "content": "## Index of published blog posts\n- Input: `New blog articles are pulled daily and added to the index.`\n- Output: `Added into Airtable, which triggers another flow adding it to the vector DB (for finding internal links)`\n",
        "height": 928,
        "width": 2224,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        448,
        13408
      ],
      "id": "3b5e8890-5f74-4403-b3fc-3e6d744e8afd",
      "name": "Sticky Note65"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "authentication": "airtableTokenApi",
        "baseId": {
          "__rl": true,
          "value": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0/viwWIHM0rXbj8wkTQ?blocks=hide",
          "mode": "url"
        },
        "tableId": {
          "__rl": true,
          "value": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0/viwWIHM0rXbj8wkTQ?blocks=hide",
          "mode": "url"
        },
        "triggerField": "New_Row_Added",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.airtableTrigger",
      "typeVersion": 1,
      "position": [
        528,
        8576
      ],
      "id": "b56772a8-2bb2-4fb0-a711-a009ec9e567c",
      "name": "NewArticleAdded",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<article>\nbenefits of artificial intelligence in business automation\n</article>",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=Retrieve chunks from the vector store that are related to the article sent by the user. Use the required JSON format. Output one array item for each chunk."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        -912,
        8896
      ],
      "id": "f0d88b99-19ab-46cb-8c2f-3ce18aae3316",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "content": "## Retrieval\nTest out the retrieval by searching context",
        "height": 480,
        "width": 840,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1088,
        8784
      ],
      "id": "8e7a4871-206b-469f-bd62-4e5a79262e7a",
      "name": "Sticky Note66"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -848,
        9280
      ],
      "id": "42182053-8605-429f-9f53-546482e72448",
      "name": "Embeddings OpenAI2"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Retrieve information from the vector store.",
        "tableName": "documents_pg",
        "topK": 25,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        -848,
        9120
      ],
      "id": "64ef4a9a-4a31-49ec-9720-380f04b70101",
      "name": "Postgres PGVector Store"
    },
    {
      "parameters": {
        "jsonMode": "expressionData",
        "jsonData": "={{ $json.content || $json.data || $json.text || $json.concatenated_data }}",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "=record_id",
                "value": "={{ $('NewArticleAdded').item.json.id }}"
              },
              {
                "name": "article_title",
                "value": "={{ $('NewArticleAdded').item.json.fields.Title }}"
              },
              {
                "name": "blog_id",
                "value": "={{ $('NewArticleAdded').item.json.fields['Blog Id'] }}"
              },
              {
                "name": "article_url",
                "value": "={{ $('NewArticleAdded').item.json.fields['Article URL'] }}"
              },
              {
                "name": "article_upload_date",
                "value": "={{ $('NewArticleAdded').item.json.fields['Uploaded Date'] }}"
              }
            ]
          }
        }
      },
      "id": "7a05e026-8107-4b18-b2e2-a4f61db9fd24",
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        1584,
        8752
      ]
    },
    {
      "parameters": {
        "model": "text-embedding-3-small",
        "options": {}
      },
      "id": "0dca9924-1e0e-4b57-bee8-eed5c3c74c8a",
      "name": "Embeddings OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1,
      "position": [
        1408,
        8768
      ]
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": "documents_pg",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        1440,
        8576
      ],
      "id": "44f800c1-8666-4daf-b97b-fad548da003a",
      "name": "Postgres PGVector Store1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        1600,
        8896
      ],
      "id": "99138134-242c-4775-97cf-5842de8f0c0a",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {
        "code": {
          "execute": {
            "code": "const { PromptTemplate } = require('@langchain/core/prompts');\n\nconst documentContent = $input.item.json?.fields?.Content || $input.item.json?.text;\nconst maxChunkSize = 1000;\nconst minChunkSize = 400;\n\nif (!documentContent) {\n    throw new Error('No document found in input');\n}\n\nconst llm = await this.getInputConnectionData('ai_languageModel', 0);\n\nfunction cleanText(text) {\n    return text.replace(/\\s+/g, ' ').trim();\n}\n\nconst chunks = [];\nlet remainingText = cleanText(documentContent);\nlet chunkNumber = 1;\n\nif (remainingText.length <= maxChunkSize) {\n    chunks.push({\n        content: remainingText,\n        chunk: chunkNumber,\n        chunk_size: remainingText.length\n    });\n} else {\n    while (remainingText) {\n        const textToAnalyze = remainingText.substring(0, maxChunkSize);\n        \n        const promptText = `You are analyzing a document to find the best transition point to split it into meaningful sections.\n\nYour goal: Keep related content together and split where topics naturally transition.\n\nRead this text carefully and identify where one topic/section ends and another begins:\n\n${textToAnalyze}\n\nFind the best transition point that occurs BEFORE character position ${maxChunkSize}.\n\nLook for:\n- Section headings or topic changes\n- Paragraph boundaries where the subject shifts\n- Complete conclusions before new ideas start\n- Natural breaks between different aspects of the content\n\nOutput the LAST WORD that appears right before your chosen split point.\nJust the single word itself, nothing else.\nExample: If you want to split after \"The company was founded in 2022.\" then output: \"2022\"`;\n        \n        const prompt = PromptTemplate.fromTemplate(promptText);\n        const chain = prompt.pipe(llm);\n        \n        let breakPoint = maxChunkSize;\n        \n        try {\n            const response = await chain.invoke();\n            const responseText = response.content || response.text || response.toString();\n            const breakWord = responseText.trim();\n            \n            if (breakWord) {\n                // Find the last occurrence of this word in the text to analyze\n                const wordIndex = textToAnalyze.lastIndexOf(breakWord);\n                if (wordIndex !== -1) {\n                    // Split after the word (including any punctuation that follows)\n                    breakPoint = wordIndex + breakWord.length;\n                    // Move past any punctuation or single space after the word\n                    while (breakPoint < textToAnalyze.length && \n                           (textToAnalyze[breakPoint] === '.' || \n                            textToAnalyze[breakPoint] === '!' || \n                            textToAnalyze[breakPoint] === '?' || \n                            textToAnalyze[breakPoint] === ',' || \n                            textToAnalyze[breakPoint] === ';' || \n                            textToAnalyze[breakPoint] === ':' || \n                            textToAnalyze[breakPoint] === ' ')) {\n                        breakPoint++;\n                        // Stop after moving past one space\n                        if (textToAnalyze[breakPoint - 1] === ' ') break;\n                    }\n                    breakPoint = Math.min(breakPoint, maxChunkSize);\n                }\n            }\n        } catch (error) {\n            console.log('LLM failed to determine breakpoint, using max size:', error.message);\n            breakPoint = maxChunkSize;\n        }\n        \n        const chunk = remainingText.substring(0, breakPoint).trim();\n        \n        if (chunk) {\n            chunks.push({\n                content: chunk,\n                chunk: chunkNumber,\n                chunk_size: chunk.length\n            });\n            chunkNumber++;\n        }\n        \n        remainingText = remainingText.substring(breakPoint).trim();\n        \n        if (!remainingText) {\n            break;\n        }\n    }\n}\n\n// Merge chunks that are below minimum size with adjacent chunks if possible\nlet i = 0;\nwhile (i < chunks.length) {\n    if (chunks[i].chunk_size < minChunkSize) {\n        // Try to merge with next chunk first if it exists and won't exceed max\n        if (i + 1 < chunks.length && \n            chunks[i].chunk_size + chunks[i + 1].chunk_size <= maxChunkSize) {\n            // Merge current with next\n            chunks[i].content += ' ' + chunks[i + 1].content;\n            chunks[i].chunk_size = chunks[i].content.length;\n            chunks.splice(i + 1, 1);\n            // Don't increment i, check this chunk again in case it's still small\n        } \n        // Otherwise try to merge with previous chunk if it exists and won't exceed max\n        else if (i > 0 && \n                 chunks[i - 1].chunk_size + chunks[i].chunk_size <= maxChunkSize) {\n            // Merge current into previous\n            chunks[i - 1].content += ' ' + chunks[i].content;\n            chunks[i - 1].chunk_size = chunks[i - 1].content.length;\n            chunks.splice(i, 1);\n            // Don't increment i, we removed current chunk\n        } else {\n            // Can't merge without exceeding max, move on\n            i++;\n        }\n    } else {\n        i++;\n    }\n}\n\nconst returnData = chunks.map(chunk => ({\n    json: chunk\n}));\n\nreturn returnData;"
          }
        },
        "inputs": {
          "input": [
            {
              "type": "ai_languageModel",
              "maxConnections": 1,
              "required": true
            },
            {
              "type": "main",
              "required": true
            }
          ]
        },
        "outputs": {
          "output": [
            {
              "type": "main"
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.code",
      "typeVersion": 1,
      "position": [
        1040,
        8576
      ],
      "id": "f4a6a9ec-ff2e-4134-b014-22ef40fc5861",
      "name": "LangChain Code"
    },
    {
      "parameters": {
        "content": "gpt-4.1 because of huge context window for long articles",
        "height": 80,
        "width": 208,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        992,
        8912
      ],
      "id": "5b9a8a12-bdad-44b1-83af-da60d209c0c8",
      "name": "Sticky Note69"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT *\nFROM documents_pg\nWHERE metadata->>'record_id' = '{{ $json.id }}';",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -1024,
        8544
      ],
      "id": "85704cc5-81fc-4507-9962-073030265b1f",
      "name": "Select all chunks from specific article"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "DELETE\nFROM documents_pg\nWHERE metadata->>'record_id' = '{{ $json.id }}';",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -800,
        8544
      ],
      "id": "a06e94c0-6857-43a2-9d3a-5eb041d8393e",
      "name": "Delete article from Vector Database"
    },
    {
      "parameters": {
        "content": "### Helper nodes\nIn case you need to remove data from your supabase table at any point. It uses airtble's record_id, but you can easily swap for blog_id.",
        "height": 320,
        "width": 480,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1088,
        8432
      ],
      "id": "9e6dac0b-3d2f-4fbc-8b7d-0ff908572dd0",
      "name": "Sticky Note71"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5-mini",
          "mode": "list",
          "cachedResultName": "gpt-5-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -1008,
        9120
      ],
      "id": "e47aad61-512c-4853-8371-e6dd87b08f99",
      "name": "4.1-mini"
    },
    {
      "parameters": {
        "mode": "load",
        "tableName": "documents_pg",
        "prompt": "={{ $json['search_query'] }}",
        "topK": 25,
        "useReranker": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        1712,
        10272
      ],
      "id": "8b538c48-f979-4a2f-9e4e-31fc7387f8ba",
      "name": "Postgres PGVector Store2"
    },
    {
      "parameters": {
        "model": "text-embedding-3-small",
        "options": {}
      },
      "id": "8b87d973-0734-45a4-b248-5c13ef8a88b8",
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1,
      "position": [
        1680,
        10432
      ]
    },
    {
      "parameters": {
        "compare": "selectedFields",
        "fieldsToCompare": "document.metadata.record_id",
        "options": {}
      },
      "type": "n8n-nodes-base.removeDuplicates",
      "typeVersion": 2,
      "position": [
        2288,
        10272
      ],
      "id": "a789f0f8-d5e0-4835-82cd-72c44d561148",
      "name": "Remove Duplicates"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"chunks\": [\n    {\n      \"metadata\": {\n        \"blog_id\": 26,\n        \"record_id\": \"rec1EjIHrheYdxkwX\",\n        \"article_url\": \"https://wordpress-n8n-u28170.vm.elestio.app/2025/10/23/8-essential-best-practices-for-designing-a-high-impact-ai-automation-workflow/\",\n        \"article_title\": \"8 Essential Best Practices for Designing a High-Impact AI Automation Workflow\",\n        \"article_upload_date\": \"2025-10-22\"\n      },\n      \"score\": 0.433663274864153\n    },\n    {\n      \"metadata\": {\n        \"blog_id\": 27,\n        \"record_id\": \"rec7LpQJTyfDZvP0R\",\n        \"article_url\": \"https://wordpress-n8n-u28170.vm.elestio.app/2025/10/21/7-proven-strategies-to-optimize-your-ai-automation-systems/\",\n        \"article_title\": \"7 Proven Strategies to Optimize Your AI Automation Systems\",\n        \"article_upload_date\": \"2025-10-21\"\n      },\n      \"score\": 0.417892635128444\n    }\n  ]\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -544,
        9120
      ],
      "id": "67df1ebb-3bc8-4fd9-80d0-35584b77dfef",
      "name": "Structured Output Parser2"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -512,
        9264
      ],
      "id": "30b24225-307a-4960-9e8c-38acae1238dc",
      "name": "Google Gemini Chat Model"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<article>\n{{ $json['Blog Content'] }}\n</article>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "Based on the article content sent by the user, generate a 4-6 different search queries to be used in a RAG Vector Store to find related content.\nOutput only the query for each."
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        1184,
        10272
      ],
      "id": "598c9e28-273a-47b8-9c14-f46054aa0da7",
      "name": "Generate RAG query"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"search_queries\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"minItems\": 4,\n      \"maxItems\": 6,\n      \"description\": \"Array of search query strings\"\n    }\n  },\n  \"required\": [\"search_queries\"],\n  \"additionalProperties\": false\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1360,
        10432
      ],
      "id": "cf747dd0-6288-456a-9534-b9d889b3c25b",
      "name": "Structured Output Parser5"
    },
    {
      "parameters": {
        "sortFieldsUi": {
          "sortField": [
            {
              "fieldName": "score",
              "order": "descending"
            },
            {
              "fieldName": "document.metadata.article_upload_date",
              "order": "descending"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.sort",
      "typeVersion": 1,
      "position": [
        2064,
        10272
      ],
      "id": "b4d051af-70e2-4852-8f55-c9c295185f65",
      "name": "Sort by relevance & upload_date"
    },
    {
      "parameters": {
        "content": "## Load Context into Vector DB\nCreates the documents table automatically inside supabase",
        "height": 416,
        "width": 416,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1376,
        8480
      ],
      "id": "9116ba39-11c7-40d2-84fe-f65fed9af8b5",
      "name": "Sticky Note67"
    },
    {
      "parameters": {
        "content": "## Load Context into Vector DB\nCreates the documents table automatically inside supabase",
        "height": 416,
        "width": 416,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        944,
        8480
      ],
      "id": "24087ac6-b9b2-4599-872e-80938e3c9832",
      "name": "Sticky Note72"
    },
    {
      "parameters": {
        "content": "## Load New Article into Vector Store\nThis is done entirely for internal linking. i.e. it semantically splits context from a new article and stores it ready for searching (to provide the most relevant internal links)\n- Input: `Splits context from a newly updated article`\n- Output: `Stores it as a vector ready for semantic search (to find relevant links basically)`",
        "height": 672,
        "width": 1536,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        8352
      ],
      "id": "24e82a06-d6e8-46df-b281-e65610458bee",
      "name": "Sticky Note68"
    },
    {
      "parameters": {
        "content": "## Helper functions\nFor the vector database",
        "height": 1072,
        "width": 1024,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1136,
        8352
      ],
      "id": "0e4e3f46-dd35-4e39-ab3a-3bc688e81d3e",
      "name": "Sticky Note73"
    },
    {
      "parameters": {
        "fieldToSplitOut": "output.search_queries",
        "options": {
          "destinationFieldName": "search_query"
        }
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1488,
        10272
      ],
      "id": "c4e4cca0-283c-4c72-a984-32f5bf7fbfe9",
      "name": "Split Out Queries"
    },
    {
      "parameters": {
        "maxItems": 10
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        2496,
        10272
      ],
      "id": "0b833775-637d-4dec-af30-f196328b7494",
      "name": "Limit to 10"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        784,
        8576
      ],
      "id": "beeeace5-3c73-4e8b-a8d4-b8d87129009c",
      "name": "One at a time"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<Inputs>\n- Article Title:\n{{ $('GetRecord7').first().json.Title }}\n\n- Article content (full text to be analyzed):\n{{ $('GetRecord7').first().json['Blog Content'] }}\n\n- List of suggested internal links:\n{{ JSON.stringify($json.document.map(doc => ({\n  record_id: doc.metadata.record_id,\n  article_url: doc.metadata.article_url,\n  article_title: doc.metadata.article_title,\n  article_upload_date: doc.metadata.article_upload_date,\n  blog_id: doc.metadata.blog_id,\n  content: doc.pageContent\n})), null, 2) }}\n  \n</Inputs>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<Role>\nYou are an Internal Link Placement Specialist that analyzes article content and strategically integrates relevant internal links to enhance SEO and user navigation. Your purpose is to select and place 4-6 links from a provided list of up to 10 suggestions, ensuring optimal distribution and natural integration within existing article text.\n</Role>\n\n<Constraints>\n- Accept only up to 10 suggested links with relevance scores as input\n- Must select between 4-6 links for placement\n- First link must be placed within the first 200 words of the article\n- Maximum of 1 internal link per 200-300 words\n- Never link to the same post multiple times within a single article\n- Use only existing text from the article as anchor text. Take the words verbatum.\n- Ensure the anchor text is no more than around ~6 words. If the sentence is longer, link to the most relevant of the words only.\n- Vary anchor text patterns - avoid repetitive keyword-only anchoring\n- Maintain natural reading flow without disrupting content quality\n- Preserve original article meaning and context\n- Ensure it's not overriding an existing linked sentence within the article\n- Do not make up destination URLs, make sure you only use those you receive in the inputs.\n</Constraints>\n\n<Inputs>\n- Article content (full text to be analyzed)\n- Article Title:\n- List of up to 15 suggested internal links with:\n  - URL\n  - Title/description\n</Inputs>\n\n<Instructions>\n1. Analyze the provided article content:\n    Calculate total word count\n    Identify key topics and themes\n    Map content sections and natural break points\n\n2. Evaluate suggested links:\n    Sort by relevance score\n    Assess topical alignment with article sections\n    Check for duplicate destinations\n\n3. Select 4-6 optimal links:\n    Prioritize highest relevance scores\n    Ensure topic diversity\n    Consider user journey and value\n\n4. Plan link distribution:\n    Place first link within opening 200 words\n    Calculate spacing intervals (200-300 words between links)\n    Map remaining links to relevant sections\n\n5. Identify anchor text opportunities:\n    Scan for naturally occurring phrases matching link topics\n    Select varied text lengths (2-7 words)\n    Avoid generic phrases like \"click here\" or \"learn more\"\n    Use descriptive, contextual phrases from existing content\n\n6. Generate final placement recommendations:\n    Specify exact text to be hyperlinked\n    Provide character/word position for each placement\n    Include the destination URL for each link\n</Instructions>\n\n<Conclusions>\n- Ordered list of 4-6 selected links with:\n  - Exact anchor text from article\n  - Destination URL\n  - Relevance score\n  - Reason for link\n</Conclusions>\n\n<Solutions>\n- If article is too short (<800 words), reduce minimum links to 2-3\n- If no suitable anchor text exists in first 200 words, use the most relevant phrase available\n- If suggested links have identical destinations, select only the highest scoring variant\n- If relevance scores are all below 50, flag for manual review before placement\n- If existing article already contains internal links, factor these into the 200-300 word spacing rule\n- If natural anchor text cannot be found, skip that link rather than force unnatural placement\n</Solutions>"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        2832,
        10272
      ],
      "id": "658b435c-f016-432e-bbe9-295c163c164d",
      "name": "Suggest Anchor Text"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2816,
        10400
      ],
      "id": "84474403-9280-4f6f-9135-8bffbfe6b244",
      "name": "Gemini-2.5-Pro"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"selected_links\": {\n      \"type\": \"array\",\n      \"minItems\": 4,\n      \"maxItems\": 6,\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"anchor_text\": {\n            \"type\": \"string\"\n          },\n          \"article_title\": {\n            \"type\": \"string\"\n          },\n          \"article_upload_date\": {\n            \"type\": \"string\"\n          },\n          \"destination_url\": {\n            \"type\": \"string\",\n            \"description\": \"The URL of the old article to link to. Taken verbatim from the input.\"\n          },\n          \"relevance_score\": {\n            \"type\": \"number\"\n          },\n          \"reason_for_link\": {\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\"anchor_text\", \"article_title\", \"article_upload_date\", \"destination_url\", \"relevance_score\", \"reason_for_link\"]\n      }\n    }\n  },\n  \"required\": [\"selected_links\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3008,
        10400
      ],
      "id": "9c3fe106-5090-4f6d-b675-53030ad3b82c",
      "name": "Structured Output Parser6"
    },
    {
      "parameters": {
        "content": "## Create link suggestions\n",
        "height": 224,
        "width": 656,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2624,
        10192
      ],
      "id": "d59b8c30-0c33-4678-9267-4805107ec0d4",
      "name": "Sticky Note74"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "document"
            },
            {
              "fieldToAggregate": "score"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        2672,
        10272
      ],
      "id": "ca001ecd-3abc-4724-a09d-b435f51cebdb",
      "name": "Aggregate2"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord7').first().json.id }}",
            "Internal Link Status": "Drafted",
            "Internal Link Suggestions": "={{ $json.output.selected_links.map((link, i) => `**${i + 1}. ${link.article_title}**\n**Anchor Text:** \\`\\`${link.anchor_text}\\`\\`\n**Uploaded:** ${link.article_upload_date}\n**Reason:** ${link.reason_for_link}\n**Score:** ${link.relevance_score}/100\n**[URL](${link.destination_url})**`).join('\\n\\n---\\n\\n') }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Suggest Internal Links",
              "displayName": "Suggest Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Internal Link Status",
              "displayName": "Internal Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Internal Link Suggestions",
              "displayName": "Internal Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Add Internal Links",
              "displayName": "Add Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3152,
        10272
      ],
      "id": "df4e6fe1-7fcd-47ab-b996-730d9767ac12",
      "name": "UpdateLinking",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "path": "add-internal-links",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        480,
        10976
      ],
      "id": "8930345b-ac9e-4583-8428-27ecae6c0f73",
      "name": "Webhook7",
      "webhookId": "0bb1f614-e9e7-4c99-8015-b5576f5cafef"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "id": "={{ $('Webhook7').item.json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        672,
        10976
      ],
      "id": "ac5510cf-403e-4fc1-8be9-78a23c6a7b07",
      "name": "GetRecord8",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "1108f248-9bed-4786-b014-c5d23de3b761",
      "name": "Sticky Note75",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        816,
        10896
      ],
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Internal Link Suggestions'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "528d7dce-c3c3-412c-9924-4cd2bd9a2d95",
              "leftValue": "={{ $json['Blog Content'] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        912,
        10976
      ],
      "id": "b5d809ca-1ff2-4982-b902-af3ce699271a",
      "name": "IfReady3"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord8').item.json.id }}",
            "Internal Link Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Suggest Internal Links",
              "displayName": "Suggest Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Internal Link Suggestions",
              "displayName": "Internal Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Internal Link Status",
              "displayName": "Internal Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Completed",
                  "value": "Completed"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1120,
        10896
      ],
      "id": "334d57f6-a4fc-42bf-b727-26662b4f7219",
      "name": "UpdateLinkStatus1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Add Internal Links\n- Input: `Internal link suggestions and original draft article`\n- Output: `Adds links directly to content`\n",
        "height": 672,
        "width": 2208,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        448,
        10784
      ],
      "id": "1f92906f-b7cb-4e45-a8e7-4f5091b3b0f0",
      "name": "Sticky Note76"
    },
    {
      "parameters": {
        "jsCode": "// This helper function escapes special regex characters.\nfunction escapeRegExp(string) {\n  // $& means the whole matched string\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n// Loop over all input items\nfor (const item of $input.all()) {\n  \n  // --- 1. Get Data ---\n  let markdownText = item.json.full_markdown_text;\n  \n  let linksArray = [];\n  if (item.json.output && Array.isArray(item.json.output.selected_links)) {\n    linksArray = item.json.output.selected_links;\n  } else if (Array.isArray(item.json.selected_links)) {\n    linksArray = item.json.selected_links;\n  }\n\n  // --- 2. Process Links ---\n  if (markdownText && linksArray.length > 0) {\n    \n    for (const link of linksArray) {\n      \n      // 1. The \"clean\" anchor text from the AI\n      // e.g., \"how to choose an automation partner\"\n      const plainAnchor = link.anchor_text;\n\n      // 2. The new markdown link to insert\n      // e.g., \"[how to choose an automation partner](https://...)\"\n      const markdownLink = `[${plainAnchor}](${link.destination_url})`;\n\n      // 3. Escape the anchor text so it can be safely used in a Regex\n      const escapedAnchor = escapeRegExp(plainAnchor);\n\n      // 4. Create a new Regular Expression\n      // This looks for the text in multiple formats:\n      // - ``text`` (double backticks)\n      // - `text` (single backticks)\n      // - **text** (bold)\n      // - *text* (italic) - Note: needs \\ to escape the *\n      // - text (plain)\n      // The \"g\" flag ensures it replaces all instances, though we \n      // typically only want the first. .replace() without 'g' only does first.\n      // We will remove 'g' to only replace the first instance.\n      const searchRegex = new RegExp(\n        `(\\`\\`${escapedAnchor}\\`\\`|` +  // ``text``\n        `\\`${escapedAnchor}\\`|` +    // `text`\n        `\\\\*\\\\*${escapedAnchor}\\\\*\\\\*|` + // **text**\n        `\\\\*${escapedAnchor}\\\\*|` +  // *text*\n        `${escapedAnchor})`         // text\n      );\n\n      // 5. Replace the *first* found occurrence\n      markdownText = markdownText.replace(searchRegex, markdownLink);\n    }\n  }\n\n  // --- 3. Set Output ---\n  item.json.updated_markdown = markdownText;\n}\n\n// Return all the modified items\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1920,
        11120
      ],
      "id": "36df73c9-c66f-4b8e-ad80-380f64ae815a",
      "name": "Update Internal Links"
    },
    {
      "parameters": {
        "content": "## Update Internal Links Inside Markdown\nOnly if information not complete",
        "height": 234,
        "width": 532,
        "color": 7
      },
      "id": "7ae165b6-e124-4812-85df-212dc58aeb78",
      "name": "Sticky Note77",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1712,
        11040
      ],
      "disabled": true
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord8').item.json.id }}",
            "Internal Link Status": "Added to Article",
            "Blog Content": "={{ $json.updated_markdown }}",
            "Blog Content Rich Formatting": "={{ $json.updated_markdown }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Suggest Internal Links",
              "displayName": "Suggest Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Internal Link Status",
              "displayName": "Internal Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Internal Link Suggestions",
              "displayName": "Internal Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add Internal Links",
              "displayName": "Add Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2416,
        10992
      ],
      "id": "46d6a8e6-b9e7-4164-8a32-2cf41ecb3ba5",
      "name": "ReplaceMarkdown",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ea3af42a-1a56-40a7-be1e-939fce144796",
              "name": "full_markdown_text",
              "value": "={{ $('Internal Link Suggestions').item.json[\"Blog Content\"] }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1744,
        11120
      ],
      "id": "fbb9d4fd-f312-4b27-afea-0ec6f75e3a08",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"selected_links\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"article_title\": {\"type\": \"string\"},\n          \"anchor_text\": {\"type\": \"string\"},\n          \"article_upload_date\": {\"type\": \"string\", \"format\": \"date\"},\n          \"reason_for_link\": {\"type\": \"string\"},\n          \"relevance_score\": {\"type\": \"integer\"},\n          \"destination_url\": {\"type\": \"string\", \"format\": \"uri\"}\n        },\n        \"required\": [\n          \"article_title\",\n          \"anchor_text\",\n          \"article_upload_date\",\n          \"reason_for_link\",\n          \"relevance_score\",\n          \"destination_url\"\n        ]\n      }\n    }\n  },\n  \"required\": [\"selected_links\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1600,
        11280
      ],
      "id": "91820599-51c4-4d83-a265-11e1158a4c91",
      "name": "Structured Output Parser7"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are a text-parsing AI that converts markdown-formatted text into a single, valid JSON object.\n\n**Primary Goal:**\nConvert the provided markdown-formatted link suggestions into a JSON object. The JSON must have a single key, `selected_links`, which contains an array of suggestion objects.\n\n**Extraction Rules:**\nFollow these rules precisely for *each* suggestion (separated by `---`):\n\n1.  **`article_title`**: Extract from the main heading (e.g., `**1. The Title**` becomes `\"The Title\"`).\n2.  **`anchor_text`**: Extract from the `**Anchor Text:**` line. **CRITICAL:** The `anchor_text` is *only* the text *after* the `**Anchor Text:** ` label on that line. After extracting, **strip any surrounding backticks** (\\` \\` or \\`\\` \\`\\`). For example, `\\`ai in finance\\`` should become `\"ai in finance\"`.\n3.  **`article_upload_date`**: Extract from `**Uploaded:**`.\n4.  **`reason_for_link`**: Extract from `**Reason:**`.\n5.  **`relevance_score`**: Extract from `**Score:**`. Convert it to a number (e.g., \"95/100\" becomes `95`).\n6.  **`destination_url`**: Extract from the markdown link, e.g., `**[URL](...)**`.\n\n**Output Format:**\nRespond with *only* the valid, minified JSON object. Do not include any other text, explanation, or markdown formatting. The output JSON *must* conform to the schema specified.\n\nExample Input:\n\n**1. Finance & Accounting: Driving Accuracy**\n**Anchor Text:** `ai in finance`\n**Uploaded:** 2025-10-22\n**Reason:** Placed in the Finance section...\n**Score:** 90/100\n**[URL](https://example.com/finance)**\nExample Output (Minified JSON):\n\nExample Output\n\n{\"selected_links\":[{\"article_title\":\"Finance & Accounting: Driving Accuracy\",\"anchor_text\":\"ai in finance\",\"article_upload_date\":\"2025-10-22\",\"reason_for_link\":\"Placed in the Finance section...\",\"relevance_score\":90,\"destination_url\":\"[https://example.com/finance](https://example.com/finance)\"}]}\n\nActual Input to Process:\n\n{{ $json['Internal Link Suggestions'] }}",
        "hasOutputParser": true,
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        1440,
        11120
      ],
      "id": "31f1e54d-8686-42a8-8b46-351053ada642",
      "name": "StructureLinks",
      "retryOnFail": true
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblCALxxpLQicYZar",
          "mode": "list",
          "cachedResultName": "Brand",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblCALxxpLQicYZar"
        },
        "id": "={{ $json.Company[0] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1504,
        5680
      ],
      "id": "ac1ee2e0-dd86-448c-9d1e-21be938a646a",
      "name": "GetBrand",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## V2: Consolidated style & company inputs\nInto a unified `Brand Inputs` tab\n",
        "height": 96,
        "width": 512
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1264,
        4432
      ],
      "id": "e2cb109b-4abd-49f1-bd76-f3aaa3ca0fce",
      "name": "Sticky Note79"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblCALxxpLQicYZar",
          "mode": "list",
          "cachedResultName": "Brand",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblCALxxpLQicYZar"
        },
        "id": "={{ $json.Company[0] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1472,
        4624
      ],
      "id": "34cf18a1-6e4e-4386-95b2-4f5dfea21205",
      "name": "GetBrand1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "![](https://i.ibb.co/gM22MYzF/Screenshot-1643.png)",
        "height": 944,
        "width": 2016,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2096,
        -96
      ],
      "id": "129330ac-a3c7-4ee9-b7c2-b7c9ebcad993",
      "name": "Sticky Note31"
    },
    {
      "parameters": {
        "content": "![](https://i.ibb.co/tTy4H2pP/Screenshot-1644.png)",
        "height": 944,
        "width": 2016,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        -96
      ],
      "id": "ac57f802-f675-4bb0-bffa-f7d333929030",
      "name": "Sticky Note38"
    },
    {
      "parameters": {
        "content": "## V2: Consolidated style & company inputs\nInto a unified `Brand Inputs` tab\n",
        "height": 96,
        "width": 512
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1408,
        5504
      ],
      "id": "a94551f2-8dd5-487f-ae49-fcbc2a850f96",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "**Optional:** Update the blog inside Airtable directly instead of using `GetLatestArticle` and `ArticleUpdated` nodes\n",
        "height": 272,
        "width": 352
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3888,
        6080
      ],
      "id": "9a5549e7-7120-4617-8d93-b37f868bdc08",
      "name": "Sticky Note78",
      "disabled": true
    },
    {
      "parameters": {
        "content": "# [Company Overview Info](https://www.skool.com/scrapes/classroom/5cb99289?md=6726094e9c4c4f55a2db460b185d8cfc)",
        "height": 112,
        "width": 432,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        1056
      ],
      "id": "5ef03ea3-3d8e-4a11-ba9c-73eade4512b9",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "# [Keywords & Topics](https://www.skool.com/scrapes/classroom/5cb99289?md=fad9c8fd661b4dd4841ed245467ada3a)",
        "height": 112,
        "width": 432,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        1808
      ],
      "id": "b90fc7e1-51eb-4aa2-9f60-bbc7608a9177",
      "name": "Sticky Note80"
    },
    {
      "parameters": {
        "content": "# [Article Plans](https://www.skool.com/scrapes/classroom/5cb99289?md=ac4505aa8db04b2fbb0c6d0bb89eb45e)",
        "height": 128,
        "width": 432,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        4320
      ],
      "id": "5b5e4500-c932-470d-9f6a-fcbea42ba2e7",
      "name": "Sticky Note81"
    },
    {
      "parameters": {
        "content": "# [Blog Publishing](https://www.skool.com/scrapes/classroom/5cb99289?md=c7c33dd24aa84a3a81a9105aac226f85)",
        "height": 128,
        "width": 432,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -48,
        11552
      ],
      "id": "9582e954-4d9d-4af4-bfff-27ad68d7ce79",
      "name": "Sticky Note82"
    },
    {
      "parameters": {
        "content": "# [Internal Linking](https://www.skool.com/scrapes/classroom/5cb99289?md=b0098d4b4332467f98266fd724395dc4)",
        "height": 128,
        "width": 432,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -16,
        8352
      ],
      "id": "9dd37186-6ad2-4ee8-8344-34ab01024afc",
      "name": "Sticky Note83"
    },
    {
      "parameters": {
        "content": "## Webflow - Pull Published Articles & Upload to Index\n",
        "height": 250,
        "width": 852,
        "color": 7
      },
      "id": "27fd9978-296b-4015-bcfd-31e59c9151b3",
      "name": "Sticky Note84",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        656,
        13952
      ],
      "disabled": true
    },
    {
      "parameters": {
        "operation": "getAll",
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.wordpress",
      "typeVersion": 1,
      "position": [
        704,
        13616
      ],
      "id": "2328a78c-a9f1-4137-98d8-44ed33775b61",
      "name": "Get published articles"
    },
    {
      "parameters": {
        "operation": "getAll",
        "siteId": "66ffc85db3b82d0e2ec83334",
        "collectionId": "671a6d1eeca81660f6f97dd1",
        "returnAll": true
      },
      "type": "n8n-nodes-base.webflow",
      "typeVersion": 2,
      "position": [
        704,
        14032
      ],
      "id": "e7897eed-248d-45c4-b425-d6e67834fd70",
      "name": "Get published articles1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ca59a742-0341-4176-a881-c264185c05fb",
              "name": "Title",
              "value": "={{ $json.fieldData.name }}",
              "type": "string"
            },
            {
              "id": "0d0d24cf-3492-46dd-afd3-77a494497d16",
              "name": "Summary",
              "value": "={{ $json.fieldData['post-summary'] }}",
              "type": "string"
            },
            {
              "id": "29f2f946-719a-4403-8ed6-06427c731b06",
              "name": "Blog Id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "68ba3bb8-e0df-40e9-a135-8328eeebf0f8",
              "name": "Uploaded Date",
              "value": "={{ $json.lastPublished ? $json.lastPublished.toDateTime().format('yyyy-MM-dd') : $now.toDateTime().format('yyyy-MM-dd') }}",
              "type": "string"
            },
            {
              "id": "0057cd24-131f-45a6-bab4-5f2c5b967531",
              "name": "Last Updated",
              "value": "={{ $json.lastUpdated ? $json.lastUpdated.toDateTime().format('yyyy-MM-dd') : $now.toDateTime().format('yyyy-MM-dd') }}",
              "type": "string"
            },
            {
              "id": "af863e30-7b8b-470c-b6db-f0f1ecaf997c",
              "name": "Platform",
              "value": "Webflow",
              "type": "string"
            },
            {
              "id": "9210f7dd-40a9-4e55-a9c0-b7708edb65a8",
              "name": "Article URL",
              "value": "=https://www.automake.io/blog/{{ $json.fieldData.slug }}",
              "type": "string"
            },
            {
              "id": "a9d2223d-4ba6-40af-96ae-1129a6051627",
              "name": "Slug",
              "value": "={{ $json.fieldData.slug }}",
              "type": "string"
            },
            {
              "id": "a048c334-b264-472c-a85b-35aa3fcc6129",
              "name": "Content",
              "value": "={{ $json.fieldData['post-body'] }}",
              "type": "string"
            },
            {
              "id": "520b7214-b9cf-4dfd-bfd1-b880f53c0562",
              "name": "Featured Image Id",
              "value": "={{ $json.fieldData['main-image'].url }}",
              "type": "string"
            },
            {
              "id": "3b161fa4-130d-420f-9960-be2e5e388e59",
              "name": "OG Image",
              "value": "=",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1184,
        14032
      ],
      "id": "74788897-b14f-41c6-b2a3-f6efca133f4b",
      "name": "BlogDetails1"
    },
    {
      "parameters": {
        "html": "={{ $json.Content }}",
        "destinationKey": "markdown_blog",
        "options": {}
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        1392,
        14032
      ],
      "id": "9e7d8ef6-98cb-4d0f-860a-cdf833d2fab4",
      "name": "Markdown1"
    },
    {
      "parameters": {
        "operation": "upsert",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Uploaded Date": "={{ $('BlogDetails1').item.json['Uploaded Date'] }}",
            "Article URL": "={{ $('BlogDetails1').item.json['Article URL'] }}",
            "Blog Id": "={{ $('Get published articles1').item.json.id }}",
            "Platform": "={{ $('BlogDetails1').item.json.Platform }}",
            "Title": "={{ $('BlogDetails1').item.json.Title }}",
            "Summary": "={{ $('BlogDetails1').item.json.Summary }}",
            "Content": "={{ $json.markdown_blog }}",
            "Article Last Updated": "={{ $('BlogDetails1').item.json['Last Updated'] }}"
          },
          "matchingColumns": [
            "Blog Id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Platform",
              "displayName": "Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "New_Row_Added",
              "displayName": "New_Row_Added",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "New Link Suggestions",
              "displayName": "New Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Links Suggested",
              "displayName": "New Links Suggested",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Link Status",
              "displayName": "New Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add New Links",
              "displayName": "Add New Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Last Updated",
              "displayName": "Article Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article Changelog",
              "displayName": "Article Changelog",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1984,
        14176
      ],
      "id": "299334ba-e2cd-4dda-9f5f-f9fc919c674b",
      "name": "AddToIndex1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        496,
        13792
      ],
      "id": "369e289b-c127-4ff4-b974-db36866dfeb5",
      "name": "Per Day Indexing",
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Choose platform\nDeactivate other branch",
        "height": 96
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        400,
        13600
      ],
      "id": "de35130e-7acd-4940-bd74-cf5def98f0c6",
      "name": "Sticky Note85"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items, replace '\\n' with spaces, and add table styling\nfor (const item of $input.all()) {\n  if (item.json.data) {\n    // First replace newlines with spaces\n    let processedHtml = item.json.data.replace(/\\n/g, ' ');\n    \n    // Add table styling\n    const styleTag = `\n<style>\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin: 20px 0;\n}\nth, td {\n  border: 1px solid #ddd;\n  padding: 12px;\n  text-align: left;\n}\nth {\n  border-bottom: 2px solid #ddd;\n}\n</style>`;\n    \n    // Add the style tag before the first table if there is a table\n    if (processedHtml.includes('<table')) {\n      processedHtml = processedHtml.replace('<table', styleTag + '<table');\n    }\n    \n    item.json.htmlField = processedHtml;\n  }\n}\n\nreturn $input.all();"
      },
      "id": "b78b79a9-a1f9-44e3-ae0f-7b4ee1f96160",
      "name": "Format /n and Tables",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2192,
        12048
      ],
      "notes": "Replaces /n with <br> to satisfy n8n working with webflow rich text uploads"
    },
    {
      "parameters": {
        "mode": "markdownToHtml",
        "markdown": "={{ $('Switch').item.json.markdown_blog }}",
        "options": {
          "simplifiedAutoLink": true,
          "headerLevelStart": 4,
          "noHeaderId": true,
          "tables": true
        }
      },
      "id": "a36ebb52-29b1-4adf-b8e3-087ae6f6d7bc",
      "name": "Convert to HTML1",
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        2032,
        12048
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://wordpress-n8n-u28170.vm.elestio.app/wp-json/wp/v2/posts",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "title",
              "value": "={{ $('Switch').item.json.title }}"
            },
            {
              "name": "content",
              "value": "={{ $('WrapImages').item.json.wrapped_html }}"
            },
            {
              "name": "excerpt",
              "value": "={{ $('PrepareArticle').item.json.summary }}"
            },
            {
              "name": "status",
              "value": "publish"
            },
            {
              "name": "featured_media",
              "value": "={{ $('UploadImage').item.json.id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2752,
        11792
      ],
      "id": "d9741819-535f-42a7-a426-ba6c1f5022d9",
      "name": "PostToWordpress"
    },
    {
      "parameters": {
        "content": "replace these with your own category names from webflow",
        "height": 80,
        "width": 182
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2544,
        12192
      ],
      "id": "f32e4b96-289f-42a9-9084-1a5785ee815b",
      "name": "Sticky Note55"
    },
    {
      "parameters": {
        "operation": "create",
        "siteId": "66ffc85db3b82d0e2ec83334",
        "collectionId": "671a6d1eeca81660f6f97dd1",
        "live": true,
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "name",
              "fieldValue": "={{ $json.title }}"
            },
            {
              "fieldId": "post-body",
              "fieldValue": "={{ $json.htmlField }}"
            },
            {
              "fieldId": "post-summary",
              "fieldValue": "={{ $('PrepareArticle').item.json.summary }}"
            },
            {
              "fieldId": "slug",
              "fieldValue": "={{ $('Set Site URL').item.json.blog_slug }}"
            },
            {
              "fieldId": "main-image",
              "fieldValue": "={{ $json.main_image_url }}"
            },
            {
              "fieldId": "thumbnail-image",
              "fieldValue": "={{ $json.main_image_url }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.webflow",
      "typeVersion": 2,
      "position": [
        2560,
        12048
      ],
      "id": "c25be61a-99ac-4873-99cf-69a36339f125",
      "name": "PostBlog"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are a content summarizer. Take the provided article and create a clear, engaging summary suitable for web publication in the same tone as the blog post. \n\nRequirements:\n- Length: 40-60 words (2-3 compelling sentences)\n- Format: Plain text, no markdown or special formatting\n- Style: Clear, accessible, and engaging and RELEVANT to the article content\n- Purpose: Encourage readers to click and read the full article\n- Tone: Match the input\n\nArticle to summarize:\n{{ $('LastItem').item.json['article_so_far'] }}\n\nProvide only the summary text, ready to paste directly into WordPress or Webflow.",
        "hasOutputParser": true,
        "needsFallback": true,
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        3376,
        5232
      ],
      "id": "e31369bd-2c6a-4a9c-a3ce-9872b39abc91",
      "name": "Summary"
    },
    {
      "parameters": {
        "content": "## V2: Generates a summary for Excerpt\n\n",
        "height": 80,
        "width": 288
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3328,
        5136
      ],
      "id": "cf590dc1-c7fc-4421-b314-5b1cd1208ce7",
      "name": "Sticky Note52"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"summary\": \"Summary of the blog article content\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3520,
        5408
      ],
      "id": "5d51d687-a08e-4f7d-9ad5-7400f51176d0",
      "name": "Structured Output Parser8"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetArticles').item.json.id }}",
            "Upload Status": "Complete",
            "Uploaded Date": "={{ $now.format('yyyy-MM-dd') }}",
            " Publish Date": "=",
            "Article URL": "={{ $('Set Site URL').item.json.blog_base_url }}{{ $('Set Site URL').item.json.blog_slug }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2752,
        12048
      ],
      "id": "fed9f082-0726-4380-9a78-a1f0797ee2f0",
      "name": "UploadedDate1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "replace with your own blog base url ",
        "height": 80,
        "width": 182
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2320,
        12192
      ],
      "id": "6456484a-63bf-4bf5-b5b3-fb783ba1ecd8",
      "name": "Sticky Note56"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2a28e76a-7b7b-43ce-a56e-0aca22ec10ce",
              "name": "blog_base_url",
              "value": "=https://www.automake.io/blog/",
              "type": "string"
            },
            {
              "id": "3cae6835-a9a6-46d3-af8d-bccf8689aebf",
              "name": "blog_slug",
              "value": "={{ $json.title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '') }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2368,
        12048
      ],
      "id": "07f07c30-4d0c-4e47-8deb-b4323b6f4fd6",
      "name": "Set Site URL"
    },
    {
      "parameters": {
        "content": "## Webflow\n### Important: How to set up your webflow API\n\nWebflow is fairly straightforward:\n\n1. You need to go to your Webflow dashboard -> Develop -> Create an app \n![](https://i.ibb.co/8ggt47kg/Screenshot-1654.png)\n\n2. You can add any homepage url on the first page\n![](https://i.ibb.co/HTvtqGQq/Screenshot-1655.png)\n\n3. Make sure you use the correct redirect url, get this by opening a webflow node -> create a new credential\n![](https://i.ibb.co/mVYC08pf/Screenshot-1657.png)\n![](https://i.ibb.co/Hpf9NLFv/Screenshot-1656.png)\n\n4. Use the client id and client secret from the app, and click save. Make sure in the scopes section on Webflow app, it has access to `Read & Write` for CMS, Pages & Sites\n\n5. Put those credentials (id & secret) into the Webflow node, scroll down to the bottom and click the orange 'Connect to my account' button which will prompt you to login. Once successful, you'll be able to use the Webflow nodes.\n",
        "height": 2576,
        "width": 720
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3968,
        11552
      ],
      "id": "2b4e6173-65ff-49d5-a097-bede3d51cfd1",
      "name": "Sticky Note57"
    },
    {
      "parameters": {
        "operation": "create"
      },
      "type": "n8n-nodes-base.webflow",
      "typeVersion": 2,
      "position": [
        4544,
        11568
      ],
      "id": "e6d0e59e-81d7-4aea-94e5-392ef7b2171c",
      "name": "Create an item",
      "disabled": true
    },
    {
      "parameters": {
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.wordpress",
      "typeVersion": 1,
      "position": [
        3808,
        12112
      ],
      "id": "1f80d509-b3ac-416f-ba2e-50f718535fae",
      "name": "Create a post",
      "disabled": true
    },
    {
      "parameters": {
        "content": "### Supabase / Postgresql DB Setup\nFollow this [video](https://youtu.be/ti43gv1_f3E?si=4NjqWdCvlDMhiuPx&t=130)",
        "height": 96
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1744,
        8912
      ],
      "id": "8e48b374-6a7e-4a8e-906c-ab94248170c8",
      "name": "Sticky Note43"
    },
    {
      "parameters": {
        "content": "### Supabase / Postgresql DB Setup\nFollow this [video](https://youtu.be/ti43gv1_f3E?si=4NjqWdCvlDMhiuPx&t=130)",
        "height": 96
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3072,
        10576
      ],
      "id": "74aa857f-4c24-4301-ac6a-7118b0bddaea",
      "name": "Sticky Note70"
    },
    {
      "parameters": {
        "model": "openai/gpt-4.1",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1056,
        8800
      ],
      "id": "39eabfe9-0f87-4f16-8107-b894271ada7f",
      "name": "GPT-4.1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1168,
        10432
      ],
      "id": "ca30a933-917f-4c20-919f-2d4350dce036",
      "name": "GPT-4.1-mini"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1440,
        11296
      ],
      "id": "76937b3f-3abc-41ed-a785-90ba733e2695",
      "name": "Gemini-2.5-Pro1"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2592,
        4832
      ],
      "id": "13fac9ee-5353-46f9-915e-6b4265862947",
      "name": "Gemini-Flash-2.5"
    },
    {
      "parameters": {
        "content": "## V3: Updated prompt\n- Copy new system and user prompt\n- Add `options` -> max iterations = 30 ",
        "height": 112,
        "width": 288
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2656,
        4432
      ],
      "id": "545350ac-5b68-49ef-bc09-d82feb313348",
      "name": "Sticky Note87"
    },
    {
      "parameters": {
        "content": "## V3: Updated formatting\n- Copy new UpdateBlog1 node and make sure that inside Article Plans that `Plan` and `Research` are both set to rich formatting. This displays the plan and the research much more cleanly.\n![](https://i.ibb.co/PGzCpxjB/Screenshot-1793.png)\n- Inside Airtable interface, inside Generate Article Plan -> separated Plan and Research into collapsible groups - Plan now appears first\n![](https://i.ibb.co/ds6JZz53/Screenshot-1794.png)",
        "height": 1232,
        "width": 1104
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3584,
        3760
      ],
      "id": "298ae0ea-1849-4c36-bbed-2a9d093a0189",
      "name": "Sticky Note88"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblXTbSTXMbL5JOk5",
          "mode": "list",
          "cachedResultName": "Article Plans",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblXTbSTXMbL5JOk5"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord6').item.json.id }}",
            "Article Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Article Title",
              "displayName": "Article Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Research",
              "displayName": "Research",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Plan",
              "displayName": "Plan",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword Link",
              "displayName": "Keyword Link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Generate Article",
              "displayName": "Generate Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Status",
              "displayName": "Article Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Completed",
                  "value": "Completed"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Subtopics",
              "displayName": "Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Selected Subtopic (Optional)",
              "displayName": "Selected Subtopic (Optional)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1216,
        5488
      ],
      "id": "92cc555e-d395-4816-8c35-bc6c979b7ae7",
      "name": "UpdateArticleStatus1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"article_title\": {\n      \"type\": \"string\"\n    },\n    \"content_style\": {\n      \"type\": \"string\"\n    },\n    \"target_keyword\": {\n      \"type\": \"string\"\n    },\n    \"semantic_keywords\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    },\n    \"article_structure\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"section_type\": {\n            \"type\": \"string\"\n          },\n          \"header\": {\n            \"type\": \"string\"\n          },\n          \"supporting_points\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          },\n          \"supporting_elements\": {\n            \"type\": \"string\"\n          },\n          \"estimated_words\": {\n            \"type\": \"number\"\n          }\n        }\n      }\n    },\n    \"total_estimated_words\": {\n      \"type\": \"number\"\n    }\n  }\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2304,
        5856
      ],
      "id": "fa607fdb-622a-422a-9796-51be8a80d4e8",
      "name": "Output Parser1"
    },
    {
      "parameters": {
        "content": "## V3: Convert Plan back to JSON\n- Remove `plan` from SetJSON\n- Add 'JSON Conversion' LLM Chain - it's built in this way in case the user amends the Article Plan -> Can therefore use the new plan \n",
        "height": 128,
        "width": 512
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2000,
        5520
      ],
      "id": "3f42719a-9f23-462c-876f-164c9d510076",
      "name": "Sticky Note89"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=INPUT MARKDOWN:\n{{ $('GetRecord6').item.json.Plan }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=You are a data parser. Convert this markdown article plan back into the exact JSON structure specified, preserve all text.\n\nINPUTS:\n- Input Markdown of an Article Plan\n\nCRITICAL: \n- Respond with ONLY valid JSON, no markdown formatting, no code blocks\n- Preserve all text exactly as written"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        2128,
        5680
      ],
      "id": "d7a1fa2c-5bc5-4af0-850f-31384ccc2975",
      "name": "JSON Conversion"
    },
    {
      "parameters": {
        "content": "## V3: Content Agent - update Prompt (user message)\n- Copy new inputs (references new JSON Conversion node)",
        "height": 128,
        "width": 512
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3104,
        6160
      ],
      "id": "1476e87d-2259-4ff5-aa9b-36c45a073842",
      "name": "Sticky Note90"
    },
    {
      "parameters": {
        "content": "## V3: Updated Prompt\n- Multiple input colors - Input multiple hex codes separated by comma in the brand inputs (inside the Airtable)\n- This now does not embed images into the article (quicker image generation & allows for re-runs), that is done in a separate subflow\n- Filename generated for each image (changed in prompt and output parser). Alt text generated when added to article (next subflow)",
        "height": 192,
        "width": 512
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1536,
        6592
      ],
      "id": "151e2265-e4e3-495b-8073-c5cc5d6ce385",
      "name": "Sticky Note91"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2128,
        5856
      ],
      "id": "5adfc682-e544-4159-8611-1f058334feee",
      "name": "Gemini-2.5-Flash1"
    },
    {
      "parameters": {
        "content": "## V3: Display Article in a GDoc\n- The whole section above is new\n- For visualising the blog article, we put it into a GDoc\n- Set up the folder you want them to populate inside\n- Update `Visualize Article` field type in Airtable to be a URL instead of Button\n![](https://i.ibb.co/6cxKjR5G/Screenshot-1795.png)",
        "height": 288,
        "width": 528
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3744,
        5392
      ],
      "id": "014291aa-9be3-49e7-b4b5-a569b13c86b4",
      "name": "Sticky Note93"
    },
    {
      "parameters": {
        "content": "## V3: Update Title value\n- In `UpdateBlog` add new title value `{{ $('JSON Conversion').item.json.output.article_title }}`\n- Add 'VisualizeArticle` field and value: https://docs.google.com/document/d/{{ $('CreateGoogleDoc').item.json.id }}",
        "height": 128,
        "width": 624
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        4304,
        5008
      ],
      "id": "f65fcf5e-169a-484d-bdda-f4d657e25949",
      "name": "Sticky Note92"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e7ee03ac-13e3-4fca-a7bc-57c8fc56dc42",
              "name": "document_name",
              "value": "={{ $now.format('yyyy-MM-dd') }} - Article - {{ $('JSON Conversion').item.json.output.article_title }}",
              "type": "string"
            },
            {
              "id": "48a07ef2-ae46-4bfc-aa7e-d92a74ef46d6",
              "name": "html_content",
              "value": "={{ $json.data }}",
              "type": "string"
            },
            {
              "id": "22b02fba-ba72-423a-b92f-1191a183a554",
              "name": "drive_folder_id",
              "value": "1BVNis40_cpE6jeXtSQBh9sBVcEIg6Plp",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3824,
        5232
      ],
      "id": "3c875a3e-8038-4823-9a90-60c277ca0818",
      "name": "set_fields",
      "notesInFlow": true
    },
    {
      "parameters": {
        "mode": "markdownToHtml",
        "markdown": "={{ $('E-E-A-T Enhancement Agent').item.json.output.enhanced_article }}",
        "options": {
          "emoji": true,
          "tables": true
        }
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        3680,
        5232
      ],
      "id": "792eb9a2-865c-46d5-8f3f-d328ea89be7b",
      "name": "Markdown2"
    },
    {
      "parameters": {
        "jsCode": "const boundary = 'divider';\nconst docName = $input.first().json.document_name;\nconst folderId = $input.first().json.drive_folder_id;\nlet htmlContent = $input.first().json.html_content;\n\n// Replace img tags with constrained versions\n// This regex captures the entire img tag and replaces it\nhtmlContent = htmlContent.replace(/<img\\s+[^>]*src=\"([^\"]+)\"[^>]*alt=\"([^\"]*)\"[^>]*\\/?>/gi, \n  '<img src=\"$1\" alt=\"$2\" width=\"450\" height=\"auto\" style=\"max-width:450px;height:auto;display:block;margin:15px 0;\" />');\n\nconst metadata = JSON.stringify({\n  name: docName,\n  mimeType: \"application/vnd.google-apps.document\",\n  parents: [folderId]\n});\n\nconst htmlWithStyles = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <style>\n    p, ul, ol, table, h1, h2, h3, h4, h5, h6 {\n      margin-bottom: 10pt;\n    }\n    h2 {\n      margin-top: 20pt;\n    }\n    li {\n       margin-bottom: 2pt;\n    }\n  </style>\n</head>\n<body>\n  ${htmlContent}\n</body>\n</html>\n`;\n\nlet body = `--${boundary}\\r\\n`;\nbody += `Content-Type: application/json; charset=UTF-8\\r\\n`;\nbody += `\\r\\n`;\nbody += `${metadata}\\r\\n`;\nbody += `--${boundary}\\r\\n`;\nbody += `Content-Type: text/html\\r\\n`;\nbody += `\\r\\n`;\nbody += `${htmlWithStyles}\\r\\n`;\nbody += `--${boundary}--\\r\\n`;\n\nreturn {\n  rawData: body \n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3984,
        5232
      ],
      "id": "4bbd8a43-f195-4ebd-b3f8-e8a7261f43f0",
      "name": "Prepare_Request"
    },
    {
      "parameters": {
        "content": "## Displays Article as GDoc Draft\nMust be done using http request",
        "height": 272,
        "width": 624,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3648,
        5104
      ],
      "id": "08a187ef-f063-4e35-b1c1-9c4e19a9b3e0",
      "name": "Sticky Note94"
    },
    {
      "parameters": {
        "content": "**Update folder id from gdrive**\n",
        "height": 80,
        "width": 192,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3792,
        5184
      ],
      "id": "51c1dcad-b523-4530-b61c-bf33a09cce6b",
      "name": "Sticky Note95"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://www.googleapis.com/upload/drive/v3/files",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "googleDriveOAuth2Api",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "uploadType",
              "value": "multipart"
            },
            {
              "name": "supportsAllDrives",
              "value": "true"
            }
          ]
        },
        "sendBody": true,
        "contentType": "raw",
        "rawContentType": "multipart/related; boundary=divider",
        "body": "={{ $json.rawData }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4144,
        5232
      ],
      "id": "238158cd-30dc-40ca-bb74-89bd8a0e5d45",
      "name": "CreateGoogleDoc",
      "notesInFlow": true
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1568,
        7104
      ],
      "id": "c6dceb04-09a3-4ce7-970d-e64f0561f4b4",
      "name": "Gemini-2.5-pro2"
    },
    {
      "parameters": {
        "model": "openai/gpt-4o",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1680,
        7104
      ],
      "id": "950c62b0-7c71-46c6-b0ed-2e3008c35d7a",
      "name": "gpt-4o1"
    },
    {
      "parameters": {
        "content": "## V3: Image Generation Moved To Separate Flow\n\n",
        "height": 80,
        "width": 304
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2464,
        5136
      ],
      "id": "2341fad7-962f-4b31-9c31-2755b662909d",
      "name": "Sticky Note96"
    },
    {
      "parameters": {
        "content": "## Receive webhook \nObtain Airtable record",
        "height": 234,
        "width": 392,
        "color": 7
      },
      "id": "18cc944e-b783-42b2-8324-f6ac89ce0477",
      "name": "Sticky Note97",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        496,
        6832
      ]
    },
    {
      "parameters": {
        "path": "generate-images",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        560,
        6912
      ],
      "id": "2045000d-b924-483c-96ef-624414f66f0b",
      "name": "Webhook8",
      "webhookId": "d3711216-4639-4e4e-829e-98a4e72b0c37"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "id": "={{ $('Webhook8').item.json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        752,
        6912
      ],
      "id": "cc1f6b96-ddfa-4f6c-83d3-e1260dc868c7",
      "name": "GetRecord9",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "d543b923-7780-4e34-a3f0-5efcb22b9222",
      "name": "Sticky Note98",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        896,
        6832
      ]
    },
    {
      "parameters": {
        "content": "## Generate images\n- Input: `Blog content draft`\n- Output: `Images to review`\n",
        "height": 960,
        "width": 3696,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        6496
      ],
      "id": "1b861cdc-f1bb-484d-8028-a183dc04e7eb",
      "name": "Sticky Note99"
    },
    {
      "parameters": {
        "content": "## Generate Images\nVariable number and prompts depending on context",
        "height": 458,
        "width": 580,
        "color": 7
      },
      "id": "cbd09c86-3119-4f38-a53d-866162d94f00",
      "name": "Sticky Note100",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1536,
        6800
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Title'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "528d7dce-c3c3-412c-9924-4cd2bd9a2d95",
              "leftValue": "={{ $json['Blog Content'] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        992,
        6912
      ],
      "id": "cbcd208f-3917-437b-8444-26e7f5844ed8",
      "name": "IfReady4"
    },
    {
      "parameters": {
        "content": "## V3: Add Fields to Airtable\n- Image Generation / Regeneration Button & Status\n- Images (stores generations - by default these will be carried forward if no `Selected Images` are chosen)\n- Selected Images (if you want to regenerate images, store any you like from the original batch here by downloading and uploading - these will be carried forward and embedded into the article)\n- Main Image (automatically uploaded, but can be replaced - this is the cover image for the article)\n- Image Embedding Button & Status\n![](https://i.ibb.co/Rpr63W3w/Screenshot-1810.png)",
        "height": 336,
        "width": 928
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        480,
        7072
      ],
      "id": "4d46f187-1924-4f3c-9cf5-2964a279c3cf",
      "name": "Sticky Note101"
    },
    {
      "parameters": {
        "content": "## V3: This Entire Section is new\n- It replaced the previous image generation attached to the content writer, so that you have more control over regenerating images. You can now re-run the images just by clicking the button.",
        "height": 128,
        "width": 512
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        736,
        6512
      ],
      "id": "1f20a246-1d5e-436d-98d6-74543ceacfcf",
      "name": "Sticky Note102"
    },
    {
      "parameters": {
        "content": "## Pull brand inputs\n",
        "height": 234,
        "width": 260,
        "color": 7
      },
      "id": "496034e6-746d-461e-aaa0-87ef0228615a",
      "name": "Sticky Note103",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1440,
        7024
      ]
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblCALxxpLQicYZar",
          "mode": "list",
          "cachedResultName": "Brand",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblCALxxpLQicYZar"
        },
        "id": "={{ $json.Company[0] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1264,
        6896
      ],
      "id": "5daad34e-63cc-42a0-a6ad-85fe740079e5",
      "name": "GetBrand2",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/appaw0KrcRlPjUftJ/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord9').item.json.id }}",
            "Image Generation Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Images",
              "displayName": "Generate Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Images",
              "displayName": "Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Generation Status",
              "displayName": "Image Generation Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Suggest Internal Links",
              "displayName": "Suggest Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Internal Link Status",
              "displayName": "Internal Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Internal Link Suggestions",
              "displayName": "Internal Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add Internal Links",
              "displayName": "Add Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1248,
        6656
      ],
      "id": "ad6d1e78-6628-4836-b536-b6648998d43b",
      "name": "UpdateImageStatus",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Blog Content": "={{ $('Image Generation').item.json.output.completed_article }}",
            "Blog Content Rich Formatting": "={{ $('Image Generation').item.json.output.completed_article }}",
            "Images": "={{ $json.extracted_images.toJsonString() }}",
            "id": "={{ $('GetRecord9').item.json.id }}",
            "Image Generation Status": "Complete",
            " Main Image": "=[{ \"url\": \"{{ $('Image Generation').item.json.output.images[0].url }}\" }]"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Images",
              "displayName": "Generate Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Images",
              "displayName": "Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": " Selected Images",
              "displayName": " Selected Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Main Image",
              "displayName": " Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Image Generation Status",
              "displayName": "Image Generation Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Embed Images",
              "displayName": "Embed Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Suggest Internal Links",
              "displayName": "Suggest Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Internal Link Status",
              "displayName": "Internal Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Internal Link Suggestions",
              "displayName": "Internal Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add Internal Links",
              "displayName": "Add Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": false
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2208,
        6896
      ],
      "id": "6f9ecfc0-2a1e-4a14-ac4a-63e37d0a0e6c",
      "name": "UpdateBlog3",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Loop over all input items\nfor (const item of $input.all()) {\n  \n  // Get the original data from the 'output' object\n  const article = item.json.output.completed_article;\n  const originalImages = item.json.output.images;\n\n  // Create the new, \"extracted\" array\n  const extractedImages = originalImages.map(image => {\n    return {\n      url: image.url,\n      filename: image.filename\n    };\n  });\n\n  // Overwrite the item's JSON with the new, flat structure\n  // This keeps the article and adds the new extracted_images array\n  item.json = {\n    completed_article: article,\n    extracted_images: extractedImages\n  };\n}\n\n// Return all the modified items\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2000,
        6896
      ],
      "id": "d148f246-7376-4fcc-8010-3cea147e0080",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.webflow.com/v2/collections/YOUR_COLLECTION_ID_HERE/items",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "oAuth2Api",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            },
            {
              "name": "content-type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ fieldData: { name: $json.title, slug: $json.blog_slug, 'rich-text': $json.htmlField, 'post-summary': $json.summary, 'thumbnail-image': $json.main_image_url, author: 'YOUR_AUTHOR_ID_HERE' }, isDraft: false, isArchived: false }) }}",
        "options": {}
      },
      "id": "90daa2a2-551c-4a96-8d29-5be2516918b0",
      "name": "PostBlog2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3072,
        12160
      ],
      "disabled": true
    },
    {
      "parameters": {
        "path": "embed-images",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        512,
        7888
      ],
      "id": "72c4c5e0-7529-4be3-8f62-9ff0298d313b",
      "name": "Webhook9",
      "webhookId": "0bb1f614-e9e7-4c99-8015-b5576f5cafef"
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "6d1d3af0-11aa-42c9-ba1a-d5ca6e679440",
      "name": "Sticky Note104",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        848,
        7808
      ]
    },
    {
      "parameters": {
        "content": "## Add Selected Image Links\n- Input: `Internal link suggestions and original draft article`\n- Output: `Adds links directly to content`\n",
        "height": 736,
        "width": 3072,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        7536
      ],
      "id": "b6b23d77-ac57-4109-b4cb-0c62722f1ee8",
      "name": "Sticky Note105",
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Embed Image Links\nInto the blog article, then replace the markdown\n",
        "height": 426,
        "width": 532,
        "color": 7
      },
      "id": "e70c6aef-2563-4f17-9073-0d9b3121a334",
      "name": "Sticky Note106",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2928,
        7760
      ],
      "disabled": true
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord11').item.json.id }}",
            "Blog Content": "={{ $json.output.completed_article }}",
            "Blog Content Rich Formatting": "={{ $json.output.completed_article }}",
            "Image Embedding Status": "Added to Article"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Images",
              "displayName": "Generate Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Images",
              "displayName": "Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Selected Images",
              "displayName": " Selected Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Main Image",
              "displayName": " Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Generation Status",
              "displayName": "Image Generation Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Embedding Status",
              "displayName": "Image Embedding Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Embed Images",
              "displayName": "Embed Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Suggest Internal Links",
              "displayName": "Suggest Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Internal Link Status",
              "displayName": "Internal Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Internal Link Suggestions",
              "displayName": "Internal Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add Internal Links",
              "displayName": "Add Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3312,
        7872
      ],
      "id": "c47e4441-7d3a-4c9a-a29d-468dfb002bf5",
      "name": "ReplaceMarkdown1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2976,
        8048
      ],
      "id": "08d62f9d-220c-4e8c-934a-5ab9b14b9d0f",
      "name": "Gemini-2.5-Pro2"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"completed_article\": {\n      \"type\": \"string\",\n      \"description\": \"Complete markdown-formatted blog article with embedded image URLs\"\n    }\n  },\n  \"required\": [\"completed_article\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3136,
        8048
      ],
      "id": "d891e548-25d6-4fba-8bef-9d9aecd94ba8",
      "name": "Structured Output Parser10"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "id": "={{ $('Webhook9').item.json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        704,
        7888
      ],
      "id": "ff041a89-3514-46e2-8e44-9ca9446db031",
      "name": "GetRecord11",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "9012dbcc-f2e2-40f0-b076-7671c8ff8441",
      "name": "Sticky Note107",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        848,
        7808
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['Title'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "528d7dce-c3c3-412c-9924-4cd2bd9a2d95",
              "leftValue": "={{ $json['Blog Content'] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "5d971316-61c4-4eec-9aca-798b4f3dfdaa",
              "leftValue": "={{ $json.Images[0] }}",
              "rightValue": "",
              "operator": {
                "type": "object",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        944,
        7888
      ],
      "id": "25a1ecb4-c784-4aba-9f5f-a352ad4c0956",
      "name": "IfReady6"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## Role\n\nYou are an expert Markdown Formatter and Content Strategist specialized in strategically embedding a provided list of images into a blog article to enhance readability, visual flow, and reader engagement.\n\n## Constraints\n\n* **Even Distribution:** Images must be evenly distributed throughout the content. Do not cluster images in one section. Do not put the first image right at the top of the content.\n* **Contextual Placement:** Place each image near the content it relates to, as inferred from its descriptive `file_name`. If you can't find a suitable place, just make sure it's in a sensible text break point.\n* **Valid Markdown:** Must use valid markdown image syntax: `![alt text](image_url)`\n* **Verbatim Content:** The original `blog_content` text must remain 100% intact, with the only additions being the image markdown and necessary line breaks.\n* **Formatting:** Ensure a blank line exists before and after each inserted image markdown for proper rendering and readability.\n\n## Inputs\n\n* **blog_content (required):** The full, original blog article text in markdown format.\n* **image_data (required):** An array of image objects, where each object contains:\n    * `image_url`: The URL of the image to embed.\n    * `file_name`: The descriptive, slug-cased filename (e.g., `a-person-meditating-at-sunset.jpg`).\n\n## Instructions\n\n### 1. Analyze Content and Images\n* Analyze the `blog_content` to identify key sections, headings (e.g., `##`, `###`), and natural paragraph breaks.\n* Review the `image_data` array to determine the total number of images to be embedded.\n* Read the `file_name` for each image to understand its context.\n\n### 2. Determine Optimal Placement\n* Calculate the optimal placement points for even distribution.\n    * *Strategy:* Divide the total number of paragraphs (or major sections) by the number of images to find a rough interval (e.g., 1 image every 4 paragraphs).\n* Map each image (using its `file_name` description) to the most relevant section of the `blog_content`.\n* Adjust the \"even distribution\" plan to fit the \"contextual\" plan. An image should always be placed in a relevant section.\n\n### 3. Generate Alt Text and Embed Images\n* Iterate through the `blog_content`.\n* At the determined placement points (which should be between paragraphs or after a section):\n    1.  **Generate Alt Text:** Create a human-readable, descriptive alt text by \"de-slugging\" the `file_name`.\n        * Replace all hyphens (`-`) with spaces.\n        * Capitalize the first letter of the resulting string.\n        * Add a period at the end.\n        * *Example `file_name`:* `a-person-meditating-at-sunset.jpg`\n        * *Generated `alt_text`:* \"A person meditating at sunset.\"\n    2.  **Embed Image:** Insert the image using the `image_url` and your newly generated alt text:\n        ```\n        \n        ![A person meditating at sunset.]([image_url_from_input])\n        \n        ```\n* Ensure the blank lines before and after the markdown tag are included.\n\n### 4. Final Assembly\n* Compile the complete, new article with the original text and the embedded image markdown.\n* Verify that all images from the `image_data` array have been embedded.\n* Verify that no part of the original `blog_content` has been deleted or altered.\n\n## Conclusions\n\nReturn a JSON object containing:\n\n* **completed_article:** The full blog article (verbatim original text) with the strategically embedded image URLs in markdown format.\n\n## Solutions\n\n* If the `image_data` array is empty, return the original `blog_content` unmodified in the `completed_article` field.\n* If the content has no clear sections (e.E.g., one large block of text), divide the total character count by (number of images + 1) and insert images at those character intervals.\n* If an image's `file_name` doesn't clearly match any specific section, prioritize even distribution and place it at the calculated interval point.\n\n---\n\n### Variable Mapping (for Prompt 2)\n\n* **blog_content:** `{{ $('IfReady6').item.json['Blog Content'] }}`\n* **image_data:** `{{ $json.data.map(item => `image_url: ${item.image_url}, filename: ${item.filename}`).join('\\n') }}`",
        "hasOutputParser": true,
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        2976,
        7872
      ],
      "id": "327df8cc-a94f-4b21-bd87-a302cabcc5b5",
      "name": "Embed Image Links",
      "retryOnFail": true
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1840,
        7872
      ],
      "id": "981b8f9e-f43f-4a8f-b138-5ca18c995d40",
      "name": "Download Image",
      "retryOnFail": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "cef286d6-cd10-4c1d-9177-2521484d54d7",
              "name": "Images",
              "value": "={{ $('IfReady6').item.json[' Selected Images'] }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1440,
        7808
      ],
      "id": "a4625d85-582d-40b3-9e0c-04d4b36cfad1",
      "name": "Selected Images"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e32b5349-dff4-464b-bee8-3b692fc54acc",
              "leftValue": "={{ $json[' Selected Images'] }}",
              "rightValue": "",
              "operator": {
                "type": "array",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1216,
        7888
      ],
      "id": "21a4d9e6-e381-4136-bf57-2d1cb52f30af",
      "name": "IfSelectedImages"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "cef286d6-cd10-4c1d-9177-2521484d54d7",
              "name": "Images",
              "value": "={{ $('IfReady6').item.json['Images'] }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1440,
        7952
      ],
      "id": "b20dade0-c5a7-4346-ac46-1fd312b38e4d",
      "name": "Auto Images"
    },
    {
      "parameters": {
        "content": "## If Images Selected By User\nTake forward those images, else take forward the auto-populated images",
        "height": 410,
        "width": 452,
        "color": 7
      },
      "id": "387c25b9-5217-4fda-a9f6-86c91c0e20aa",
      "name": "Sticky Note111",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1168,
        7712
      ]
    },
    {
      "parameters": {
        "content": "## Download Optimize & Upload Images\nUpload image to ImgBB, Optimise using ReSmush .it.\nWe also download it because Airtable links are temporary\n",
        "height": 266,
        "width": 1252,
        "color": 7
      },
      "id": "85582179-4655-4338-9ce6-c02ef0387e5e",
      "name": "Sticky Note112",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1648,
        7760
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "Images",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1680,
        7872
      ],
      "id": "9d2281fb-73bf-423c-a356-e4ff7b0c8d5c",
      "name": "Split Urls"
    },
    {
      "parameters": {
        "url": "=http://api.resmush.it/ws.php?img={{ $json.data.url }}",
        "options": {}
      },
      "id": "0169eed8-b6c6-4000-8faa-881ce7f7a2c5",
      "name": "Image Optimisation",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2208,
        7872
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.imgbb.com/1/upload",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-type",
              "value": "application/x-www-form-urlencoded"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "image",
              "value": "={{ $json.dest }}"
            }
          ]
        },
        "options": {}
      },
      "id": "257e07fc-63e5-47c1-859b-0b1ec907f523",
      "name": "Store Optimised ImgBB",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2400,
        7872
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.imgbb.com/1/upload",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-type",
              "value": "multipart/form-data"
            }
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "image",
              "inputDataFieldName": "data"
            }
          ]
        },
        "options": {}
      },
      "id": "78156f60-0175-4788-91e5-a54339bc60c0",
      "name": "Get Image URL",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2032,
        7872
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        2752,
        7872
      ],
      "id": "338dbd8e-2039-4fa8-80e8-b5e1488c4952",
      "name": "Combine Image Data"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "be6e148b-5ff9-4d41-9978-ab7b4477f58c",
              "name": "image_url",
              "value": "={{ $json.data.image.url }}",
              "type": "string"
            },
            {
              "id": "3e45b390-1413-45f3-a1a7-5e36cf60475d",
              "name": "filename",
              "value": "={{ $('Download Image').item.json.filename }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2576,
        7872
      ],
      "id": "acc3c1cb-7887-4f0c-bc9f-2def6350a10f",
      "name": "Image Fields"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord11').item.json.id }}",
            "Image Embedding Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Generate Images",
              "displayName": "Generate Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Images",
              "displayName": "Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Selected Images",
              "displayName": " Selected Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Main Image",
              "displayName": " Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Generation Status",
              "displayName": "Image Generation Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Embedding Status",
              "displayName": "Image Embedding Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Embed Images",
              "displayName": "Embed Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Suggest Internal Links",
              "displayName": "Suggest Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Internal Link Status",
              "displayName": "Internal Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Internal Link Suggestions",
              "displayName": "Internal Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add Internal Links",
              "displayName": "Add Internal Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1072,
        7568
      ],
      "id": "c353f47c-9bd6-4008-a8cf-fc79a53f4188",
      "name": "UpdateEmbedStatus",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## V3: This Flow is New\nIt's a critical part of being able to select images (see notes in above flow)",
        "height": 112,
        "width": 928
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        480,
        8144
      ],
      "id": "aaf3796e-714b-4eec-9ff5-8507d925d9db",
      "name": "Sticky Note108",
      "disabled": true
    },
    {
      "parameters": {
        "content": "## V3: Updated Name\nIn Airtable and below node\nMain Image ->  Main Image \n![](https://i.ibb.co/TD1Svq6y/Screenshot-1811.png)",
        "height": 176,
        "width": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2128,
        6688
      ],
      "id": "e5b2982d-6a7f-4aaf-b1cb-a504014511d5",
      "name": "Sticky Note109"
    },
    {
      "parameters": {
        "content": "## Webflow\nIf the in-built node is not working for Webflow `PostBlog` - try using this http request instead",
        "height": 272,
        "width": 288
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2976,
        12048
      ],
      "id": "267307a3-9140-4b62-8535-9a0454530239",
      "name": "Sticky Note110"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7d39bde9-0ab2-4e29-b53b-6df8ea5a6fdd",
              "name": "Title",
              "value": "={{ $json.fields.Title }}",
              "type": "string"
            },
            {
              "id": "359b9fb3-9006-4100-8d45-5e82c73de496",
              "name": "Upload Date",
              "value": "={{ $json.fields['Uploaded Date'] }}",
              "type": "string"
            },
            {
              "id": "ff11268b-c6e7-4b9f-b86a-fbf461eaac32",
              "name": "Summary",
              "value": "={{ $json.fields.Summary }}",
              "type": "string"
            },
            {
              "id": "19de8d57-2840-45a0-b96e-b9b276cd116d",
              "name": "Content",
              "value": "={{ $json.fields.Content }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        800,
        9312
      ],
      "id": "978925f3-4891-4565-b6cb-f89d5ba082c7",
      "name": "New Article Fields"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<article>\nTitle: {{ $json.Title }}\nSummary: {{ $json.Summary }}\nContent: {{ $json.Content }}\n</article>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "Based on the article content sent by the user, generate a 4-6 different search queries to be used in a RAG Vector Store to find related content.\nOutput only the query for each."
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        992,
        9312
      ],
      "id": "20c10915-9c3e-45b1-b9ea-9067e3cb2f6d",
      "name": "Generate RAG query1"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"search_queries\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"minItems\": 4,\n      \"maxItems\": 6,\n      \"description\": \"Array of search query strings\"\n    }\n  },\n  \"required\": [\"search_queries\"],\n  \"additionalProperties\": false\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1168,
        9472
      ],
      "id": "c744d8a5-27c5-40eb-aadd-220ee1c2737a",
      "name": "Structured Output Parser9"
    },
    {
      "parameters": {
        "fieldToSplitOut": "output.search_queries",
        "options": {
          "destinationFieldName": "search_query"
        }
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1296,
        9312
      ],
      "id": "c23e0a63-0a6e-43a2-9d71-4e36f1c97ae7",
      "name": "Split Out Queries1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        976,
        9472
      ],
      "id": "7ad18880-9add-4344-a675-1aafd6a236f2",
      "name": "GPT-4.1-mini1"
    },
    {
      "parameters": {
        "content": "## Search the vector database\nOlder than 14 days only",
        "height": 384,
        "width": 1280,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        944,
        9216
      ],
      "id": "d5b5909e-5c00-47de-8f79-95ef10607cdb",
      "name": "Sticky Note114"
    },
    {
      "parameters": {
        "mode": "load",
        "tableName": "documents_pg",
        "prompt": "={{ $json['search_query'] }}",
        "topK": 25,
        "useReranker": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        1504,
        9312
      ],
      "id": "9117879d-276b-483f-8d9d-0799f8a5614f",
      "name": "Postgres PGVector Store3"
    },
    {
      "parameters": {
        "model": "text-embedding-3-small",
        "options": {}
      },
      "id": "f4f4a10e-5cf0-44da-9b6f-9176a2127b77",
      "name": "Embeddings OpenAI3",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1,
      "position": [
        1440,
        9488
      ]
    },
    {
      "parameters": {
        "compare": "selectedFields",
        "fieldsToCompare": "document.metadata.record_id",
        "options": {}
      },
      "type": "n8n-nodes-base.removeDuplicates",
      "typeVersion": 2,
      "position": [
        2016,
        9312
      ],
      "id": "8c4f3c30-11b8-40b3-8f0b-a1bd8271047e",
      "name": "Remove Duplicates2"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.rerankerCohere",
      "typeVersion": 1,
      "position": [
        1616,
        9488
      ],
      "id": "f02fe23f-3944-4b44-a5d6-f17c8e054412",
      "name": "Reranker Cohere"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "06865bec-e3d3-4735-849e-bfde19b47255",
              "leftValue": "={{ $json.document.metadata.article_upload_date.toDateTime().format('yyyy-MM-dd') }}",
              "rightValue": "={{ $now.minus(14, 'days').format('yyyy-MM-dd') }}",
              "operator": {
                "type": "dateTime",
                "operation": "before"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        1808,
        9312
      ],
      "id": "08e66ebc-4fbc-4bad-a012-352a3b4cdc74",
      "name": "Older Than 14 Days"
    },
    {
      "parameters": {
        "content": "## V3: This Flow is New\nEach time an article is added - it searches for relevant older articles that could link to it",
        "height": 112,
        "width": 928
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1664,
        9056
      ],
      "id": "b0e28b83-b73f-4e98-b67d-e66e61da6e71",
      "name": "Sticky Note115"
    },
    {
      "parameters": {
        "content": "## V3: Loop removed & Re-ranker added\n- Loop was removed as the Postgres Node would fail if it found no query matches, stopping the loop. This gives it a higher chance of success\n- Re-ranker is a better way to find 'similarity' than the built in cosine similarity method. More info in [this video](https://www.skool.com/scrapes/classroom/a59b33db?md=6ad3f80d78f747438530d0ac528db65a). You must sign up for a free account with [Cohere](https://cohere.com/)",
        "height": 144,
        "width": 928
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1664,
        10016
      ],
      "id": "67c163f8-e7b0-4b82-b020-26520d4839bb",
      "name": "Sticky Note116"
    },
    {
      "parameters": {
        "topN": 5
      },
      "type": "@n8n/n8n-nodes-langchain.rerankerCohere",
      "typeVersion": 1,
      "position": [
        1856,
        10432
      ],
      "id": "a1df8241-70ce-4948-b94b-bd74d3959afd",
      "name": "Reranker Cohere1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<Inputs>\n- Article Title:\n{{ $('NewArticleAdded').first().json.fields.Title }}\n\n- **New Article URL:** \n{{ $('NewArticleAdded').first().json.fields['Article URL'] }}\n\n- Article content (full text to be analyzed):\n{{ $('NewArticleAdded').first().json.fields.Content }}\n\n- List of suggested internal links:\n{{ JSON.stringify($json.document.map(doc => ({\n  record_id: doc.metadata.record_id,\n  article_url: doc.metadata.article_url,\n  article_title: doc.metadata.article_title,\n  article_upload_date: doc.metadata.article_upload_date,\n  blog_id: doc.metadata.blog_id,\n  content: doc.pageContent\n})), null, 2) }}\n  \n</Inputs>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<Role>\nYou are an Internal Link **Placement Specialist**. You analyze a **new article** and a list of **relevant snippets from existing (old) articles**. Your purpose is to select the 4-6 best existing articles from the list and **recommend the exact anchor text** *from within their provided snippet* to link *to* the new article.\n</Role>\n\n<Constraints>\n- Accept a list of up to 15 suggested existing articles, each with a `pageContent` snippet.\n- Must select between 4-6 existing articles for placement.\n- **Use only existing text from the `pageContent` snippet as anchor text.** Take the words verbatim.\n- The recommended anchor text should be concise, natural, and highly relevant (approx. 2-7 words).\n- If the `pageContent` snippet contains an existing link, try to find an unlinked phrase to use as anchor text.\n- Base your selection on the strong topical relevance between the `pageContent` snippet and the new article's themes.\n- Do not make up new or old article URLs, make sure you only use those you receive in the inputs.\n</Constraints>\n\n<Inputs>\n- **New Article Title:** (The title of the new post that needs incoming links)\n- **New Article URL:** (The URL of the new post) - taken verbatim from the inputs.\n- **New Article Content:** (Full text of the new post, to be analyzed for themes)\n- **List of up to 15 Existing Article Suggestions:**\n  - `url` (The URL of the *existing* article)\n  - `title` (The title of the *existing* article)\n  - `pageContent` (A relevant text snippet from the existing article, e.g., \"Weve gone through nine huge `benefits of artificial intelligence in automation`...\")\n</Inputs>\n\n<Instructions>\n1.  **Analyze the New Article:**\n    * Read the `New Article Content` and `New Article Title`.\n    * Identify the primary key topics, themes, and keywords (e.g., \"AI Automation,\" \"Business Goals\").\n\n2.  **Evaluate Existing Article Snippets:**\n    * Iterate through the `List of up to 15 Existing Article Suggestions`.\n    * Analyze the `pageContent` snippet for each one.\n    * Compare the snippet's content with the themes of the `New Article` to confirm strong relevance.\n\n3.  **Select 4-6 Optimal Candidates:**\n    * Prioritize the existing articles where the `pageContent` snippet has the *strongest, most direct* topical connection to the new article.\n\n4.  **Identify Anchor Text & Generate Recommendations:**\n    * For each of the 4-6 selected candidates, scan its `pageContent` snippet for a naturally occurring phrase (2-7 words) that is highly relevant to the `New Article Title` or its core themes.\n    * This phrase will be the `recommended_anchor_text`.\n    * The anchor text must be an *exact, verbatim* match of text found within that `pageContent` snippet.\n    * **Example:**\n        * **New Article Title:** \"How to Start with AI Automation\"\n        * **Snippet:** \"...Weve gone through nine huge `benefits of artificial intelligence in automation`. But the real question is: where do you even start?...\"\n        * **Recommended Anchor Text:** `benefits of artificial intelligence in automation`\n    * Provide a brief `reason_for_suggestion` that justifies the link and the chosen anchor text.\n\n</Instructions>\n\n<Conclusions>\n- Return an ordered list of 4-6 selected **existing articles** with:\n  - `existing_article_title`: The title of the *old article* to be updated.\n  - `existing_article_url`: The URL of the *old article* to be updated.\n  - `recommended_anchor_text`: The exact, verbatim text from the snippet that should be hyperlinked.\n  - `context_snippet`: The full `pageContent` snippet that was provided, for reference.\n  - `new_article_url`: The URL of the new post (the link to be inserted).\n  - `reason_for_suggestion`: Explains the topical connection and why this specific anchor text is a good choice.\n</Conclusions>\n\n<Solutions>\n- If the `pageContent` snippet is too short or no suitable anchor text can be found, flag this in the reason and select a different candidate if possible.\n- If no candidates have strong topical relevance, flag for manual review.\n- If a snippet is excellent but already heavily linked, note this in the reason but still suggest the best available anchor text.\n</Solutions>"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        2448,
        9312
      ],
      "id": "e9a26388-6f32-4004-afb1-8f303ad9011d",
      "name": "Suggest Anchor Text1"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2432,
        9440
      ],
      "id": "6a7f3ec0-e011-4c6f-b7f3-9296705ba858",
      "name": "Gemini-2.5-Pro3"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"selected_articles_for_updating\": {\n      \"type\": \"array\",\n      \"description\": \"A list of 4-6 existing articles selected to be updated with a link to the new article.\",\n      \"minItems\": 4,\n      \"maxItems\": 6,\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"older_article_title\": {\n            \"type\": \"string\",\n            \"description\": \"The title of the old article that should be updated.\"\n          },\n          \"older_article_url\": {\n            \"type\": \"string\",\n            \"description\": \"The URL of the old article that should be updated. Taken verbatim from the input.\"\n          },\n          \"recommended_anchor_text\": {\n            \"type\": \"string\",\n            \"description\": \"The exact, verbatim text from the snippet that should be hyperlinked.\"\n          },\n          \"context_snippet\": {\n            \"type\": \"string\",\n            \"description\": \"The full 'pageContent' snippet that was provided, for reference.\"\n          },\n          \"reason_for_suggestion\": {\n            \"type\": \"string\",\n            \"description\": \"Explanation of the topical connection and why this anchor text is a good choice.\"\n          },\n          \"new_article_url\": {\n            \"type\": \"string\",\n            \"description\": \"The URL of the new article to link to (the link to be inserted - taken verbatim from the input).\"\n          }\n        },\n        \"required\": [\n          \"older_article_title\",\n          \"older_article_url\",\n          \"recommended_anchor_text\",\n          \"context_snippet\",\n          \"new_article_url\",\n          \"reason_for_suggestion\"\n        ]\n      }\n    }\n  },\n  \"required\": [\"selected_articles_for_updating\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2624,
        9440
      ],
      "id": "7f3907b3-d47c-47c8-a9b5-5cb844583477",
      "name": "Structured Output Parser11"
    },
    {
      "parameters": {
        "content": "## Create link suggestions\n",
        "height": 224,
        "width": 656,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2240,
        9232
      ],
      "id": "6f2cd58a-9958-42ba-8778-71a43e352f55",
      "name": "Sticky Note117"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "document"
            },
            {
              "fieldToAggregate": "score"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        2288,
        9312
      ],
      "id": "2395d2c8-7378-45a6-889b-5cecc0e77cd4",
      "name": "Aggregate3"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Article URL": "={{ $json.existing_article_url }}",
            "New Link Suggestions": "={{ $json.links.map((link, i) => `**${i + 1}. ${link.new_article_title}**\n**Anchor Text:** \\`${link.recommended_anchor_text}\\`\n**Reason:** ${link.reason_for_suggestion}\n**[URL](${link.new_article_url})**`).join('\\n\\n---\\n\\n') }}",
            "New Link Status": "Drafted",
            "New Links Suggested": "={{ $now }}"
          },
          "matchingColumns": [
            "Article URL"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Platform",
              "displayName": "Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New_Row_Added",
              "displayName": "New_Row_Added",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "New Link Suggestions",
              "displayName": "New Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "New Links Suggested",
              "displayName": "New Links Suggested",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "New Link Status",
              "displayName": "New Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Add New Links",
              "displayName": "Add New Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Last Updated",
              "displayName": "Article Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article ChangeLog",
              "displayName": "Article ChangeLog",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3136,
        9312
      ],
      "id": "993d61b1-5418-4024-a1f8-c34b5f37f33c",
      "name": "UpdateLinking1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "upsert",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Uploaded Date": "={{ $('BlogDetails').item.json['Uploaded Date'] }}",
            "Article URL": "={{ $('BlogDetails').item.json['Article URL'] }}",
            "Blog Id": "={{ $('Get published articles').item.json.id.toString() }}",
            "Platform": "={{ $('BlogDetails').item.json.Platform }}",
            "Title": "={{ $('BlogDetails').item.json.Title }}",
            "Summary": "={{ $('BlogDetails').item.json.Summary }}",
            "Content": "={{ $json.markdown_blog }}",
            "Article Last Updated": "={{ $('BlogDetails').item.json['Last Updated'] }}"
          },
          "matchingColumns": [
            "Blog Id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Platform",
              "displayName": "Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "New_Row_Added",
              "displayName": "New_Row_Added",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "New Link Suggestions",
              "displayName": "New Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Links Suggested",
              "displayName": "New Links Suggested",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Link Status",
              "displayName": "New Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add New Links",
              "displayName": "Add New Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Last Updated",
              "displayName": "Article Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article Changelog",
              "displayName": "Article Changelog",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1984,
        13744
      ],
      "id": "7771d88c-0692-4a0e-81a7-71a4860cc34d",
      "name": "AddToIndex",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## V3: Article Changes Logged\nChecks for changes between articles and logs them\n- Now runs one article at a time using a loop",
        "height": 112,
        "width": 816
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1536,
        13408
      ],
      "id": "61f9c02b-8449-42fc-8488-5e5f0b6a878d",
      "name": "Sticky Note118"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ea75834f-8390-4677-b0fa-91f684413d69",
              "leftValue": "={{ $json['Last Updated'] }}",
              "rightValue": "={{ $now.minus(1,'day') }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            },
            {
              "id": "906413ed-5f46-4dea-8a30-14c0bfa67fc3",
              "leftValue": "={{ $json['Uploaded Date'] }}",
              "rightValue": "={{ $json['Last Updated'] }}",
              "operator": {
                "type": "dateTime",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1792,
        13616
      ],
      "id": "3f9d2a11-e655-4dd0-b022-07bf13f342c2",
      "name": "IfUpdated24HRS"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        896,
        13616
      ],
      "id": "582f84a4-47eb-43a4-81a6-b3a3bbf114b3",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {
        "operation": "upsert",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Uploaded Date": "={{ $('BlogDetails').item.json['Uploaded Date'] }}",
            "Article URL": "={{ $('BlogDetails').item.json['Article URL'] }}",
            "Blog Id": "={{ $('Get published articles').item.json.id.toString() }}",
            "Platform": "={{ $('BlogDetails').item.json.Platform }}",
            "Title": "={{ $('BlogDetails').item.json.Title }}",
            "Summary": "={{ $('BlogDetails').item.json.Summary }}",
            "Content": "={{ $('Markdown').item.json.markdown_blog }}",
            "Article Last Updated": "={{ $('BlogDetails').item.json['Last Updated'] }}",
            "Article ChangeLog": "={{ $json.changeLog }}"
          },
          "matchingColumns": [
            "Blog Id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Platform",
              "displayName": "Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "New_Row_Added",
              "displayName": "New_Row_Added",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "New Link Suggestions",
              "displayName": "New Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Links Suggested",
              "displayName": "New Links Suggested",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Link Status",
              "displayName": "New Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add New Links",
              "displayName": "Add New Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Last Updated",
              "displayName": "Article Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article ChangeLog",
              "displayName": "Article ChangeLog",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2400,
        13744
      ],
      "id": "c96e7002-2f44-4b82-a282-65b6833e3572",
      "name": "AddToIndex2",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Detect Content Changes - Add Changes to Log\n",
        "height": 330,
        "width": 996,
        "color": 7
      },
      "id": "6ca80f2d-5cfc-4a27-98e4-49bde8e5779f",
      "name": "Sticky Note119",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1536,
        13536
      ],
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "/**\n * Helper function to find ALL differing lines between two blocks of text.\n * @param {string} oldText - The old version of the text.\n * @param {string} newText - The new version of the text.\n * @returns {string | null} - A formatted string of all changes, or null if no change.\n */\nfunction findAllDifferences(oldText, newText) {\n  // Normalize line endings and split into lines\n  const oldLines = (oldText || '').replace(/\\r\\n/g, '\\n').split('\\n');\n  const newLines = (newText || '').replace(/\\r\\n/g, '\\n').split('\\n');\n\n  const maxLines = Math.max(oldLines.length, newLines.length);\n  const changes = [];\n\n  for (let i = 0; i < maxLines; i++) {\n    const oldLine = oldLines[i];\n    const newLine = newLines[i];\n\n    // Handle undefined lines (one text is longer than the other)\n    if (oldLine === undefined) {\n      if (newLine.trim().length > 0) { // Only log non-empty additions\n        changes.push(`Added line ${i + 1}: \"${newLine.trim()}\"`);\n      }\n    } else if (newLine === undefined) {\n      if (oldLine.trim().length > 0) { // Only log non-empty deletions\n        changes.push(`Removed line ${i + 1}: \"${oldLine.trim()}\"`);\n      }\n    } else {\n      // Normalize both lines for comparison (remove formatting differences)\n      const normalizedOld = oldLine.trim()\n        .replace(/\\\\/g, '') // Remove escape characters\n        .replace(/^[*-]\\s+/g, ' ') // Normalize bullet points\n        .replace(/^#+\\s*\\d+\\\\\\.\\s*/g, (match) => match.replace('\\\\', '')); // Fix escaped numbers in headers\n      \n      const normalizedNew = newLine.trim()\n        .replace(/\\\\/g, '')\n        .replace(/^[*-]\\s+/g, ' ')\n        .replace(/^#+\\s*\\d+\\\\\\.\\s*/g, (match) => match.replace('\\\\', ''));\n      \n      // Only log if there's an actual content difference after normalization\n      if (normalizedOld !== normalizedNew) {\n        changes.push(`Line ${i + 1} was modified.\n  Old: \"${oldLine.trim()}\"\n  New: \"${newLine.trim()}\"`);\n      }\n    }\n  }\n  \n  return changes.length > 0 ? changes.join('\\n\\n') : null;\n}\n\n// Loop over input items and compare old vs new blog post versions\nfor (const item of $input.all()) {\n  const json = item.json;\n\n  // Get NEW values from different nodes\n  const newTitle = $('BlogDetails').first().json.Title;\n  const newSummary = $('BlogDetails').first().json.Summary;\n  const newContent = $('Markdown').first().json.markdown_blog;\n\n  // Get OLD values from Airtable (top level)\n  const oldTitle = json.Title;\n  const oldSummary = json.Summary;\n  const oldContent = json.Content;\n  const record_id = json.id;\n  const existingChangeLog = json['Article ChangeLog'] || ''; // Get existing changelog\n\n  let isChanged = false;\n  const changesMade = [];\n  const today = new Date().toISOString().split('T')[0]; // 'YYYY-MM-DD'\n\n  // Compare Title\n  if (newTitle && newTitle !== oldTitle) {\n    isChanged = true;\n    const titleChange = `Title update\nUpdated: ${today}\nChange: The title was changed from '${oldTitle}' to '${newTitle}'.\n---`;\n    changesMade.push(titleChange);\n  }\n\n  // Compare Summary\n  if ((newSummary || '').trim() !== (oldSummary || '').trim()) {\n    isChanged = true;\n    const summaryChange = `Summary update\nUpdated: ${today}\nChange: The summary was modified.\n  Old: \"${(oldSummary || '').trim().substring(0, 200)}\"\n  New: \"${(newSummary || '').trim().substring(0, 200)}\"\n---`;\n    changesMade.push(summaryChange);\n  }\n\n  // Compare Content (Main Body) - now finds ALL changes\n  const contentChanges = findAllDifferences(oldContent, newContent);\n  if (contentChanges) {\n    isChanged = true;\n    const bodyChange = `Content update\nUpdated: ${today}\n${contentChanges}\n---`;\n    changesMade.push(bodyChange);\n  }\n\n  // Build the change log - prepend new changes to existing log\n  let newChangeLog = existingChangeLog;\n  if (isChanged) {\n    const newLogEntries = changesMade.join('\\n\\n');\n    // Add new entries to the TOP (most recent first)\n    newChangeLog = existingChangeLog ? `${newLogEntries}\\n\\n${existingChangeLog}` : newLogEntries;\n  }\n\n  // Replace item.json with only the comparison data\n  item.json = {\n    record_id: record_id,\n    isChanged: isChanged,\n    changeLog: newChangeLog\n  };\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2192,
        13600
      ],
      "id": "0d7cc72c-3413-4591-b0bb-271fc2f8bb75",
      "name": "DetectChanges"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "filterByFormula": "={Blog Id}='{{ $json['Blog Id'] }}'",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1984,
        13600
      ],
      "id": "893bdbd8-a55e-44e6-8afd-44156ec8a6b7",
      "name": "SearchRecords",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        896,
        14032
      ],
      "id": "97dd1052-7219-417b-87d5-ef7f1b9f48aa",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ea75834f-8390-4677-b0fa-91f684413d69",
              "leftValue": "={{ $json['Last Updated'] }}",
              "rightValue": "={{ $now.minus(1,'day') }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            },
            {
              "id": "906413ed-5f46-4dea-8a30-14c0bfa67fc3",
              "leftValue": "={{ $json['Uploaded Date'] }}",
              "rightValue": "={{ $json['Last Updated'] }}",
              "operator": {
                "type": "dateTime",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1792,
        14032
      ],
      "id": "602a3efb-3900-4c44-9f02-85e73b9e5c05",
      "name": "IfUpdated24HRS1"
    },
    {
      "parameters": {
        "content": "## Detect Content Changes - Add Changes to Log\n",
        "height": 362,
        "width": 996,
        "color": 7
      },
      "id": "dba521cc-2098-471e-a9b8-63c406f22b22",
      "name": "Sticky Note120",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1536,
        13952
      ],
      "disabled": true
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "filterByFormula": "={Blog Id}='{{ $json['Blog Id'] }}'",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1984,
        14016
      ],
      "id": "3820d2e4-d6d3-4efd-8839-8a7443450a67",
      "name": "SearchRecords1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "/**\n * Helper function to find ALL differing lines between two blocks of text.\n * @param {string} oldText - The old version of the text.\n * @param {string} newText - The new version of the text.\n * @returns {string | null} - A formatted string of all changes, or null if no change.\n */\nfunction findAllDifferences(oldText, newText) {\n  // Normalize line endings and split into lines\n  const oldLines = (oldText || '').replace(/\\r\\n/g, '\\n').split('\\n');\n  const newLines = (newText || '').replace(/\\r\\n/g, '\\n').split('\\n');\n\n  const maxLines = Math.max(oldLines.length, newLines.length);\n  const changes = [];\n\n  for (let i = 0; i < maxLines; i++) {\n    const oldLine = oldLines[i];\n    const newLine = newLines[i];\n\n    // Handle undefined lines (one text is longer than the other)\n    if (oldLine === undefined) {\n      if (newLine.trim().length > 0) { // Only log non-empty additions\n        changes.push(`Added line ${i + 1}: \"${newLine.trim()}\"`);\n      }\n    } else if (newLine === undefined) {\n      if (oldLine.trim().length > 0) { // Only log non-empty deletions\n        changes.push(`Removed line ${i + 1}: \"${oldLine.trim()}\"`);\n      }\n    } else {\n      // Normalize both lines for comparison (remove formatting differences)\n      const normalizedOld = oldLine.trim()\n        .replace(/\\\\/g, '') // Remove escape characters\n        .replace(/^[*-]\\s+/g, ' ') // Normalize bullet points\n        .replace(/^#+\\s*\\d+\\\\\\.\\s*/g, (match) => match.replace('\\\\', '')); // Fix escaped numbers in headers\n      \n      const normalizedNew = newLine.trim()\n        .replace(/\\\\/g, '')\n        .replace(/^[*-]\\s+/g, ' ')\n        .replace(/^#+\\s*\\d+\\\\\\.\\s*/g, (match) => match.replace('\\\\', ''));\n      \n      // Only log if there's an actual content difference after normalization\n      if (normalizedOld !== normalizedNew) {\n        changes.push(`Line ${i + 1} was modified.\n  Old: \"${oldLine.trim()}\"\n  New: \"${newLine.trim()}\"`);\n      }\n    }\n  }\n  \n  return changes.length > 0 ? changes.join('\\n\\n') : null;\n}\n\n// Loop over input items and compare old vs new blog post versions\nfor (const item of $input.all()) {\n  const json = item.json;\n\n  // Get NEW values from different nodes\n  const newTitle = $('BlogDetails1').first().json.Title;\n  const newSummary = $('BlogDetails1').first().json.Summary;\n  const newContent = $('Markdown1').first().json.markdown_blog;\n\n  // Get OLD values from Airtable (top level)\n  const oldTitle = json.Title;\n  const oldSummary = json.Summary;\n  const oldContent = json.Content;\n  const record_id = json.id;\n  const existingChangeLog = json['Article ChangeLog'] || ''; // Get existing changelog\n\n  let isChanged = false;\n  const changesMade = [];\n  const today = new Date().toISOString().split('T')[0]; // 'YYYY-MM-DD'\n\n  // Compare Title\n  if (newTitle && newTitle !== oldTitle) {\n    isChanged = true;\n    const titleChange = `Title update\nUpdated: ${today}\nChange: The title was changed from '${oldTitle}' to '${newTitle}'.\n---`;\n    changesMade.push(titleChange);\n  }\n\n  // Compare Summary\n  if ((newSummary || '').trim() !== (oldSummary || '').trim()) {\n    isChanged = true;\n    const summaryChange = `Summary update\nUpdated: ${today}\nChange: The summary was modified.\n  Old: \"${(oldSummary || '').trim().substring(0, 200)}\"\n  New: \"${(newSummary || '').trim().substring(0, 200)}\"\n---`;\n    changesMade.push(summaryChange);\n  }\n\n  // Compare Content (Main Body) - now finds ALL changes\n  const contentChanges = findAllDifferences(oldContent, newContent);\n  if (contentChanges) {\n    isChanged = true;\n    const bodyChange = `Content update\nUpdated: ${today}\n${contentChanges}\n---`;\n    changesMade.push(bodyChange);\n  }\n\n  // Build the change log - prepend new changes to existing log\n  let newChangeLog = existingChangeLog;\n  if (isChanged) {\n    const newLogEntries = changesMade.join('\\n\\n');\n    // Add new entries to the TOP (most recent first)\n    newChangeLog = existingChangeLog ? `${newLogEntries}\\n\\n${existingChangeLog}` : newLogEntries;\n  }\n\n  // Replace item.json with only the comparison data\n  item.json = {\n    record_id: record_id,\n    isChanged: isChanged,\n    changeLog: newChangeLog\n  };\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2176,
        14016
      ],
      "id": "f2fd60ee-b3a6-4ba8-8fd4-9d3f4bd68aba",
      "name": "DetectChanges1"
    },
    {
      "parameters": {
        "operation": "upsert",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Uploaded Date": "={{ $('BlogDetails1').item.json['Uploaded Date'] }}",
            "Article URL": "={{ $('BlogDetails1').item.json['Article URL'] }}",
            "Blog Id": "={{ $('Get published articles1').item.json.id }}",
            "Platform": "={{ $('BlogDetails1').item.json.Platform }}",
            "Title": "={{ $('BlogDetails1').item.json.Title }}",
            "Summary": "={{ $('BlogDetails1').item.json.Summary }}",
            "Content": "={{ $json.markdown_blog }}",
            "Article Last Updated": "={{ $('BlogDetails1').item.json['Last Updated'] }}"
          },
          "matchingColumns": [
            "Blog Id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Platform",
              "displayName": "Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "New_Row_Added",
              "displayName": "New_Row_Added",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "New Link Suggestions",
              "displayName": "New Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Links Suggested",
              "displayName": "New Links Suggested",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Link Status",
              "displayName": "New Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add New Links",
              "displayName": "Add New Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Last Updated",
              "displayName": "Article Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article Changelog",
              "displayName": "Article Changelog",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2368,
        14176
      ],
      "id": "904fa312-c2ce-4d4f-adf5-6aefb85a87ca",
      "name": "AddToIndex3",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "output.selected_articles_for_updating",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        2752,
        9312
      ],
      "id": "338b9d44-c29e-44dc-8375-e32b056e4e19",
      "name": "Split Out"
    },
    {
      "parameters": {
        "jsCode": "// Group items by existing_article_url\nconst grouped = {};\n\nfor (const item of $input.all()) {\n  const url = item.json.existing_article_url;\n  \n  if (!grouped[url]) {\n    grouped[url] = {\n      existing_article_url: url,\n      existing_article_title: item.json.existing_article_title,\n      links: []\n    };\n  }\n  \n  grouped[url].links.push({\n    recommended_anchor_text: item.json.recommended_anchor_text,\n    context_snippet: item.json.context_snippet,\n    new_article_url: item.json.new_article_url,\n    new_article_title: $('New Article Fields').first().json.Title,\n    reason_for_suggestion: item.json.reason_for_suggestion\n  });\n}\n\n// Convert object to array\nconst result = Object.values(grouped);\n\nreturn result.map(item => ({ json: item }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2960,
        9312
      ],
      "id": "3bda548b-1c1a-4e3d-9175-85717fde5e76",
      "name": "GroupByArticle"
    },
    {
      "parameters": {
        "path": "internal-links-backwards",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        480,
        11232
      ],
      "id": "85ecdd9a-cfe9-4592-9847-a4f81fc38742",
      "name": "Webhook10",
      "webhookId": "0bb1f614-e9e7-4c99-8015-b5576f5cafef"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "id": "={{ $('Webhook10').item.json.query.record_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        672,
        11232
      ],
      "id": "6d9218b1-4085-45f0-84d7-fdd8f64003be",
      "name": "GetRecord10",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Process\nOnly if information not complete",
        "height": 234,
        "width": 292,
        "color": 7
      },
      "id": "a02e99de-7109-40aa-b0a2-4c7e1dce1716",
      "name": "Sticky Note122",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        816,
        11152
      ],
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e5320f5-9681-4a50-85f4-3849bded95c7",
              "leftValue": "={{ $json['New Link Suggestions'] }}",
              "rightValue": "Incomplete",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        912,
        11232
      ],
      "id": "799dccd5-0571-4bfa-a245-3cd8ac8797b6",
      "name": "IfReady5"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "cc785e36-336f-446b-b5f2-e6d2a171b2da",
              "name": "Internal Link Suggestions",
              "value": "={{ $('Webhook7').isExecuted ? $json['Internal Link Suggestions'] : $json['New Link Suggestions'] }}",
              "type": "string"
            },
            {
              "id": "399ebb47-8b7d-490e-bc5f-50969f380bf6",
              "name": "Blog Content",
              "value": "={{ $('Webhook7').isExecuted ? $json['Blog Content'] : $json.Content }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1264,
        11120
      ],
      "id": "15df494c-f9a1-4de1-9c0b-dc63a594aa71",
      "name": "Internal Link Suggestions"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Webhook7').isExecuted }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "id": "4253b6d7-981d-4cef-a982-bf31e2c00047"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Not published"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "78eb7d0e-5145-42d4-ba31-1d8f7fa8e02a",
                    "leftValue": "={{ $('Webhook10').isExecuted }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Published already"
            }
          ]
        },
        "options": {
          "allMatchingOutputs": true
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        2128,
        11120
      ],
      "id": "10bd3ade-c4b1-4678-8fd9-f05ee6cbc2c4",
      "name": "InputSwitch"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord10').item.json.id }}",
            "New Link Status": "Added to Article",
            "Pending Article Update": "={{ $json.updated_markdown }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Platform",
              "displayName": "Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New_Row_Added",
              "displayName": "New_Row_Added",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "New Link Suggestions",
              "displayName": "New Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Links Suggested",
              "displayName": "New Links Suggested",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Link Status",
              "displayName": "New Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Add New Links",
              "displayName": "Add New Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Last Updated",
              "displayName": "Article Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article ChangeLog",
              "displayName": "Article ChangeLog",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Pending Article Update",
              "displayName": "Pending Article Update",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2416,
        11200
      ],
      "id": "401c9de8-b664-442f-a1da-df2540c16b17",
      "name": "ReplaceMarkdown2",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Updates\n- If blog is already published, markdown content is replaced in the 'Published' table\n- If not, replaced directly in the blog content before it's published",
        "height": 522,
        "width": 388,
        "color": 7
      },
      "id": "19a32e1d-b76f-49c4-b2a3-d48ea53feda8",
      "name": "Sticky Note123",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2256,
        10864
      ],
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Input\nReceived from unpublished blog draft",
        "height": 234,
        "width": 340,
        "color": 7
      },
      "id": "213b7458-9980-4f52-b058-491ada2f3729",
      "name": "Sticky Note124",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        10896
      ],
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Input\nReceived from published blog",
        "height": 234,
        "width": 340,
        "color": 7
      },
      "id": "5d7a9e06-b4b4-496e-8ac5-b413b669a817",
      "name": "Sticky Note125",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        11152
      ],
      "disabled": true
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 7
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        704,
        12880
      ],
      "id": "8910c202-0892-4552-b764-4b39b3455525",
      "name": "Per Day1",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "filterByFormula": "NOT({Pending Article Update}='')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        944,
        12880
      ],
      "id": "d85c42ee-4a9a-40db-96d5-1efb9d7d3a57",
      "name": "GetArticles1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Get articles\nOnly if pending updates",
        "height": 250,
        "width": 484,
        "color": 7
      },
      "id": "71c64e5f-9a09-4891-bb48-565f4ef9eaaa",
      "name": "Sticky Note121",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        656,
        12800
      ],
      "disabled": true
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Article Update Status": "Processing",
            "id": "={{ $('GetArticles1').item.json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Platform",
              "displayName": "Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New_Row_Added",
              "displayName": "New_Row_Added",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "New Link Suggestions",
              "displayName": "New Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Links Suggested",
              "displayName": "New Links Suggested",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Link Status",
              "displayName": "New Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add New Links",
              "displayName": "Add New Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Last Updated",
              "displayName": "Article Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article ChangeLog",
              "displayName": "Article ChangeLog",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Pending Article Update",
              "displayName": "Pending Article Update",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article Update Status",
              "displayName": "Article Update Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Updated Article on Platform",
                  "value": "Updated Article on Platform"
                }
              ],
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1456,
        12656
      ],
      "id": "410cf049-3da9-41e5-8f3e-b132eb1fa4c0",
      "name": "UpdateArticleStatus2",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Prepare article assets\n",
        "height": 250,
        "width": 612,
        "color": 7
      },
      "id": "287343e6-3a09-47d8-9d3d-52dfaa05cadd",
      "name": "Sticky Note126",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1168,
        12800
      ],
      "disabled": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1184,
        12880
      ],
      "id": "e179a172-01c9-4ab9-aee1-17e3a30f9ea0",
      "name": "One at a Time1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.platform }}",
                    "rightValue": "Wordpress",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "7bfacec9-b4e7-4ed9-b182-40326d4c7373"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "WORDPRESS"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "5ccab49e-b2a9-49c3-ac9c-c92dc61d7e12",
                    "leftValue": "={{ $json.platform }}",
                    "rightValue": "Webflow",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "WEBFLOW"
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        1632,
        12864
      ],
      "id": "42593ba0-68ab-461d-8645-7c441919e4a9",
      "name": "Switch1"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblBuFhvKR0W9D27R",
          "mode": "list",
          "cachedResultName": "Blog Content",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblBuFhvKR0W9D27R"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetArticles1').item.json.id }}",
            "Upload Status": "Error",
            "Error Description": "Select a platform to update (e.g. Wordpress, Webflow) and try again"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Content Rich Formatting",
              "displayName": "Blog Content Rich Formatting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Visualize Article",
              "displayName": "Visualize Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": " Platform",
              "displayName": " Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Status",
              "displayName": " Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Draft",
                  "value": "Draft"
                },
                {
                  "name": "Approved",
                  "value": "Approved"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": " Publish Date",
              "displayName": " Publish Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Status",
              "displayName": "Upload Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Error Description",
              "displayName": "Error Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Date Created",
              "displayName": "Date Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Delete?",
              "displayName": "Delete?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Delete",
                  "value": "Delete"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Main Image",
              "displayName": "Main Image",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1840,
        13056
      ],
      "id": "fa7922d7-3b22-43c7-bede-b98da151dd7f",
      "name": "ErrorMessage1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## WORDPRESS\nUpload feature image -> convert to HTML -> wrap images so they look good -> publish",
        "height": 272,
        "width": 912,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2000,
        12608
      ],
      "id": "f2fa3782-58e2-4266-af6f-aafcdb5813ab",
      "name": "Sticky Note127"
    },
    {
      "parameters": {
        "mode": "markdownToHtml",
        "markdown": "={{ $('Switch1').item.json.markdown_blog }}",
        "destinationKey": "html_blog",
        "options": {}
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        2048,
        12720
      ],
      "id": "b441da2f-af4b-4d1f-aec5-c24f84f0c6e8",
      "name": "Convert to HTML2"
    },
    {
      "parameters": {
        "jsCode": "// Loop over all input items\nfor (const item of $input.all()) {\n  const html = item.json.html_blog || '';\n\n  // Wrap each <img> and enforce width control with inline style\n  const wrapped = html.replace(\n    /<img([^>]*)>/g,\n    '<figure class=\"wp-block-image alignnone\"><img$1 style=\"max-width:100%; height:auto; display:block; margin:0 auto;\"></figure>'\n  );\n\n  // Store in a new field\n  item.json.wrapped_html = wrapped;\n}\n\nreturn $input.all();\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2224,
        12720
      ],
      "id": "db41794c-300d-4035-bdf0-a647d7f24334",
      "name": "WrapImages1"
    },
    {
      "parameters": {
        "content": "## WEBFLOW\nConvert to HTML -> Format newlines and tables -> publish (with images)\n",
        "height": 208,
        "width": 912,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2000,
        12896
      ],
      "id": "3c8a96c0-db68-498f-bf63-d5de33f50b8b",
      "name": "Sticky Note129"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetArticles1').item.json.id }}",
            "Article Last Updated": "={{ $now.format('yyyy-MM-dd') }}",
            "Article Update Status": "Updated Article on Platform"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Platform",
              "displayName": "Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New_Row_Added",
              "displayName": "New_Row_Added",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "New Link Suggestions",
              "displayName": "New Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Links Suggested",
              "displayName": "New Links Suggested",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Link Status",
              "displayName": "New Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add New Links",
              "displayName": "Add New Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Last Updated",
              "displayName": "Article Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article ChangeLog",
              "displayName": "Article ChangeLog",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Pending Article Update",
              "displayName": "Pending Article Update",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article Update Status",
              "displayName": "Article Update Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Updated Article on Platform",
                  "value": "Updated Article on Platform"
                }
              ],
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2768,
        12720
      ],
      "id": "834fb856-bf70-4369-8141-425b1b907023",
      "name": "UploadedDate2",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Update blog posts\n- Input: `Any pending article updates e.g. new internal links`\n- Output: `Blog article updated on chosen platform`\n",
        "height": 832,
        "width": 2880,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        448,
        12480
      ],
      "id": "fd71ce95-a124-4ebf-90b5-6fe1c22b6171",
      "name": "Sticky Note130"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items, replace '\\n' with spaces, and add table styling\nfor (const item of $input.all()) {\n  if (item.json.data) {\n    // First replace newlines with spaces\n    let processedHtml = item.json.data.replace(/\\n/g, ' ');\n    \n    // Add table styling\n    const styleTag = `\n<style>\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin: 20px 0;\n}\nth, td {\n  border: 1px solid #ddd;\n  padding: 12px;\n  text-align: left;\n}\nth {\n  border-bottom: 2px solid #ddd;\n}\n</style>`;\n    \n    // Add the style tag before the first table if there is a table\n    if (processedHtml.includes('<table')) {\n      processedHtml = processedHtml.replace('<table', styleTag + '<table');\n    }\n    \n    item.json.htmlField = processedHtml;\n  }\n}\n\nreturn $input.all();"
      },
      "id": "4ff4bc0a-3ce0-4c54-bf6c-1a28ff63786a",
      "name": "Format /n and Tables1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2192,
        12976
      ],
      "notes": "Replaces /n with <br> to satisfy n8n working with webflow rich text uploads"
    },
    {
      "parameters": {
        "mode": "markdownToHtml",
        "markdown": "={{ $('Switch1').item.json.markdown_blog }}",
        "options": {
          "simplifiedAutoLink": true,
          "headerLevelStart": 4,
          "noHeaderId": true,
          "tables": true
        }
      },
      "id": "17224912-298c-43a4-a127-801ab742640a",
      "name": "Convert to HTML3",
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        2032,
        12976
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "replace these with your own category names from webflow",
        "height": 80,
        "width": 182
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2512,
        13120
      ],
      "id": "5d381241-65d8-4847-aa8f-31515817f83a",
      "name": "Sticky Note131"
    },
    {
      "parameters": {
        "content": "replace with your own blog base url ",
        "height": 80,
        "width": 182
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2320,
        13120
      ],
      "id": "294fc38e-10fd-49dc-a6af-881e4817cd4d",
      "name": "Sticky Note132"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2a28e76a-7b7b-43ce-a56e-0aca22ec10ce",
              "name": "blog_base_url",
              "value": "=https://www.automake.io/blog/",
              "type": "string"
            },
            {
              "id": "3cae6835-a9a6-46d3-af8d-bccf8689aebf",
              "name": "blog_slug",
              "value": "={{ $json.title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '') }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2368,
        12976
      ],
      "id": "f907543d-b1b3-4033-881c-c5ada3760ba1",
      "name": "Set Site URL1"
    },
    {
      "parameters": {
        "content": "## Webflow\nIf the in-built node is not working for Webflow `PostBlog` - try using this http request instead",
        "height": 272,
        "width": 288
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2976,
        12976
      ],
      "id": "66b693f0-8592-47cb-ac94-a92a38bfb137",
      "name": "Sticky Note133"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "4132b8ec-a2a6-4287-a260-286dd951a6eb",
              "name": "post_id",
              "value": "={{ $json['Blog Id'] }}",
              "type": "string"
            },
            {
              "id": "7066a7a8-5571-4e49-af3d-7147861d3343",
              "name": "markdown_blog",
              "value": "={{ $json['Pending Article Update'] }}",
              "type": "string"
            },
            {
              "id": "2802aff5-9bf3-4323-a801-e6ddec01bf97",
              "name": "platform",
              "value": "={{ $json['Platform'] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1424,
        12880
      ],
      "id": "e55dd837-d5d0-4e65-a888-126e3f5f3265",
      "name": "PrepareUpdates"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://wordpress-n8n-u28170.vm.elestio.app/wp-json/wp/v2/posts/{{ $('PrepareUpdates').item.json.post_id }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content",
              "value": "={{ $('WrapImages1').item.json.wrapped_html }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2432,
        12720
      ],
      "id": "369266dc-47b0-445a-bf0e-493d6a4dbe51",
      "name": "UpdateWordpressPost"
    },
    {
      "parameters": {
        "method": "PATCH",
        "url": "=https://api.webflow.com/v2/collections/YOUR_COLLECTION_ID_HERE/items/{{ $('PrepareUpdates').item.json.post_id }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "oAuth2Api",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            },
            {
              "name": "content-type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "={{ JSON.stringify({ fieldData: { name: $json.title, slug: $json.blog_slug, 'rich-text': $json.htmlField, 'post-summary': $json.summary, 'thumbnail-image': $json.main_image_url, author: 'YOUR_AUTHOR_ID_HERE' }, isDraft: false, isArchived: false }) }}"
            },
            {
              "name": "fieldData.name",
              "value": "={{ $json.title }}"
            },
            {
              "name": "fieldData.slug",
              "value": "={{ $json.blog_slug }}"
            },
            {
              "name": "fieldData.'rich-text'",
              "value": "={{ $json.htmlField }}"
            },
            {
              "name": "fieldData.'post-summary'",
              "value": "={{ $json.summary }}"
            },
            {
              "name": "fieldData.'thumbnail-image'",
              "value": "={{ $json.main_image_url }}"
            },
            {
              "name": "fieldData.author",
              "value": "='YOUR_AUTHOR_ID_HERE'"
            },
            {
              "name": "isDraft",
              "value": "false"
            },
            {
              "name": "isArchived",
              "value": "false"
            }
          ]
        },
        "options": {}
      },
      "id": "dc3a84e8-4066-4bef-b7ab-856eab3b8bd0",
      "name": "UpdateWebflowPost",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2368,
        13232
      ],
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.webflow.com/v2/collections/YOUR_COLLECTION_ID_HERE/items",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "oAuth2Api",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            },
            {
              "name": "content-type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "={{ JSON.stringify({ fieldData: { name: $json.title, slug: $json.blog_slug, 'rich-text': $json.htmlField, 'post-summary': $json.summary, 'thumbnail-image': $json.main_image_url, author: 'YOUR_AUTHOR_ID_HERE' }, isDraft: false, isArchived: false }) }}"
            },
            {
              "name": "fieldData.name",
              "value": "={{ $json.title }}"
            },
            {
              "name": "fieldData.slug",
              "value": "={{ $json.blog_slug }}"
            },
            {
              "name": "fieldData.'rich-text'",
              "value": "={{ $json.htmlField }}"
            },
            {
              "name": "fieldData.'post-summary'",
              "value": "={{ $json.summary }}"
            },
            {
              "name": "fieldData.'thumbnail-image'",
              "value": "={{ $json.main_image_url }}"
            },
            {
              "name": "fieldData.author",
              "value": "='YOUR_AUTHOR_ID_HERE'"
            },
            {
              "name": "isDraft",
              "value": "false"
            },
            {
              "name": "isArchived",
              "value": "false"
            }
          ]
        },
        "options": {}
      },
      "id": "2f1e35b1-fde1-4b9c-a080-94116b4574aa",
      "name": "PostArticleWebflow",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3072,
        13088
      ],
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.webflow.com/v2/collections/COLLECTION_ID/items/publish",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"itemIds\": [\n    \"{{ $json.id }}\"\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2576,
        13232
      ],
      "id": "2745df91-3d3e-444b-979b-3c2b56e7fe33",
      "name": "PublishChanges",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "update",
        "siteId": "66ffc85db3b82d0e2ec83334",
        "collectionId": "671a6d1eeca81660f6f97dd1",
        "itemId": "={{ $('PrepareUpdates').item.json.post_id }}",
        "live": true,
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "post-body",
              "fieldValue": "={{ $json.htmlField }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.webflow",
      "typeVersion": 2,
      "position": [
        2560,
        12976
      ],
      "id": "8d4e51a7-c13f-40e3-a23c-820b4c82fb31",
      "name": "UpdateWebflowPost1"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tbl5gJPpg0Z6s6By0",
          "mode": "list",
          "cachedResultName": "Published",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetArticles1').item.json.id }}",
            "Article Last Updated": "={{ $now.format('yyyy-MM-dd') }}",
            "Article Update Status": "Updated Article on Platform"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Blog Id",
              "displayName": "Blog Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Platform",
              "displayName": "Platform",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Wordpress",
                  "value": "Wordpress"
                },
                {
                  "name": "Webflow",
                  "value": "Webflow"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Uploaded Date",
              "displayName": "Uploaded Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Article URL",
              "displayName": "Article URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New_Row_Added",
              "displayName": "New_Row_Added",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "New Link Suggestions",
              "displayName": "New Link Suggestions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Links Suggested",
              "displayName": "New Links Suggested",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "New Link Status",
              "displayName": "New Link Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Drafted",
                  "value": "Drafted"
                },
                {
                  "name": "Added to Article",
                  "value": "Added to Article"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Add New Links",
              "displayName": "Add New Links",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Last Updated",
              "displayName": "Article Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article ChangeLog",
              "displayName": "Article ChangeLog",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Pending Article Update",
              "displayName": "Pending Article Update",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Article Update Status",
              "displayName": "Article Update Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Updated Article on Platform",
                  "value": "Updated Article on Platform"
                }
              ],
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2768,
        12976
      ],
      "id": "f5c82dda-bde1-4c59-af47-9a877ce3a218",
      "name": "UploadedDate4",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ea75834f-8390-4677-b0fa-91f684413d69",
              "leftValue": "={{ $json['Last Updated'] }}",
              "rightValue": "={{ $now.minus(1,'day') }}",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1584,
        13616
      ],
      "id": "45934118-72a6-491a-acb9-8123579bc75a",
      "name": "IfUpdateDate"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ea75834f-8390-4677-b0fa-91f684413d69",
              "leftValue": "={{ $json['Last Updated'] }}",
              "rightValue": "={{ $now.minus(1,'day') }}",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1584,
        14032
      ],
      "id": "20e2409e-59a3-4123-a5b1-d41cff706fdb",
      "name": "IfUpdateDate1"
    },
    {
      "parameters": {
        "content": "## V3: New Flow\nProcesses updates to blog posts",
        "height": 96,
        "width": 416
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1008,
        12480
      ],
      "id": "71c824d1-2875-44ce-a766-e55f482c9171",
      "name": "Sticky Note128"
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Seed Keyword": "={{ $('GetRecord2').item.json['Seed Keyword'] }}",
            "Competition": "={{ $json.competition }}",
            "Volume": "={{ $json.volume }}",
            "CPC": "={{ $json.cpc }}",
            "KW Difficulty": "={{ $json.kw_difficulty }}",
            "Company": "=['{{ $('GetRecord2').item.json['Company'][0] }}']",
            "URL": "=['{{ $('GetRecord2').item.json.URL }}']",
            "Keyword": "={{ $json.keyword }}",
            "Longtail Status": "Complete"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Competition",
              "displayName": "Competition",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Volume",
              "displayName": "Volume",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "CPC",
              "displayName": "CPC",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "KW Difficulty",
              "displayName": "KW Difficulty",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Blog Content",
              "displayName": "Blog Content",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Record_id",
              "displayName": "Record_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Get Longtail Keywords",
              "displayName": "Get Longtail Keywords",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Longtail Status",
              "displayName": "Longtail Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Complete",
                  "value": "Complete"
                }
              ],
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": false
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2784,
        3024
      ],
      "id": "5490cacb-ae88-4458-a3fc-690b4bb4b92d",
      "name": "UpdateKeywords4",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app4JYDDtipxT1aRq",
          "mode": "list",
          "cachedResultName": "AI Blog V3 - Skool - DEMO",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq"
        },
        "table": {
          "__rl": true,
          "value": "tblKAxMOZuNXfGDXB",
          "mode": "list",
          "cachedResultName": "Keywords",
          "cachedResultUrl": "https://airtable.com/app4JYDDtipxT1aRq/tblKAxMOZuNXfGDXB"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('GetRecord4').item.json.id }}",
            "Article Status": "Processing"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Article Title",
              "displayName": "Article Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Research",
              "displayName": "Research",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Plan",
              "displayName": "Plan",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Keyword Link",
              "displayName": "Keyword Link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Keyword",
              "displayName": "Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Content Style",
              "displayName": "Content Style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Generate Article",
              "displayName": "Generate Article",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Article Status",
              "displayName": "Article Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Incomplete",
                  "value": "Incomplete"
                },
                {
                  "name": "Processing",
                  "value": "Processing"
                },
                {
                  "name": "Completed",
                  "value": "Completed"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Seed Keyword",
              "displayName": "Seed Keyword",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Subtopics",
              "displayName": "Subtopics",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Selected Subtopic (Optional)",
              "displayName": "Selected Subtopic (Optional)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1168,
        4448
      ],
      "id": "094382b6-2885-473f-86fd-17a7a1482f47",
      "name": "UpdateArticleStatus3",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      }
    },
    {
      "parameters": {
        "content": "## Find Internal linking Opportunities in Older Published Articles\nLooks through already published articles, finds links to the newer article and suggests them in the 'published' table\n- Input: `New article that's been published`\n- Output: `Linking suggestions`",
        "height": 672,
        "width": 2896,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        464,
        9040
      ],
      "id": "8ab47be3-8173-4951-b030-f84f2d6b3b20",
      "name": "Sticky Note134"
    },
    {
      "parameters": {
        "content": "## V3: Updated formatting in Airtable\n- Separate sections for linking, image generation, content review and scheduling\n![](https://i.ibb.co/W4srN5NB/Screenshot-1829.png)",
        "height": 624,
        "width": 1104
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        5280,
        5088
      ],
      "id": "d060d904-d2f8-419a-869f-cb1877a27ada",
      "name": "Sticky Note113"
    },
    {
      "parameters": {
        "content": "# [Overview of system](https://www.skool.com/scrapes/classroom/5cb99289?md=c070af39dc204195a578101adaa5fa21)\n# and \n# [Airtable setup video](https://www.skool.com/scrapes/classroom/5cb99289?md=073f2ce018324094906bc1c16250288a)",
        "height": 176,
        "width": 432,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1392,
        848
      ],
      "id": "6e3f77e0-d59d-4da3-b440-59a615e7f553",
      "name": "Sticky Note86"
    },
    {
      "parameters": {
        "content": "# [Generate Subtopics](https://www.skool.com/scrapes/classroom/5cb99289?md=e0115cff9ccc4e65b3d7ff8b170480d9)",
        "height": 96,
        "width": 384,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        48,
        3648
      ],
      "id": "c21938f4-56ff-41c7-9f1b-d72e84f83e8f",
      "name": "Sticky Note135"
    },
    {
      "parameters": {
        "content": "# [Article Generation](https://www.skool.com/scrapes/classroom/5cb99289?md=334791ef5a954817bc18f11b53ccc0bb)",
        "height": 128,
        "width": 432,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        5088
      ],
      "id": "0dd4ad89-06da-4c62-88ca-e45013b2898b",
      "name": "Sticky Note136"
    },
    {
      "parameters": {
        "content": "# [Image Generation](https://www.skool.com/scrapes/classroom/5cb99289?md=6c12131522f24f8b868d7daaffc342cf)",
        "height": 128,
        "width": 432,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -16,
        6496
      ],
      "id": "6f6036c2-1ae8-40d2-b7f0-9be223ab27af",
      "name": "Sticky Note137"
    },
    {
      "parameters": {
        "content": "# [Linking Old Articles](https://www.skool.com/scrapes/classroom/5cb99289?md=0889dfa1bbde46be889cfbd7e84bbac8)",
        "height": 128,
        "width": 432,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -16,
        9040
      ],
      "id": "ae63c9ba-a286-4737-8b0e-dbda86e2cdc0",
      "name": "Sticky Note138"
    },
    {
      "parameters": {
        "content": "## V3: Make Articles Longer or Shorter\n1. Find this input in the SetInputs\n`2,000-4,000`\n\n2. Replace with your desired length:\n- For shorter articles: 1,000-2,000 word articles\n- For longer articles: 3,000-6,000 word articles\n- For very long articles: 5,000-8,000 word articles\n\n3. The planner will automatically:\n- Adjust the number of sections\n- Redistribute word counts per section\n- Maintain proper article structure for the new length",
        "height": 368,
        "width": 416
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1824,
        4176
      ],
      "id": "dbcdfce9-ace1-4323-b3b3-dc0eb287336b",
      "name": "Sticky Note242"
    },
    {
      "parameters": {
        "model": "anthropic/claude-sonnet-4.5",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2272,
        4864
      ],
      "id": "d6d0842c-c210-4330-8c02-d031a1272db2",
      "name": "claude-4.5-sonnet"
    },
    {
      "parameters": {
        "model": "anthropic/claude-3.7-sonnet",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        3440,
        6032
      ],
      "id": "8c398549-8bda-4e38-944b-d6c715808f3c",
      "name": "Claude-3.7-Sonnet"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<Role>\nYou are an E-E-A-T optimization specialist who enhances blog articles to demonstrate Experience, Expertise, Authoritativeness, and Trustworthiness while preserving all existing content and external citations.\n</Role>\n\n<Critical_Requirements>\n- PRESERVE ALL EXISTING EXTERNAL LINKS - Do not remove or modify any markdown links text\n- PRESERVE ALL IMAGES with their alt text and captions exactly as they are\n- ADD ONLY, never remove existing content\n- Maintain the exact same article structure and flow\n- Keep all existing citations and references intact\n</Critical_Requirements>\n\n<Instructions>\nEnhance the article by adding E-E-A-T elements:\n\n1. **Metadata Block** (add at very top of article):\n\n**Published:** {{ $('SetInputs1').item.json['Current Date'] }}\n**Last Updated:** {{ $('SetInputs1').item.json['Current Date'] }}\n**Reading Time:** [calculate based on word count: divide total words by 200, round up]\n**Reviewed by:** [Expert Name], [Relevant Credentials]\n\n---\n\n2. **Author Bio Section** (add immediately after the introduction, before first main section):\n- Create 2-3 sentences establishing author credentials relevant to {{ $('SetInputs1').item.json.Keyword }}\n- Include specific expertise, years of experience, or notable achievements\n- Make it credible but not overly promotional\n- Format as a distinct section with line breaks before and after\n\nExample format:\n\n**About the Author:** [Author Name] is a [relevant credential] with [X] years of experience in [field related to topic]. They have [specific achievement or expertise relevant to article topic], making them uniquely qualified to guide you through [article subject].\n\n3. **Expert Callout Boxes** (add 2-3 throughout the article):\n- Insert at natural break points in the content\n- Place them after substantial sections (approximately every 500-700 words)\n- Each should contain first-hand insights, practical tips, or insider knowledge\n- Format with clear visual distinction\n\nExample formats:\n\n> ** Expert Tip:** [Practical, experience-based insight that demonstrates hands-on knowledge. Should feel like insider advice, not generic information. 2-3 sentences.]\n\nOR\n\n> ** Pro Insight:** [Specific recommendation based on real-world experience. Include a concrete example or metric when possible. 2-3 sentences.]\n\nOR\n\n> ** From Our Experience:** [Real scenario or lesson learned from practical application. Should demonstrate genuine expertise. 2-3 sentences.]\n\n4. **Experience Examples** (weave into 3-5 existing sections):\n- Identify sections that would benefit from first-person experience\n- Add 1-2 sentences that demonstrate hands-on knowledge\n- Use phrases like: In our experience, We've found that, After testing, When we implemented this\n- Keep these natural and integrated, not forced\n\n5. **Enhanced Conclusion** (add to existing conclusion):\n- Add a paragraph that summarizes the author's expert perspective\n- Include personal recommendations or top takeaways based on experience\n- Provide clear, authoritative next steps\n- Maintain the existing conclusion content, just enhance it\n\nExample addition:\n\n**Final Expert Recommendations:**\n\nBased on our experience with [topic area], the most critical factor is [key insight]. [1-2 sentences of actionable expert advice]. If you're just getting started, focus on [specific recommendation], as this will [concrete benefit].\n\n6. **Citation Preservation**:\n- DO NOT modify any existing text links\n- DO NOT remove any citations\n- DO NOT change the wording around citations\n- Ensure all original links remain exactly as they were\n\n7. **Image Preservation**:\n- DO NOT modify image URLs\n- DO NOT change alt text\n- DO NOT modify captions\n- Keep all image markdown exactly as provided\n\n</Instructions>\n\n<Output_Format>\nReturn the complete enhanced article with:\n- Metadata block at the very top\n- Author bio after introduction\n- 2-3 expert callout boxes distributed throughout\n- Experience examples woven into existing sections\n- Enhanced conclusion\n- ALL original content, links, and images preserved exactly\n- Proper markdown formatting with appropriate spacing\n</Output_Format>\n\n<Quality_Checks>\nBefore outputting, verify:\n1. All original external links text are present and unchanged\n2. All images with alt text and captions are preserved\n3. No original content has been removed\n4. New E-E-A-T elements are clearly added, not replacing existing content\n5. The article reads naturally with the additions\n6. Metadata is at the very top\n7. Author bio is positioned correctly after introduction\n8. Expert callouts are well-distributed (not clustered)\n9. Reading time is calculated (word count / 200, rounded up)\n</Quality_Checks>\n\n<Inputs>\nArticle content: {{ $('LastItem').item.json.article_so_far }}\n\nCompany/Brand: {{ $('SetInputs1').item.json['Company name'] }}\n\nTopic area: {{ $('SetInputs1').item.json.Keyword }}\n\nCurrent Year: {{ $('SetInputs1').item.json['Current Year'] }}\n\nCurrent Date: {{ $('SetInputs1').item.json['Current Date'] }}\n</Inputs>",
        "hasOutputParser": true,
        "needsFallback": true,
        "batching": {}
      },
      "id": "6fd4db9f-942c-4eb7-9aea-6221b74247f2",
      "name": "E-E-A-T Enhancement Agent",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        3056,
        5232
      ]
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n \"type\": \"object\",\n \"properties\": {\n \"enhanced_article\": {\n \"type\": \"string\",\n \"description\": \"Complete article with E-E-A-T enhancements, all original links and images preserved\"\n },\n \"enhancements_added\": {\n \"type\": \"object\",\n \"properties\": {\n \"metadata_added\": {\"type\": \"boolean\"},\n \"author_bio_added\": {\"type\": \"boolean\"},\n \"expert_callouts_count\": {\"type\": \"number\"},\n \"experience_examples_count\": {\"type\": \"number\"},\n \"conclusion_enhanced\": {\"type\": \"boolean\"}\n }\n },\n \"verification\": {\n \"type\": \"object\",\n \"properties\": {\n \"all_links_preserved\": {\"type\": \"boolean\", \"description\": \"Confirms all original external links remain intact\"},\n \"all_images_preserved\": {\"type\": \"boolean\", \"description\": \"Confirms all images and their properties remain intact\"},\n \"reading_time_minutes\": {\"type\": \"number\", \"description\": \"Calculated reading time in minutes\"}\n }\n }\n },\n \"required\": [\"enhanced_article\", \"enhancements_added\", \"verification\"]\n}",
        "autoFix": true
      },
      "id": "609f9176-873e-49eb-93b9-da7c3588bea2",
      "name": "E-E-A-T Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3168,
        5376
      ]
    },
    {
      "parameters": {
        "model": "google/gemini-3-pro-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        3136,
        5888
      ],
      "id": "d43caf38-27ca-4891-acc0-a2c4a4266141",
      "name": "Gemini-3-Pro"
    },
    {
      "parameters": {
        "content": "## V3: Enhances blog vs Google EEAT Guidelines\n\n",
        "height": 80,
        "width": 304
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2992,
        5136
      ],
      "id": "c516d376-6944-41a1-9717-3fce938990ff",
      "name": "Sticky Note139"
    },
    {
      "parameters": {
        "content": "## V3: Schema Generator\nWithout this code, Google has to guess your article's context, author, and structure. With this code, you are explicitly telling Google exactly how to rank and display your content.\n\nThis code node is the bridge between your creative content and Google's technical understanding.\n\nWhile your writer focuses on the text (the human side), this code generates Structured Data (Schema Markup)specifically JSON-LD. This is the \"native language\" of search engine crawlers.\n\nHere is why this specific block is critical for a high-performance blog strategy:\n\n1. It Technicalizes E-E-A-T (Experience, Expertise, Authority, Trust)\nWe previously discussed structuring content for E-E-A-T. This code hard-codes that authority directly into the page metadata.\n\nThe Code: organizationSchema and author objects.\n\nThe Impact: It explicitly tells Google, \"This article wasn't written by a ghost; it was published by [Company Name], a legitimate organization.\" This connects the content to your brand entity, which is vital for ranking in the AI era.\n\n2. It Unlock \"Rich Snippets\" in Search Results\nStandard search results just show a title and description. This code provides the data needed for Rich Results, which have much higher Click-Through Rates (CTR).\n\nThe Code:\n\n\"timeRequired\": PT${readingTimeMinutes}M\n\n\"datePublished\": isoDate\n\n\"headline\": articleTitle\n\nThe Impact: Google can now display \"7 min read\" or the publication date directly in the search results. Users are more likely to click an article when they know exactly how much time it requires.\n\n3. It Automates Site Structure Logic (Breadcrumbs)\nThe Code: breadcrumbSchema\n\nThe Impact: This generates the Home > Blog > Article Title path.\n\nFor Users: It appears in search results (e.g., example.com > blog > strategy), looking cleaner than a long URL.\n\nFor Google: It helps the crawler understand your website's hierarchy and how topics relate to one another.\n\n4. It Dynamic Calculation (No Manual Data Entry)\nThe Code: const readingTimeMinutes = Math.ceil(wordCount / 200);\n\nThe Impact: You don't need a human to calculate word counts or estimate reading times. This node dynamically reads the content length and does the math instantly. If you edit the article length, the reading time updates automatically in the schema.\n\n5. It Prepares Content for \"The Knowledge Graph\"\nBy using the @graph method at the end (const combinedSchema), you are connecting the dots for Google. You aren't just giving them three separate pieces of info; you are saying:\n\n\"This Article belongs to this Organization, and it sits at this spot in the Breadcrumb list.\"",
        "height": 96,
        "width": 352
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        4480,
        5392
      ],
      "id": "9c304c37-9f4e-443f-a84b-6e8c018aaf71",
      "name": "Sticky Note140"
    },
    {
      "parameters": {
        "jsCode": "// Schema Markup Generator for Article E-E-A-T\n// Generates structured data for Google to understand article authority\n\n// Extract article data\n\nconst articleTitle = $('UpdateStatus1').first().json.fields[\"Article Title\"] || 'Untitled Article';\n\n// const mainImageUrl = article.output?.images?.[0]?.url || '';\n\nconst articleContent = $('E-E-A-T Enhancement Agent').first().json.output.enhanced_article || '';\n\nconst companyName = $('SetJSON').first().json[\"Company name\"] || '';\n\nconst websiteUrl = $('SetJSON').first().json[\"Website URL\"] || '';\n\nconst currentDate = $('SetInputs1').first().json[\"Current Date\"] || new Date().toISOString();\n\nconst keyword = $('SetInputs1').first().json.Keyword || '';\n\n// Calculate reading time (word count / 200 words per minute)\nconst wordCount = articleContent.split(/s+/).length;\nconst readingTimeMinutes = Math.ceil(wordCount / 200);\n\n// Format ISO date\nconst isoDate = new Date(currentDate).toISOString();\n\n// Generate Article Schema\nconst articleSchema = {\n \"@context\": \"https://schema.org\",\n \"@type\": \"Article\",\n \"headline\": articleTitle,\n \"description\": `Comprehensive guide about ${keyword}`,\n \"image\": `${websiteUrl}/default-image.jpg`,// mainImageUrl || `${websiteUrl}/default-image.jpg`,\n \"datePublished\": isoDate,\n \"dateModified\": isoDate,\n \"author\": {\n \"@type\": \"Person\",\n \"name\": `${companyName} Editorial Team`,\n \"url\": websiteUrl\n },\n \"publisher\": {\n \"@type\": \"Organization\",\n \"name\": companyName,\n \"url\": websiteUrl,\n \"logo\": {\n \"@type\": \"ImageObject\",\n \"url\": `${websiteUrl}/logo.png`\n }\n },\n \"mainEntityOfPage\": {\n \"@type\": \"WebPage\",\n \"@id\": `${websiteUrl}/blog/${keyword.toLowerCase().replace(/s+/g, '-')}`\n },\n \"wordCount\": wordCount,\n \"timeRequired\": `PT${readingTimeMinutes}M`,\n \"articleBody\": articleContent.substring(0, 500) + '...',\n \"keywords\": keyword\n};\n\n// Generate BreadcrumbList Schema\nconst breadcrumbSchema = {\n \"@context\": \"https://schema.org\",\n \"@type\": \"BreadcrumbList\",\n \"itemListElement\": [\n {\n \"@type\": \"ListItem\",\n \"position\": 1,\n \"name\": \"Home\",\n \"item\": websiteUrl\n },\n {\n \"@type\": \"ListItem\",\n \"position\": 2,\n \"name\": \"Blog\",\n \"item\": `${websiteUrl}/blog`\n },\n {\n \"@type\": \"ListItem\",\n \"position\": 3,\n \"name\": articleTitle,\n \"item\": `${websiteUrl}/blog/${keyword.toLowerCase().replace(/s+/g, '-')}`\n }\n ]\n};\n\n// Generate Organization Schema for E-E-A-T\nconst organizationSchema = {\n \"@context\": \"https://schema.org\",\n \"@type\": \"Organization\",\n \"name\": companyName,\n \"url\": websiteUrl,\n \"logo\": `${websiteUrl}/logo.png`,\n \"sameAs\": [\n // Add social media URLs if available\n ],\n \"contactPoint\": {\n \"@type\": \"ContactPoint\",\n \"contactType\": \"Customer Service\",\n \"url\": websiteUrl\n }\n};\n\n// Combine all schemas\nconst combinedSchema = {\n \"@context\": \"https://schema.org\",\n \"@graph\": [\n articleSchema,\n breadcrumbSchema,\n organizationSchema\n ]\n};\n\n// Format for HTML insertion\nconst schemaMarkupHtml = `<script type=\"application/ld+json\">\n${JSON.stringify(combinedSchema, null, 2)}\n</script>`;\n\n// Return all data\nreturn {\n json: {\n schema_markup_json: combinedSchema,\n schema_markup_html: schemaMarkupHtml,\n reading_time_minutes: readingTimeMinutes,\n word_count: wordCount,\n article_url: `${websiteUrl}/blog/${keyword.toLowerCase().replace(/s+/g, '-')}`,\n publish_date: isoDate\n }\n};"
      },
      "id": "7b834406-b2af-4e61-942d-3fa9fcdb4ee7",
      "name": "Schema Markup Generator",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4576,
        5232
      ]
    },
    {
      "parameters": {
        "operation": "convert"
      },
      "type": "@cloudconvert/n8n-nodes-preview-cloudconvert.cloudConvert",
      "typeVersion": 1,
      "position": [
        3216,
        7040
      ],
      "id": "9e2e3cc7-04f1-491a-bf92-b16eb8c30422",
      "name": "CloudConvert1",
      "credentials": {}
    },
    {
      "parameters": {
        "content": "## V3 - SETUP Conversion\nCloudConvert helps turn the PNGs to JPGs to compress them into much smaller file sizes\n\n1. Install CC node (self-hosted only)\n![](https://i.ibb.co/XZrL7p2v/Screenshot-1861.png)\n\n2. Create an account and credentials for OAuth client (not API key) - https://cloudconvert.com/dashboard/api/v2/clients\n\n![](https://i.ibb.co/JwgBf9fF/Screenshot-1860.png)",
        "height": 560,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3088,
        7184
      ],
      "id": "4c6924ff-8c9c-4b82-9e83-5d959f56ed9f",
      "name": "Sticky Note143"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openRouterApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"google/gemini-2.5-flash-image-preview\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": [\n        {\n          \"type\": \"text\",\n          \"text\": \"cinematic still, dramatic lighting, high resolution, no text, a close-up of a person's hands placing a vintage, worn compass onto a glowing, futuristic holographic interface that projects a flowing digital flowchart, a beam of warm light from the interface illuminates their face and a rustic, wooden workshop desk, dust motes dance in the light, deep shadows, film grain, warm and cool color contrast.\"\n        }\n      ]\n    }\n  ]\n} \n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5008,
        7072
      ],
      "id": "569af958-1459-4199-8551-8ddc466232bb",
      "name": "2. NanoBanana",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "## Prompts to test\nSketch\n`pencil sketch, hand-drawn, minimalist, no text, a human hand gently guiding a mechanical, automated stylus, both drawing an upward-trending arrow on a graph together, the arrow points towards a stylized magnifying glass icon at the top, lines on the human side are organic and flowing, lines on the mechanical side have subtle gear motifs but blend smoothly. graphite on textured paper background. muted, sepia tones.`\n\nCinematic realism\n`cinematic still, dramatic lighting, high resolution, no text, a close-up of a person's hands placing a vintage, worn compass onto a glowing, futuristic holographic interface that projects a flowing digital flowchart, a beam of warm light from the interface illuminates their face and a rustic, wooden workshop desk, dust motes dance in the light, deep shadows, film grain, warm and cool color contrast.`",
        "height": 320,
        "width": 640,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        5216,
        6736
      ],
      "id": "e8bb6815-f854-442f-a578-0d2345e5dede",
      "name": "Sticky Note141"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openRouterApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"openai/gpt-5-image\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": [\n        {\n          \"type\": \"text\",\n          \"text\": \"cinematic still, dramatic lighting, high resolution, no text, a close-up of a person's hands placing a vintage, worn compass onto a glowing, futuristic holographic interface that projects a flowing digital flowchart, a beam of warm light from the interface illuminates their face and a rustic, wooden workshop desk, dust motes dance in the light, deep shadows, film grain, warm and cool color contrast.\"\n        }\n      ]\n    }\n  ],\n\"size\": \"1024x1024\"\n} \n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5008,
        6928
      ],
      "id": "80489ba1-bd5c-4492-8726-747ff8e777db",
      "name": "1. GPT-5-Image",
      "notesInFlow": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openRouterApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"google/gemini-3-pro-image-preview\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": [\n        {\n          \"type\": \"text\",\n          \"text\": \"cinematic still, dramatic lighting, high resolution, no text, a close-up of a person's hands placing a vintage, worn compass onto a glowing, futuristic holographic interface that projects a flowing digital flowchart, a beam of warm light from the interface illuminates their face and a rustic, wooden workshop desk, dust motes dance in the light, deep shadows, film grain, warm and cool color contrast.\"\n        }\n      ]\n    }\n  ],\n    \"imageSize\": \"1K\",\n    \"aspectRatio\": \"16:9\" \n} \n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5008,
        7216
      ],
      "id": "068058f7-2e6c-46ea-a68b-256189f3e167",
      "name": "3. Gemini 3 Pro",
      "notesInFlow": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "124f3a7c-735d-4121-a407-b559dbccdbfe",
              "name": "data",
              "value": "={{ $json.choices[0].message.images[0].image_url.url.split(',')[1] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5216,
        7072
      ],
      "id": "571c9f98-19af-4ec7-ab62-e21e745ab9e6",
      "name": "ExtractBase64Str2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.imgbb.com/1/upload",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-type",
              "value": "multipart/form-data"
            }
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "image",
              "inputDataFieldName": "data"
            }
          ]
        },
        "options": {}
      },
      "id": "fb253c62-5453-44d2-a42a-e26cf3884c4a",
      "name": "Upload Img to ImgBB for URL1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5728,
        7072
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "url": "=http://api.resmush.it/ws.php?img={{ $json.output.url }}",
        "options": {}
      },
      "id": "ecafd3f6-7db7-4a6f-8283-82a9d49aaad8",
      "name": "ReSmush.it High Qual",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5984,
        6944
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "url": "=http://api.resmush.it/ws.php?img={{ $json.data.url }}&qlty=70",
        "options": {}
      },
      "id": "675d9859-5bbb-4673-8c79-3d8e3a6a21a0",
      "name": "ReSmush.it Med Qual",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5984,
        7072
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "url": "=http://api.resmush.it/ws.php?img={{ $json.data.url }}&qlty=60",
        "options": {}
      },
      "id": "21a233be-484d-46c6-955a-4174e7f1d785",
      "name": "ReSmush.it Low Qual",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5984,
        7200
      ],
      "notesInFlow": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        4992,
        6736
      ],
      "id": "e3ec12bc-5e67-43df-9820-76c3e77c161c",
      "name": "When clicking Execute workflow",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "toBinary",
        "sourceProperty": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        5376,
        7072
      ],
      "id": "1e3b9b7b-0e20-4281-af1b-3fa47c1f0fe2",
      "name": "Convert to File1"
    },
    {
      "parameters": {
        "operation": "convert"
      },
      "type": "@cloudconvert/n8n-nodes-preview-cloudconvert.cloudConvert",
      "typeVersion": 1,
      "position": [
        5536,
        7072
      ],
      "id": "41d451a2-ef50-4f0b-bef4-2eae285d5bba",
      "name": "CloudConvert",
      "credentials": {}
    },
    {
      "parameters": {
        "url": "=https://api.tinify.com/output/{{ $json.output.url.split('/').pop() }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        6672,
        6944
      ],
      "id": "806b7837-c9b3-4afc-b287-39386c892dde",
      "name": "DownloadTinyPNG"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.tinify.com/shrink",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"source\": {\n    \"url\": \"{{ $json.data.url }}\"\n  }\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        6480,
        6944
      ],
      "id": "2f7ee9bb-d86f-4619-a788-725f55e716ef",
      "name": "OptimizeTinyPNG"
    },
    {
      "parameters": {
        "content": "## ALTERNATIVE - TinyPNG \n500 free requests per month - image optimsation\n\nHeader Auth: \nName: `Authorization`\nValue: `Basic BASE64_OF_api:your_api_key`\n\nEncode `api:your_api_key` here: https://www.base64encode.org/\n\n![](https://i.ibb.co/SwTsSg6Y/Screenshot-1856.png)\n![](https://i.ibb.co/97ynWS5/Screenshot-1857.png)",
        "height": 704,
        "width": 656
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        6192,
        6736
      ],
      "id": "fa5f6731-ba3d-4611-96e4-a04eb3f80e85",
      "name": "Sticky Note142"
    },
    {
      "parameters": {
        "content": "## Image Model Comparison\n`25th November 2025`\nUse any of the below HTTP requests to switch out with NanoBanana\n![](https://i.ibb.co/YB7R49nT/Screenshot-1855.png)",
        "height": 624,
        "width": 1952
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        4192,
        6736
      ],
      "id": "ea736431-28e2-4be7-991a-8017dadfb0bc",
      "name": "Sticky Note144"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f0313d07-15d3-41eb-a98c-2a330d237b11",
              "name": "documentContent",
              "value": "={{ $json.fields.Content.replace(/\\s+/g, ' ').trim() }}",
              "type": "string"
            },
            {
              "id": "f3d190e5-15c0-4a1b-8e8a-5e4a038ef370",
              "name": "docLength",
              "value": "={{ $json.fields.Content.replace(/\\s+/g, ' ').trim().length }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2544,
        8656
      ],
      "id": "89ab0da1-38d4-4990-b1d4-594728328b9b",
      "name": "Prepare document"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "3208af1d-ff46-4579-8059-fb9f692879a4",
              "leftValue": "={{ $json.docLength }}",
              "rightValue": 1000,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2784,
        8656
      ],
      "id": "9e0ce0e4-8806-42cc-b11c-5b7eecc91749",
      "name": "Longer than 1000 chars"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7c9773f7-c911-4092-ac28-05cd8cb5f8c8",
              "name": "content",
              "value": "={{ $json.documentContent }}",
              "type": "string"
            },
            {
              "id": "945ee234-223a-4481-930c-d0f66b962e4d",
              "name": "chunk",
              "value": 1,
              "type": "number"
            },
            {
              "id": "80dc0391-2b57-45be-b3a5-77767aaedd2d",
              "name": "chunk_size",
              "value": "={{ $json.docLength }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3008,
        8768
      ],
      "id": "0c0fb64a-f1a7-4df7-994e-6a4f4c3e2127",
      "name": "Output single chunk"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "73ff5a3a-3caf-4bd0-94ac-bb8949e2859b",
              "name": "maxChunkSize",
              "value": 1000,
              "type": "number"
            },
            {
              "id": "7603592f-10c9-480c-a191-bb71ae911e0d",
              "name": "minChunkSize",
              "value": 400,
              "type": "number"
            },
            {
              "id": "2e01a13f-6d4d-4b19-b71c-cdd026dc86f5",
              "name": "remainingText",
              "value": "={{ $json.documentContent }}",
              "type": "string"
            },
            {
              "id": "c44cc441-904d-43ac-a45f-c9002cae3873",
              "name": "chunkNumber",
              "value": 1,
              "type": "number"
            }
          ]
        },
        "includeOtherFields": true,
        "include": "selected",
        "includeFields": "documentContent",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3008,
        8560
      ],
      "id": "dad0a9a7-0c43-4581-92a8-8ca89627115f",
      "name": "Prepare variables"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ce54ae3a-c5af-4ea3-909c-f55d55655c46",
              "name": "textToAnalyze",
              "value": "={{ $json.remainingText?.substring(0, $json.maxChunkSize) }}",
              "type": "string"
            },
            {
              "id": "675578cc-f8dd-418f-a371-ff6ebb204c6a",
              "name": "remainingText",
              "value": "={{ $json.remainingText }}",
              "type": "string"
            },
            {
              "id": "a9c4694b-0aef-46dd-8031-8567497bf80a",
              "name": "chunkNumber",
              "value": "={{ $json.chunkNumber }}",
              "type": "number"
            },
            {
              "id": "116fb7dc-3078-424c-a0d9-1080c931f1e2",
              "name": "minChunkSize",
              "value": "={{ $json.minChunkSize }}",
              "type": "string"
            },
            {
              "id": "dbbf5afd-e5f2-4bda-acf4-ca981b07040d",
              "name": "maxChunkSize",
              "value": "={{ $json.maxChunkSize }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3280,
        8560
      ],
      "id": "253ce84b-c790-4968-90ac-eb6ad88d8bfa",
      "name": "Set Chunking Window"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"breakWord\": { \"type\": \"string\" }\n  },\n  \"required\": [\"breakWord\"]\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3568,
        8752
      ],
      "id": "ac632f60-0e9e-43a3-8672-3ce2c6b8fea2",
      "name": "Structured Output"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are analyzing a document to find the best transition point to split it into meaningful sections.\n\nYour goal: Keep related content together and split where topics naturally transition.\n\nRead this text carefully and identify where one topic/section ends and another begins:\n<text_to_analyze>\n{{ $json.textToAnalyze }}\n</text_to_analyze>\n\nFind the best transition point that occurs BEFORE character position {{$json.maxChunkSize}}.\n\nLook for:\n- Section headings or topic changes\n- Paragraph boundaries where the subject shifts\n- Complete conclusions before new ideas start\n- Natural breaks between different aspects of the content\n\nOutput the LAST WORD that appears right before your chosen split point. Just the single word itself, nothing else.\n\nExample: If you want to split after \"The company was founded in 2022.\" then output: \"2022\".",
        "hasOutputParser": true,
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        3504,
        8560
      ],
      "id": "7eaf8550-1423-43b8-b3f6-e4abcc732460",
      "name": "Find transition point"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c0fa067a-ceb3-4e54-8f77-27c4c0ec8068",
              "name": "record_id",
              "value": "={{ $('NewArticleAdded1').item.json.id }}",
              "type": "string"
            },
            {
              "id": "537584b0-ffd2-4079-b920-657989e1c06c",
              "name": "textToAnalyze",
              "value": "={{ $('Set Chunking Window').item.json.textToAnalyze }}",
              "type": "string"
            },
            {
              "id": "88fda99a-b55f-4f22-a305-42db10571200",
              "name": "breakWord",
              "value": "={{ $json.output.breakWord }}",
              "type": "string"
            },
            {
              "id": "23d30fcf-2985-4efa-bb06-c328c53557ab",
              "name": "remainingText",
              "value": "={{ $('Set Chunking Window').item.json.remainingText }}",
              "type": "string"
            },
            {
              "id": "ca54520b-3106-49ce-ae2f-46d96e1a0a93",
              "name": "maxChunkSize",
              "value": "={{ $('Set Chunking Window').item.json.maxChunkSize }}",
              "type": "number"
            },
            {
              "id": "9a29fbc1-a8a3-4ca1-a16d-455f220cb09b",
              "name": "minChunkSize",
              "value": "={{ $('Set Chunking Window').item.json.minChunkSize }}",
              "type": "number"
            },
            {
              "id": "b4acabbb-62f7-4015-a125-8bd0ca967303",
              "name": "chunkNumber",
              "value": "={{ $('Set Chunking Window').item.json.chunkNumber }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3872,
        8560
      ],
      "id": "a3b52d30-03eb-457e-871e-09906d11af98",
      "name": "Organize data"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Generate chunk (Mode: Run Once for Each Item)\n\nconst item = $input.item.json;\n\nconst record_id = item.record_id;\n\nconst remainingTextRaw = item.remainingText ?? '';\nconst maxChunkSize = Number(item.maxChunkSize ?? 1000);\nconst minChunkSize = Number(item.minChunkSize ?? 400);\nconst chunkNumber = Number(item.chunkNumber ?? 1);\n\nconst remainingText = String(remainingTextRaw);\n\n// If you pass textToAnalyze, it MUST align with remainingText indices (recommended: remainingText.slice(0, maxChunkSize))\nconst textToAnalyze =\n  typeof item.textToAnalyze === 'string' && item.textToAnalyze.length\n    ? item.textToAnalyze\n    : remainingText.slice(0, Math.min(maxChunkSize, remainingText.length));\n\nconst breakWordRaw = item.breakWord ?? '';\nconst breakWord = String(breakWordRaw).trim();\n\nconst clamp = (n, a, b) => Math.max(a, Math.min(b, n));\n\nconst isAlphaNum = (ch) => /[0-9A-Za-z]/.test(ch);\nconst isWordish = (ch) => isAlphaNum(ch) || ch === '_' || ch === \"'\" || ch === \"\";\nconst isWS = (ch) => /\\s/.test(ch);\n\n// --- 1) pick an initial breakpoint\nlet breakPoint = Math.min(maxChunkSize, remainingText.length);\n\n// Use LLM word if possible (but only within textToAnalyze)\nif (breakWord) {\n  const wordIndex = textToAnalyze.lastIndexOf(breakWord);\n  if (wordIndex !== -1) {\n    breakPoint = wordIndex + breakWord.length;\n\n    // Pull trailing punctuation/space INTO the chunk (so next chunk doesn't start with it)\n    const punct = new Set(['.', '!', '?', ',', ';', ':', ')', ']', '}', '\"', '', '', '', '(', '[', '{', '', ' ']);\n    while (breakPoint < textToAnalyze.length) {\n      const ch = textToAnalyze[breakPoint];\n      if (!punct.has(ch)) break;\n      breakPoint++;\n      if (ch === ' ') break;\n    }\n\n    breakPoint = Math.min(breakPoint, maxChunkSize);\n  }\n}\n\nbreakPoint = clamp(breakPoint, 0, remainingText.length);\n\n// --- 2) safety: ensure progress\nif (breakPoint <= 0) breakPoint = Math.min(1, remainingText.length);\n\n// --- 3) avoid splitting inside words / possessives\nif (breakPoint < remainingText.length) {\n  const prev = remainingText[breakPoint - 1] ?? '';\n  const next = remainingText[breakPoint] ?? '';\n\n  // If we're splitting inside a word-ish token, prefer backing up to whitespace >= minChunkSize.\n  if (isWordish(prev) && isWordish(next)) {\n    let back = -1;\n    for (let j = breakPoint - 1; j >= minChunkSize; j--) {\n      if (isWS(remainingText[j])) {\n        back = j;\n        break;\n      }\n    }\n\n    if (back !== -1) {\n      breakPoint = back;\n    } else {\n      // otherwise, advance to next whitespace (but stay within maxChunkSize)\n      let fwd = breakPoint;\n      while (fwd < remainingText.length && fwd < maxChunkSize && !isWS(remainingText[fwd])) fwd++;\n      if (fwd > breakPoint && fwd <= maxChunkSize) breakPoint = fwd;\n    }\n  }\n\n  // If next starts with a possessive like \"'s\" / \"s\", include it in the chunk.\n  const apost = remainingText[breakPoint] ?? '';\n  const afterApost = remainingText[breakPoint + 1] ?? '';\n  if ((apost === \"'\" || apost === \"\") && isAlphaNum(afterApost)) {\n    let j = breakPoint + 1;\n    while (j < remainingText.length && j < maxChunkSize && isAlphaNum(remainingText[j])) j++;\n    breakPoint = j;\n  }\n}\n\n// --- 4) finalize: slice\nbreakPoint = clamp(breakPoint, 1, remainingText.length);\n\nlet chunkText = remainingText.slice(0, breakPoint);\nlet newRemaining = remainingText.slice(breakPoint);\n\n// trim only the edges we actually want (keep internal newlines)\nchunkText = chunkText.trimEnd();\nnewRemaining = newRemaining.trimStart();\n\nreturn {\n  json: {\n    record_id,\n    content: chunkText,\n    chunk: chunkNumber,\n    chunk_size: chunkText.length,\n    remainingText: newRemaining,\n    chunkNumber: chunkNumber + 1,\n    maxChunkSize,\n    minChunkSize,\n  },\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4096,
        8560
      ],
      "id": "9622e598-a8f9-4185-a705-d808b251f9cd",
      "name": "Generate chunk"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "bf63f42f-bf74-4e26-a93f-b64566aaeb4b",
              "leftValue": "={{ $('Generate chunk').item.json.remainingText?.length > 0 }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "44ae10f5-9674-4d8a-9986-5aba41c00f2b",
              "leftValue": "={{ $('Output single chunk').isExecuted }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        4304,
        8560
      ],
      "id": "9f4d9e5a-2628-44e4-9369-c00acbd39596",
      "name": "End of text"
    },
    {
      "parameters": {
        "jsCode": "// Name must match the node on canvas exactly\nconst chunkNodeName = 'Generate chunk';\n\n// Current node input (Run Once for All Items)\nconst inputItems = $input.all().map(i => i.json ?? {});\n\n// Record IDs present in the current input batch\nconst recordIds = [\n  ...new Set(\n    inputItems\n      .map(j => j.record_id)\n      .filter(v => v !== undefined && v !== null && String(v).trim() !== '')\n  ),\n];\n\nconst hasRecordIds = recordIds.length > 0;\nconst groups = hasRecordIds ? recordIds : [null];\n\n// How many times has \"Generate chunk\" run in this execution?\nlet lastRunIndex = 0;\ntry {\n  lastRunIndex = $node[chunkNodeName].runIndex ?? 0;\n} catch (e) {\n  lastRunIndex = 0;\n}\n\n// Collect chunks across ALL runs of \"Generate chunk\", optionally filtering by record_id\nfunction collectChunks(recordId) {\n  const collected = [];\n\n  for (let run = 0; run <= lastRunIndex; run++) {\n    let itemsFromRun = [];\n    try {\n      itemsFromRun = $items(chunkNodeName, 0, run) || [];\n    } catch (e) {\n      continue;\n    }\n\n    for (const it of itemsFromRun) {\n      const j = it.json ?? {};\n      const content = j.content;\n\n      if (content === undefined || content === null || String(content).trim() === '') continue;\n      if (hasRecordIds && j.record_id !== recordId) continue;\n\n      const text = String(content);\n\n      collected.push({\n        record_id: j.record_id,\n        content: text,\n        chunk: Number(j.chunk ?? 0),\n        chunk_size: Number(j.chunk_size ?? text.length),\n        // optionally capture sizing if it exists on the chunk items\n        maxChunkSize: j.maxChunkSize ?? j.max_chunk_size,\n        minChunkSize: j.minChunkSize ?? j.min_chunk_size,\n      });\n    }\n  }\n\n  // sort by chunk number (per record)\n  collected.sort((a, b) => (a.chunk || 0) - (b.chunk || 0));\n\n  return collected;\n}\n\nfunction mergeSmallChunks(chunks, maxChunkSize, minChunkSize) {\n  const maxSize = Number(maxChunkSize) || 1000;\n  const minSize = Number(minChunkSize) || 400;\n\n  let i = 0;\n  while (i < chunks.length) {\n    chunks[i].chunk_size = chunks[i].content.length;\n\n    if (chunks[i].chunk_size < minSize) {\n      // merge with next\n      if (\n        i + 1 < chunks.length &&\n        chunks[i].chunk_size + chunks[i + 1].content.length <= maxSize\n      ) {\n        chunks[i].content = `${chunks[i].content} ${chunks[i + 1].content}`.trim();\n        chunks[i].chunk_size = chunks[i].content.length;\n        chunks.splice(i + 1, 1);\n        continue;\n      }\n\n      // merge into previous\n      if (\n        i > 0 &&\n        chunks[i - 1].content.length + chunks[i].chunk_size <= maxSize\n      ) {\n        chunks[i - 1].content = `${chunks[i - 1].content} ${chunks[i].content}`.trim();\n        chunks[i - 1].chunk_size = chunks[i - 1].content.length;\n        chunks.splice(i, 1);\n        continue;\n      }\n    }\n\n    i++;\n  }\n\n  // renumber after merges\n  for (let idx = 0; idx < chunks.length; idx++) {\n    chunks[idx].chunk = idx + 1;\n    chunks[idx].chunk_size = chunks[idx].content.length;\n  }\n\n  return chunks;\n}\n\nconst outputs = [];\n\nfor (const rid of groups) {\n  // pull sizing config from any input item in this group (fallback to defaults)\n  const cfg =\n    (hasRecordIds\n      ? inputItems.find(j => j.record_id === rid)\n      : inputItems[0]) || {};\n\n  let chunks = collectChunks(rid);\n\n  // choose sizing priority:\n  // 1) input cfg, 2) chunk metadata (if present), 3) defaults\n  const chunkCfg = chunks.find(c => c.maxChunkSize || c.minChunkSize) || {};\n  const maxChunkSize = cfg.maxChunkSize ?? cfg.max_chunk_size ?? chunkCfg.maxChunkSize ?? 1000;\n  const minChunkSize = cfg.minChunkSize ?? cfg.min_chunk_size ?? chunkCfg.minChunkSize ?? 400;\n\n  chunks = mergeSmallChunks(chunks, maxChunkSize, minChunkSize);\n\n  for (const c of chunks) {\n    outputs.push({\n      json: {\n        record_id: hasRecordIds ? rid : (c.record_id ?? cfg.record_id),\n        content: c.content,\n        chunk: c.chunk,\n        chunk_size: c.chunk_size,\n      },\n    });\n  }\n}\n\nreturn outputs;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4512,
        8560
      ],
      "id": "298b107d-cba5-47f8-92ba-b437efc7a5c0",
      "name": "Merge and Collect"
    },
    {
      "parameters": {
        "model": "openai/gpt-4.1",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        3456,
        8752
      ],
      "id": "dc1c77a7-3ec5-4f83-8a2f-1abb93f6f60a",
      "name": "gpt-4.1"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "authentication": "airtableTokenApi",
        "baseId": {
          "__rl": true,
          "value": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0/viwWIHM0rXbj8wkTQ?blocks=hide",
          "mode": "url"
        },
        "tableId": {
          "__rl": true,
          "value": "https://airtable.com/app4JYDDtipxT1aRq/tbl5gJPpg0Z6s6By0/viwWIHM0rXbj8wkTQ?blocks=hide",
          "mode": "url"
        },
        "triggerField": "New_Row_Added",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.airtableTrigger",
      "typeVersion": 1,
      "position": [
        2096,
        8592
      ],
      "id": "36cc897d-e76f-4998-9f78-50ba8acb9f00",
      "name": "NewArticleAdded1",
      "credentials": {
        "airtableTokenApi": {
          "id": "112UtIzO07XgrN7A",
          "name": "Airtable - zmidloch@z-agency.cz"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Load Context into Vector DB\nCreates the documents table automatically inside supabase",
        "height": 416,
        "width": 416,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        4688,
        8672
      ],
      "id": "b8a032db-15b7-44f1-8a30-95c2e65477fc",
      "name": "Sticky Note145"
    },
    {
      "parameters": {
        "content": "## Load New Article into Vector Store\nThis is done entirely for internal linking. i.e. it semantically splits context from a new article and stores it ready for searching (to provide the most relevant internal links)\n- Input: `Splits context from a newly updated article`\n- Output: `Stores it as a vector ready for semantic search (to find relevant links basically)`",
        "height": 864,
        "width": 3328,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2016,
        8352
      ],
      "id": "700908ec-fbc1-47a5-8d2f-722adfcbc508",
      "name": "Sticky Note146"
    },
    {
      "parameters": {
        "content": "### Supabase / Postgresql DB Setup\nFollow this [video](https://youtu.be/ti43gv1_f3E?si=4NjqWdCvlDMhiuPx&t=130)",
        "height": 96
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        5072,
        8768
      ],
      "id": "8bdb3549-3d7a-4a9d-abbf-a763b798a5d5",
      "name": "Sticky Note147"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2336,
        8592
      ],
      "id": "5ef37a17-e6aa-4731-aa26-308d9ed9110d",
      "name": "One at a time1"
    },
    {
      "parameters": {
        "jsonMode": "expressionData",
        "jsonData": "={{ $json.content || $json.data || $json.text || $json.concatenated_data }}",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "=record_id",
                "value": "={{ $('NewArticleAdded1').item.json.id }}"
              },
              {
                "name": "article_title",
                "value": "={{ $('NewArticleAdded1').item.json.fields.Title }}"
              },
              {
                "name": "blog_id",
                "value": "={{ $('NewArticleAdded1').item.json.fields['Blog Id'] }}"
              },
              {
                "name": "article_url",
                "value": "={{ $('NewArticleAdded1').item.json.fields['Article URL'] }}"
              },
              {
                "name": "article_upload_date",
                "value": "={{ $('NewArticleAdded1').item.json.fields['Uploaded Date'] }}"
              }
            ]
          }
        }
      },
      "id": "2a475327-b2a7-4705-88bd-155b627e2f3c",
      "name": "Default Data Loader1",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        4848,
        8944
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        4912,
        9072
      ],
      "id": "c9d9beda-c197-4449-a405-8b7ff11a6bb1",
      "name": "Recursive Character Text Splitter1"
    },
    {
      "parameters": {
        "model": "text-embedding-3-small",
        "options": {}
      },
      "id": "c9bd7089-6fdc-4fd0-b7d2-fdba2502217a",
      "name": "Embeddings OpenAI4",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1,
      "position": [
        4720,
        8944
      ]
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": "documents_pg",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        4768,
        8768
      ],
      "id": "e947171e-1d57-41b8-ba46-d72c2855a089",
      "name": "Postgres PGVector Store4"
    },
    {
      "parameters": {
        "content": "## V3: If you're using n8n Cloud (not self-hosted)\nThen replace the left hand workflow for the  right hand workflow (this one below). LangChain code node is not available through n8n directly so this does the same thing in a slightly more complex way.",
        "height": 112,
        "width": 928,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2016,
        8256
      ],
      "id": "5b642d50-3a71-4075-af3e-c0930beb5a31",
      "name": "Sticky Note148"
    }
  ],
  "settings": {
    "executionOrder": "v1",
    "errorWorkflow": "zVAjJgKV17IWzFP7",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "shared": [
    {
      "updatedAt": "2025-12-19T21:15:53.901Z",
      "createdAt": "2025-12-19T21:15:53.901Z",
      "role": "workflow:owner",
      "workflowId": "cH2OxswrWaz1zMh1",
      "projectId": "XqkS7oX8lMj4YbIK"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-12-21T15:00:22.230Z",
  "versionId": "e9ce5f15-34d7-4494-8498-6885f083fc40"
}